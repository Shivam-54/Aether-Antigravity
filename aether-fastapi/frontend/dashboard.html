<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aether | Dashboard</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Fonts: Geist (exact match from old website) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Geist:wght@100;200;300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/style.css?v=55" rel="stylesheet">


    <style>
        /* Base Styling - LOCKED TYPOGRAPHY */
        body {
            font-family: 'Geist', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            font-weight: 300;
            background-color: #050505;
            color: #ffffff;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .hidden {
            display: none !important;
        }

        /* Ambient Background - Calm, Deep, Premium */
        /* LOCKED: Ultra-soft gradient, no bands/hotspots, darker than glass */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            z-index: -1;
            background: linear-gradient(180deg, #080808 0%, #030303 100%);
            pointer-events: none;
            /* âœ“ DECORATIVE LAYER: uniform dark depth */
        }

        /* Grain Overlay */


        /* Main Container */
        .dashboard-container {
            display: flex;
            height: 100vh;
            position: relative;
            z-index: 1;
        }

        /* Sidebar Styling */
        .sidebar {
            width: 240px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }

        .sidebar-container {
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 2rem 1rem;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            gap: 1rem;
            height: 100%;
            box-shadow: inset 0 0 20px 0 rgba(255, 255, 255, 0.02), 0 0 50px 0 rgba(255, 255, 255, 0.05);
            overflow: hidden;
        }

        /* Material grain layer for sidebar */


        .sidebar-brand {
            font-size: 0.875rem;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .sidebar-menu {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .sidebar-item {
            padding: 0.5rem 1.25rem;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.75rem;
            font-weight: 300;
            letter-spacing: 0.05em;
            line-height: 1;
            border-radius: 9999px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .sidebar-item:hover {
            color: rgba(255, 255, 255, 0.9);
            background: rgba(255, 255, 255, 0.05);
        }

        .sidebar-item.active {
            color: rgba(255, 255, 255, 0.9);
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 0 20px 0 rgba(255, 255, 255, 0.02), 0 0 30px 0 rgba(255, 255, 255, 0.04);
        }

        .sidebar-item svg {
            width: 16px;
            height: 16px;
            opacity: 0.7;
        }

        .sidebar-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.05);
            margin: 0.75rem 0;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        /* Top Bar */
        .top-bar {
            padding: 1.5rem 2.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 50;
        }

        /* Breadcrumb Glass Capsule - Recipe 2 */
        .breadcrumb-capsule {
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 0 14px 0 rgba(255, 255, 255, 0.02), 0 0 32px 0 rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 9999px;
            padding: 0.5rem 1.25rem;
            display: flex;
            align-items: center;
            overflow: hidden;
        }



        #breadcrumb {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.6);
            font-weight: 300;
            letter-spacing: 0.05em;
            line-height: 1;
        }

        /* Module Tabs Wrapper */
        .module-tabs-wrapper {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        /* Module Tabs - Recipe 2 */
        .module-tabs {
            position: relative;
            display: flex;
            gap: 0;
            padding: 0.25rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 9999px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: inset 0 0 14px 0 rgba(255, 255, 255, 0.02), 0 0 32px 0 rgba(255, 255, 255, 0.04);
            overflow: hidden;
        }



        .module-tab {
            padding: 0.5rem 1.25rem;
            background: transparent;
            border: 1px solid transparent;
            border-radius: 9999px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.75rem;
            font-weight: 300;
            letter-spacing: 0.05em;
            line-height: 1;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .module-tab:hover {
            color: rgba(255, 255, 255, 0.9);
            background: rgba(255, 255, 255, 0.05);
        }

        .module-tab.active {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.9);
            box-shadow: inset 0 0 20px 0 rgba(255, 255, 255, 0.02), 0 0 30px 0 rgba(255, 255, 255, 0.04);
        }

        /* User Section - Canonical (Pill) */
        .user-section {
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            /* Canonical Thick Glass Shadow */
            box-shadow:
                inset 0 0 20px rgba(255, 255, 255, 0.035),
                inset 0 0 6px rgba(255, 255, 255, 0.06),
                0 0 40px rgba(255, 255, 255, 0.07),
                0 18px 55px rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 9999px;
            padding: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            overflow: hidden;
        }



        .user-email {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.5);
            font-weight: 300;
            letter-spacing: 0.05em;
            line-height: 1;
            padding-left: 1rem;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.8);
        }

        /* Content Area */
        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
        }

        /* Glass Card - Canonical Primary */
        .glass-card {
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            /* Matches Spec */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            /* Canonical Thick Glass Shadow */
            box-shadow:
                inset 0 0 20px rgba(255, 255, 255, 0.035),
                inset 0 0 6px rgba(255, 255, 255, 0.06),
                0 0 40px rgba(255, 255, 255, 0.07),
                0 18px 55px rgba(0, 0, 0, 0.6);
            padding: 2rem;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }



        /* Modal Glass - Hero Slab (Heavy Depth) */
        .modal-glass {
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow:
                inset 0 0 20px rgba(255, 255, 255, 0.035),
                0 0 40px rgba(255, 255, 255, 0.07),
                0 24px 70px rgba(0, 0, 0, 0.7);
            /* Hero Depth */
            overflow: hidden;
        }



        .modal-close-btn {
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.35);
            padding: 0;
            cursor: pointer;
            transition: color 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: auto;
            height: auto;
        }

        .modal-close-btn:hover {
            color: rgba(255, 255, 255, 0.7);
        }

        /* PREMIUM INPUT - Refined Glass */
        .modal-glass-input {
            background: rgba(255, 255, 255, 0.04) !important;
            border: 1px solid rgba(255, 255, 255, 0.12) !important;
            border-radius: 0.625rem !important;
            color: rgba(255, 255, 255, 0.92) !important;
            padding: 0.875rem 1rem !important;
            font-weight: 300 !important;
            font-size: 0.9rem !important;
            transition: border-color 0.2s ease, background 0.2s ease !important;
            box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.02) !important;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .modal-glass-input:focus {
            background: rgba(255, 255, 255, 0.06) !important;
            border-color: rgba(255, 255, 255, 0.3) !important;
            outline: none !important;
            box-shadow: inset 0 0 12px rgba(255, 255, 255, 0.05), 0 0 20px rgba(255, 255, 255, 0.15) !important;
        }

        /* PREMIUM BUTTON - Glossy Hardware */
        .modal-btn-primary {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.14);
            border-radius: 0.625rem;
            color: rgba(255, 255, 255, 0.92);
            padding: 0.875rem 1.5rem;
            font-weight: 400;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.05), 0 0 22px rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .modal-btn-primary:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
            color: white;
            box-shadow: inset 0 0 15px rgba(255, 255, 255, 0.08), 0 0 30px rgba(255, 255, 255, 0.12);
        }

        .modal-btn-secondary {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 0.625rem;
            color: rgba(255, 255, 255, 0.55);
            padding: 0.875rem 1.5rem;
            font-weight: 400;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .modal-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.04);
            border-color: rgba(255, 255, 255, 0.12);
            color: rgba(255, 255, 255, 0.8);
            box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.04), 0 0 20px rgba(255, 255, 255, 0.05);
        }

        .modal-label {
            font-size: 0.8rem;
            font-weight: 400;
            letter-spacing: 0.01em;
            text-transform: none;
            color: rgba(255, 255, 255, 0.55);
            margin-bottom: 0.625rem;
            display: block;
        }

        .search-input-wrapper {
            position: relative;
        }

        .search-input-wrapper .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            color: rgba(255, 255, 255, 0.35);
            pointer-events: none;
            z-index: 1;
        }

        .search-input-wrapper input {
            padding-left: 3rem !important;
        }

        /* Glass Button - Glossy Hardware */
        .glass-button {
            position: relative;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.14);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            /* Glossy Shadow */
            box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.05), 0 0 22px rgba(255, 255, 255, 0.08);
            transition: all 0.2s ease;
            color: white;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            overflow: hidden;
        }

        .glass-button:hover {
            background: rgba(255, 255, 255, 0.08);
            color: white;
            box-shadow: inset 0 0 15px rgba(255, 255, 255, 0.08), 0 0 30px rgba(255, 255, 255, 0.15);
        }

        /* Glass Capsule - Canonical (Pill) */
        .glass-capsule {
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 9999px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow:
                inset 0 0 20px rgba(255, 255, 255, 0.035),
                inset 0 0 6px rgba(255, 255, 255, 0.06),
                0 0 40px rgba(255, 255, 255, 0.07),
                0 18px 55px rgba(0, 0, 0, 0.6);
            overflow: hidden;
        }



        /* Bootstrap Overrides handled via custom classes and !important helpers if needed */
        .text-white-50 {
            color: rgba(255, 255, 255, 0.5) !important;
        }

        .text-white-70 {
            color: rgba(255, 255, 255, 0.7) !important;
        }

        .text-white-90 {
            color: rgba(255, 255, 255, 0.9) !important;
        }

        .fw-light {
            font-weight: 300 !important;
        }

        .fw-extralight {
            font-weight: 200 !important;
        }

        /* Remove default button styles */
        button {
            border: none;
            background: none;
            color: inherit;
        }

        /* Module Visibility */
        .module-content {
            display: none;
        }

        .module-content.active {
            display: block;
        }

        .realestate-section {
            display: none;
        }

        .realestate-section.active {
            display: block;
        }

        .crypto-section {
            display: none;
        }

        .crypto-section.active {
            display: block;
        }
    </style>
</head>

<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-container">
                <div class="sidebar-brand">AETHER</div>
                <div class="sidebar-menu" id="sidebarMenu"></div>
                <div class="sidebar-divider"></div>
                <div class="sidebar-item" onclick="logout()">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                    <span>Log Out</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="breadcrumb-capsule">
                    <span id="breadcrumb">Home</span>
                </div>

                <div class="module-tabs-wrapper">
                    <div class="module-tabs">
                        <button class="module-tab" data-source="realestate" onclick="switchSource('realestate')">Real
                            Estate</button>
                        <button class="module-tab" data-source="crypto" onclick="switchSource('crypto')">Crypto</button>
                        <button class="module-tab" data-source="shares" onclick="switchSource('shares')">Shares</button>
                        <button class="module-tab" data-source="bonds" onclick="switchSource('bonds')">Bonds</button>
                        <button class="module-tab" data-source="business"
                            onclick="switchSource('business')">Business</button>
                    </div>
                </div>

                <div class="user-section">
                    <span class="user-email" id="userEmail"></span>
                    <div class="user-avatar">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Home Dashboard Module -->
                <div class="module-content active" id="module-home">
                    <!-- Intentionally clean/empty landing view -->
                </div>

                <!-- Real Estate Module -->
                <div class="module-content" id="module-realestate">
                    <!-- 1. Overview Section (renamed from Dashboard) -->
                    <div id="realestate-section-overview" class="realestate-section active">
                        <!-- Injected by JS -->
                    </div>

                    <!-- 2. Properties Section -->
                    <div id="realestate-section-properties" class="realestate-section">
                        <div class="glass-header mb-4 d-flex justify-content-between align-items-end">
                            <div>
                                <h2 class="h3 fw-light mb-2">Active Properties</h2>
                                <p class="text-white-50 fw-light">Properties currently owned</p>
                            </div>
                            <div class="d-flex gap-3">
                                <div class="glass-capsule p-1 d-flex gap-1">
                                    <button id="filter-owned"
                                        class="px-3 py-1 rounded-pill bg-white bg-opacity-10 text-white small"
                                        onclick="filterProperties('Owned')">Owned</button>
                                    <button id="filter-rented" class="px-3 py-1 rounded-pill text-white-50 small"
                                        onclick="filterProperties('Rented')">Rented</button>
                                </div>
                                <button class="glass-button px-4 py-2 rounded-pill small" onclick="handleAddProperty()">
                                    <span>+</span> Add Property
                                </button>
                            </div>
                        </div>
                        <div id="properties-grid" class="row g-4">
                            <!-- Injected by JS -->
                        </div>
                    </div>

                    <!-- 3. Rental History -->
                    <div id="realestate-section-rental-sale" class="realestate-section">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Rental & Sale History</h2>
                            <p class="text-white-50 fw-light">Chronological transaction ledger</p>
                        </div>
                        <div class="glass-card overflow-hidden p-0">
                            <!-- Table Headers -->
                            <div
                                class="row g-0 p-3 border-bottom border-white border-opacity-10 text-white-50 small text-uppercase">
                                <div class="col-2">Type</div>
                                <div class="col-2">Property</div>
                                <div class="col-2">Value</div>
                                <div class="col-2">Rent Amount</div>
                                <div class="col-2">Date</div>
                                <div class="col-2">Gain/Loss</div>
                            </div>
                            <div id="transaction-list">
                                <!-- Injected JS -->
                            </div>
                        </div>
                    </div>

                    <!-- 4. Valuations -->
                    <div id="realestate-section-valuation" class="realestate-section">
                        <div class="glass-header mb-4 d-flex justify-content-between align-items-end">
                            <div>
                                <h2 class="h3 fw-light mb-2">Valuations & Documents</h2>
                                <p class="text-white-50 fw-light">Property documentation and records</p>
                            </div>
                            <button class="glass-button px-4 py-2 rounded-pill small d-flex align-items-center gap-2"
                                onclick="openUploadDocumentModal()">
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12">
                                    </path>
                                </svg>
                                Upload Document
                            </button>
                        </div>
                        <div id="documents-list" class="row g-4">
                            <!-- Injected JS -->
                        </div>
                    </div>

                    <!-- 5. AI Insights -->
                    <div id="realestate-section-ai-insights" class="realestate-section" style="display: none;">
                        <div class="row g-5">
                            <!-- Left Panel: AI Property Insights -->
                            <div class="col-lg-6 d-flex flex-column gap-4">
                                <div>
                                    <div class="d-flex align-items-center gap-2 mb-1">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-white">
                                            <path
                                                d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z" />
                                        </svg>
                                        <h2 class="h4 fw-light text-white mb-0">AI Property Insights</h2>
                                    </div>
                                    <p class="small text-white-50 mb-0 ps-4 ms-1">Strategic recommendations powered by
                                        AI</p>
                                </div>

                                <!-- Insight Card -->
                                <div
                                    class="glass-card p-4 d-flex gap-3 align-items-start position-relative overflow-hidden">
                                    <!-- Icon Container -->
                                    <div class="rounded-3 d-flex align-items-center justify-content-center flex-shrink-0"
                                        style="width: 48px; height: 48px; background: rgba(255,255,255,0.05);">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-white-50">
                                            <polyline points="22 7 13.5 15.5 8.5 10.5 2 17" />
                                            <polyline points="16 7 22 7 22 13" />
                                        </svg>
                                    </div>

                                    <div class="flex-grow-1">
                                        <p class="text-white fw-light mb-3" style="line-height: 1.6;">
                                            You have sold 1 properties. Ensure you reinvest capital gains to maintain
                                            compounding growth.
                                        </p>

                                        <div class="d-flex align-items-center gap-3 flex-wrap">
                                            <span
                                                class="badge bg-warning bg-opacity-10 text-warning fw-normal px-3 py-2 rounded-pill small">Medium
                                                Impact</span>

                                            <div class="d-flex align-items-center gap-2 flex-grow-1"
                                                style="max-width: 200px;">
                                                <div class="progress w-100"
                                                    style="height: 4px; background: rgba(255,255,255,0.1);">
                                                    <div class="progress-bar bg-white" role="progressbar"
                                                        style="width: 95%" aria-valuenow="95" aria-valuemin="0"
                                                        aria-valuemax="100"></div>
                                                </div>
                                                <span class="small text-white-50" style="font-size: 0.75rem;">95%
                                                    confidence</span>
                                            </div>

                                            <span
                                                class="badge bg-white bg-opacity-10 text-white-50 fw-normal px-3 py-2 rounded-pill small">Opportunity</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Right Panel: AI Assistant -->
                            <div class="col-lg-6 d-flex flex-column gap-4" style="height: 100%;">
                                <div>
                                    <div class="d-flex align-items-center gap-2 mb-1">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-white">
                                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z">
                                            </path>
                                        </svg>
                                        <h2 class="h4 fw-light text-white mb-0">AI Assistant</h2>
                                    </div>
                                    <p class="small text-white-50 mb-0 ps-4 ms-1">Ask questions about your portfolio</p>
                                </div>

                                <!-- View 1: Question Grid -->
                                <div id="ai-question-grid" class="d-flex flex-column gap-3">
                                    <div class="row g-3">
                                        <div class="col-6">
                                            <button onclick="handleAIChat('Which property is underperforming?')"
                                                class="glass-card p-4 w-100 text-start h-100 hover-lift d-flex align-items-start gap-3 border-0"
                                                style="background: rgba(255,255,255,0.03);">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="text-white-50 flex-shrink-0 mt-1">
                                                    <path d="m12 14 4-4" />
                                                    <path d="M3.34 19a10 10 0 1 1 17.32 0" />
                                                </svg>
                                                <span class="text-white-90 small">Which property is
                                                    underperforming?</span>
                                            </button>
                                        </div>
                                        <div class="col-6">
                                            <button onclick="handleAIChat('Should I hold or sell this asset?')"
                                                class="glass-card p-4 w-100 text-start h-100 hover-lift d-flex align-items-start gap-3 border-0"
                                                style="background: rgba(255,255,255,0.03);">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="text-white-50 flex-shrink-0 mt-1">
                                                    <path d="M12 2v20" />
                                                    <path d="m17 5-5-3-5 3" />
                                                    <path d="m17 19-5 3-5-3" />
                                                </svg>
                                                <span class="text-white-90 small">Should I hold or sell this
                                                    asset?</span>
                                            </button>
                                        </div>
                                        <div class="col-6">
                                            <button onclick="handleAIChat('What is my real estate risk exposure?')"
                                                class="glass-card p-4 w-100 text-start h-100 hover-lift d-flex align-items-start gap-3 border-0"
                                                style="background: rgba(255,255,255,0.03);">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="text-white-50 flex-shrink-0 mt-1">
                                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10" />
                                                </svg>
                                                <span class="text-white-90 small">What is my real estate risk
                                                    exposure?</span>
                                            </button>
                                        </div>
                                        <div class="col-6">
                                            <button onclick="handleAIChat('How can I optimize my portfolio?')"
                                                class="glass-card p-4 w-100 text-start h-100 hover-lift d-flex align-items-start gap-3 border-0"
                                                style="background: rgba(255,255,255,0.03);">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="text-white-50 flex-shrink-0 mt-1">
                                                    <path d="M2 20h.01" />
                                                    <path d="M7 20v-4" />
                                                    <path d="M12 20v-8" />
                                                    <path d="M17 20V8" />
                                                    <path d="M22 4v16" />
                                                </svg>
                                                <span class="text-white-90 small">How can I optimize my
                                                    portfolio?</span>
                                            </button>
                                        </div>
                                    </div>

                                    <div>
                                        <button onclick="toggleAIChatMode()"
                                            class="btn btn-link text-white-50 text-decoration-none small p-0 hover-text-white transition-all">Expand
                                            chat</button>
                                    </div>
                                </div>

                                <!-- View 2: Active Chat Interface (Hidden by default) -->
                                <div id="ai-chat-interface" style="display: none;">
                                    <div class="glass-card d-flex flex-column p-4"
                                        style="height: 400px; position: relative;">
                                        <!-- Empty State / Chat Messages -->
                                        <div id="ai-chat-messages-full"
                                            class="flex-grow-1 overflow-auto mb-3 custom-scrollbar d-flex flex-column gap-3 pe-2">
                                            <div id="ai-chat-placeholder"
                                                class="d-flex align-items-center justify-content-center h-100 text-white-50 small">
                                                Ask me anything about your real estate portfolio...
                                            </div>
                                        </div>

                                        <!-- Input Area -->
                                        <form
                                            onsubmit="event.preventDefault(); handleAIChat(this.querySelector('input').value); this.querySelector('input').value='';"
                                            class="mt-auto">
                                            <div class="position-relative">
                                                <input type="text"
                                                    class="form-control glass-input rounded-pill ps-4 pe-5 py-3 text-white small"
                                                    placeholder="Type a message..."
                                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); font-size: 0.9rem;">
                                                <button type="button"
                                                    onclick="this.form.dispatchEvent(new Event('submit'))"
                                                    class="btn position-absolute top-50 end-0 translate-middle-y text-white-50 hover-text-white pe-3"
                                                    style="border:none; background:none;">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                                        viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <path d="m22 2-7 20-4-9-9-4Z" />
                                                        <path d="M22 2 11 13" />
                                                    </svg>
                                                </button>
                                            </div>
                                        </form>
                                    </div>

                                    <!-- Collapse Button (Outside Card) -->
                                    <button onclick="toggleAIChatMode()"
                                        class="btn btn-link text-white-50 text-decoration-none small ps-0 mt-2 hover-text-white transition-all">Collapse</button>
                                </div>
                            </div>



                        </div>
                    </div>
                </div>

                <!-- Crypto Module -->
                <div class="module-content" id="module-crypto">
                    <!-- 1. Overview Section -->
                    <div id="crypto-section-overview" class="crypto-section active">
                        <!-- Injected by JS -->
                    </div>

                    <!-- 2. Holdings Section -->
                    <div id="crypto-section-holdings" class="crypto-section" style="display: none;">
                        <!-- Container 1: Add Crypto -->
                        <div class="d-flex justify-content-end mb-3">
                            <button onclick="openAddCryptoModal()"
                                class="btn px-3 py-2 rounded-pill d-flex align-items-center gap-2 transition-all hover-scale-105"
                                style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: white;">
                                <span class="fs-6 fw-light">+</span>
                                <span>Add Crypto</span>
                            </button>
                        </div>

                        <!-- Container 2: Holdings List -->
                        <div class="glass-header mb-3">
                            <h2 class="h5 fw-light text-white-90">Your Assets</h2>
                        </div>
                        <div class="glass-panel overflow-hidden p-0">
                            <div
                                class="row g-0 p-3 border-bottom border-white border-opacity-10 text-white-50 small text-uppercase">
                                <div class="col-2">Asset</div>
                                <div class="col-2">Price</div>
                                <div class="col-2">Balance</div>
                                <div class="col-2">Value</div>
                                <div class="col-2">Network</div>
                                <div class="col-2 text-end">Actions</div>
                            </div>
                            <div id="crypto-holdings-list">
                                <!-- Injected by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- 3. On-Chain Activity Section -->
                    <div id="crypto-section-on-chain" class="crypto-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">On-Chain Activity</h2>
                            <p class="text-white-50 fw-light">Recent transactions across your wallets</p>
                        </div>
                        <div class="glass-card overflow-hidden p-0">
                            <div
                                class="row g-0 p-3 border-bottom border-white border-opacity-10 text-white-50 small text-uppercase">
                                <div class="col-2">Type</div>
                                <div class="col-2">Asset</div>
                                <div class="col-2">Amount</div>
                                <div class="col-2">Value</div>
                                <div class="col-2">Wallet</div>
                                <div class="col-2">Status</div>
                            </div>
                            <div id="crypto-transactions-list">
                                <!-- Injected by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- 4. Wallets Section -->
                    <div id="crypto-section-wallets" class="crypto-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Connected Wallets</h2>
                            <p class="text-white-50 fw-light">Manage your wallet connections</p>
                        </div>
                        <div id="crypto-wallets-grid" class="row g-4">
                            <!-- Injected by JS -->
                        </div>
                    </div>

                    <!-- 5. AI Insights Section -->
                    <div id="crypto-section-ai-insights" class="crypto-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">AI Insights</h2>
                            <p class="text-white-50 fw-light">AI-powered analysis of your crypto portfolio
                            </p>
                        </div>
                        <div class="glass-card glass-empty-state">
                            <div class="glass-empty-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round" class="text-white-80">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="12" y1="8" x2="12" y2="12"></line>
                                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                </svg>
                            </div>
                            <h3 class="h4 fw-light text-white-90 mb-2">Coming Soon</h3>
                            <p class="text-white-50 fw-light">AI-powered portfolio analysis is under development.</p>
                        </div>
                    </div>
                </div>

                <!-- Shares Module -->
                <div class="module-content" id="module-shares">
                    <!-- 1. Overview Section -->
                    <div id="shares-section-overview" class="shares-section active">
                        <!-- Injected by JS -->
                    </div>

                    <!-- 2. Holdings Section -->
                    <div id="shares-section-holdings" class="shares-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Share Holdings</h2>
                            <p class="text-white-50 fw-light">Manage your stock portfolio and add new holdings</p>
                        </div>
                        <div id="shares-holdings-list">
                            <!-- Injected by JS -->
                        </div>
                    </div>

                    <!-- 3. Market Activity Section -->
                    <div id="shares-section-market-activity" class="shares-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Market Activity</h2>
                            <p class="text-white-50 fw-light">Recent market movements in your portfolio</p>
                        </div>
                        <div class="glass-card glass-empty-state">
                            <div class="glass-empty-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round" class="text-white-80">
                                    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                                </svg>
                            </div>
                            <h3 class="h4 fw-light text-white-90 mb-2">Coming Soon</h3>
                            <p class="text-white-50 fw-light">Market activity tracking is under development.</p>
                        </div>
                    </div>

                    <!-- 4. Performance Section -->
                    <div id="shares-section-performance" class="shares-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Performance Analytics</h2>
                            <p class="text-white-50 fw-light">Deep dive into your portfolio performance</p>
                        </div>
                        <div class="glass-card glass-empty-state">
                            <div class="glass-empty-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round" class="text-white-80">
                                    <line x1="18" y1="20" x2="18" y2="10"></line>
                                    <line x1="12" y1="20" x2="12" y2="4"></line>
                                    <line x1="6" y1="20" x2="6" y2="14"></line>
                                </svg>
                            </div>
                            <h3 class="h4 fw-light text-white-90 mb-2">Coming Soon</h3>
                            <p class="text-white-50 fw-light">Performance analytics are under development.</p>
                        </div>
                    </div>

                    <!-- 5. Transactions Section -->
                    <div id="shares-section-transactions" class="shares-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Transaction History</h2>
                            <p class="text-white-50 fw-light">Complete record of buy and sell orders</p>
                        </div>
                        <div class="glass-card glass-empty-state">
                            <div class="glass-empty-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round" class="text-white-80">
                                    <rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect>
                                    <polyline points="17 2 12 7 7 2"></polyline>
                                </svg>
                            </div>
                            <h3 class="h4 fw-light text-white-90 mb-2">Coming Soon</h3>
                            <p class="text-white-50 fw-light">Transaction history is under development.</p>
                        </div>
                    </div>

                    <!-- 6. AI Insights Section -->
                    <div id="shares-section-ai-insights" class="shares-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">AI Insights</h2>
                            <p class="text-white-50 fw-light">AI-powered analysis of your share portfolio</p>
                        </div>
                        <div class="glass-card glass-empty-state">
                            <div class="glass-empty-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round" class="text-white-80">
                                    <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                                    <path d="M2 17l10 5 10-5"></path>
                                    <path d="M2 12l10 5 10-5"></path>
                                </svg>
                            </div>
                            <h3 class="h4 fw-light text-white-90 mb-2">Coming Soon</h3>
                            <p class="text-white-50 fw-light">AI-powered portfolio analysis is under development.</p>
                        </div>
                    </div>
                </div>

                <div class="module-content" id="module-bonds">
                    <!-- 1. Overview Section -->
                    <div id="bonds-section-overview" class="bonds-section active">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Portfolio Overview</h2>
                            <p class="text-white-50 fw-light">Capital stability and fixed income performance</p>
                        </div>

                        <!-- Main Chart Container -->
                        <div class="glass-panel p-4 mb-4" style="min-height: 400px;">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <div>
                                    <h3 class="h5 fw-light mb-1">Fixed Income Trend</h3>
                                    <p class="text-white-50 small mb-0">Projected monthly coupon payments</p>
                                </div>
                                <button class="btn btn-sm btn-icon-glass text-white-50">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="12" y1="16" x2="12" y2="12"></line>
                                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                                    </svg>
                                </button>
                            </div>
                            <!-- Reserved for Chart -->
                            <div id="bonds-trend-chart" style="height: 300px; width: 100%;"></div>
                        </div>

                        <!-- Metrics Row -->
                        <div class="row g-4">
                            <!-- Metric 1 -->
                            <div class="col-md-3">
                                <div class="glass-card p-4 h-100">
                                    <div class="d-flex align-items-center gap-2 mb-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-white-50">
                                            <rect width="20" height="14" x="2" y="5" rx="2" />
                                            <line x1="2" x2="22" y1="10" y2="10" />
                                        </svg>
                                        <span class="text-white-50 small text-uppercase spacing-1">Total Bond
                                            Value</span>
                                    </div>
                                    <h3 class="h4 fw-light mb-1 text-white">--</h3>
                                    <p class="small text-white-50">Current Market Value</p>
                                </div>
                            </div>
                            <!-- Metric 2 -->
                            <div class="col-md-3">
                                <div class="glass-card p-4 h-100">
                                    <div class="d-flex align-items-center gap-2 mb-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-white-50">
                                            <rect width="18" height="18" x="3" y="4" rx="2" ry="2" />
                                            <line x1="16" x2="16" y1="2" y2="6" />
                                            <line x1="8" x2="8" y1="2" y2="6" />
                                            <line x1="3" x2="21" y1="10" y2="10" />
                                        </svg>
                                        <span class="text-white-50 small text-uppercase spacing-1">Annual Fixed
                                            Income</span>
                                    </div>
                                    <h3 class="h4 fw-light mb-1 text-white">--</h3>
                                    <p class="small text-white-50">Projected Interest</p>
                                </div>
                            </div>
                            <!-- Metric 3 -->
                            <div class="col-md-3">
                                <div class="glass-card p-4 h-100">
                                    <div class="d-flex align-items-center gap-2 mb-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-white-50">
                                            <polyline points="22 7 13.5 15.5 8.5 10.5 2 17" />
                                            <polyline points="16 7 22 7 22 13" />
                                        </svg>
                                        <span class="text-white-50 small text-uppercase spacing-1">Average Yield</span>
                                    </div>
                                    <h3 class="h4 fw-light mb-1 text-white">--</h3>
                                    <p class="small text-white-50">Yield to Maturity</p>
                                </div>
                            </div>
                            <!-- Metric 4 -->
                            <div class="col-md-3">
                                <div class="glass-card p-4 h-100">
                                    <div class="d-flex align-items-center gap-2 mb-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-white-50">
                                            <circle cx="12" cy="12" r="10" />
                                            <polyline points="12 6 12 12 16 14" />
                                        </svg>
                                        <span class="text-white-50 small text-uppercase spacing-1">Next Maturity</span>
                                    </div>
                                    <h3 class="h4 fw-light mb-1 text-white">--</h3>
                                    <p class="small text-white-50">Upcoming Date</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="module-content" id="module-business">
                    <div class="glass-card glass-empty-state">
                        <div class="glass-empty-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                stroke-linejoin="round" class="text-white-80">
                                <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                                <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                            </svg>
                        </div>
                        <h3 class="h4 fw-light text-white-90 mb-2">Business Holdings</h3>
                        <p class="text-white-50 fw-light">Business venture tracking is under development.</p>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Property Modal -->
    <div id="property-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1050; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" style="pointer-events: auto;"
            onclick="closePropertyModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 600px; padding: 1rem;">
            <div class="glass-card position-relative" id="modal-content-container"
                style="max-height: 90vh; overflow-y: auto;">
                <button onclick="closePropertyModal()"
                    class="position-absolute top-0 end-0 m-4 text-white-50 hover-text-white">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
                <div id="modal-content"></div>
            </div>
        </div>
    </div>

    <script src="js/dashboard.js?v=55"></script>
    <script src="js/shares-module.js"></script>


    <!-- Add Property Modal -->
    <div id="add-property-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1060; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" style="pointer-events: auto;"
            onclick="closeAddPropertyModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 600px; padding: 1rem;">
            <div class="glass-card position-relative p-0 overflow-hidden" style="border-radius: 1.5rem;">
                <!-- Header -->
                <div
                    class="p-4 border-bottom border-white border-opacity-10 d-flex justify-content-between align-items-center">
                    <div>
                        <h2 class="h4 fw-light text-white-90 mb-1">Add New Property</h2>
                        <p class="small text-white-50 mb-0">Enter property details to add to your portfolio
                        </p>
                    </div>
                    <button onclick="closeAddPropertyModal()"
                        class="btn btn-sm glass-button rounded-circle p-2 d-flex align-items-center justify-content-center"
                        style="width: 32px; height: 32px;">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Form -->
                <div class="p-4">
                    <form id="addPropertyForm" onsubmit="submitAddProperty(event)">
                        <!-- Name -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Property Name *</label>
                            <input type="text" id="propName" class="form-control glass-input text-white fw-light"
                                placeholder="e.g., Sunset Villa" required autocomplete="off"
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                        </div>

                        <!-- Type -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Type of Property *</label>
                            <select id="propType" class="form-select glass-input text-white fw-light" required
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                <option value="Residential" class="text-dark">Residential</option>
                                <option value="Commercial" class="text-dark">Commercial</option>
                                <option value="Land" class="text-dark">Land</option>
                                <option value="Industrial" class="text-dark">Industrial</option>
                                <option value="Vacation" class="text-dark">Vacation Rental</option>
                            </select>
                        </div>

                        <!-- Address -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Address *</label>
                            <input type="text" id="propAddress" class="form-control glass-input text-white fw-light"
                                placeholder="e.g., Mumbai, Maharashtra" required autocomplete="off"
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                        </div>

                        <!-- Prices -->
                        <div class="row g-3 mb-3">
                            <div class="col-6">
                                <label class="form-label small text-uppercase text-white-50"
                                    style="letter-spacing: 0.1em; font-size: 0.7rem;">Purchase Price (â‚¹)
                                    *</label>
                                <input type="number" id="propPurchasePrice"
                                    class="form-control glass-input text-white fw-light" placeholder="0" required
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                            </div>
                            <div class="col-6">
                                <label class="form-label small text-uppercase text-white-50"
                                    style="letter-spacing: 0.1em; font-size: 0.7rem;">Current Price (â‚¹)
                                    *</label>
                                <input type="number" id="propCurrentPrice"
                                    class="form-control glass-input text-white fw-light" placeholder="0" required
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                            </div>
                        </div>

                        <!-- Coords -->
                        <div class="row g-3 mb-4">
                            <div class="col-6">
                                <label class="form-label small text-uppercase text-white-50"
                                    style="letter-spacing: 0.1em; font-size: 0.7rem;">Longitude</label>
                                <input type="number" step="any" id="propLng"
                                    class="form-control glass-input text-white fw-light" placeholder="0.0000"
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                            </div>
                            <div class="col-6">
                                <label class="form-label small text-uppercase text-white-50"
                                    style="letter-spacing: 0.1em; font-size: 0.7rem;">Latitude</label>
                                <input type="number" step="any" id="propLat"
                                    class="form-control glass-input text-white fw-light" placeholder="0.0000"
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="d-flex gap-3">
                            <button type="button" onclick="closeAddPropertyModal()"
                                class="btn w-50 py-2 rounded-3 border border-white border-opacity-10 text-white-50 hover-text-white hover-bg-white hover-bg-opacity-10 transition-colors">Cancel</button>
                            <button type="submit"
                                class="btn w-50 py-2 rounded-3 glass-button text-white border border-white border-opacity-20 hover-bg-opacity-20 transition-colors">Add
                                Property</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Crypto Modal -->
    <div id="add-crypto-modal" class="position-fixed top-0 start-0 w-100 h-100" style="z-index: 1055; display: none;">
        <div class="position-absolute w-100 h-100"
            style="background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(10px); pointer-events: auto;"
            onclick="closeAddCryptoModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 580px; padding: 1rem;">
            <div class="modal-glass position-relative">
                <!-- Header -->
                <div class="p-4 d-flex justify-content-between align-items-start">
                    <div>
                        <h2 class="h4 fw-light text-white mb-1" style="letter-spacing: -0.01em;">Add New Crypto</h2>
                        <p class="small mb-0" style="color: rgba(255, 255, 255, 0.45);">Search and add cryptocurrency to
                            your portfolio</p>
                    </div>
                    <button onclick="closeAddCryptoModal()" class="modal-close-btn" type="button">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Form -->
                <form id="addCryptoForm" onsubmit="submitAddCrypto(event)" class="px-4 pb-4">
                    <!-- Search Cryptocurrency -->
                    <div class="mb-4 position-relative">
                        <label class="modal-label">Search Cryptocurrency</label>
                        <div class="search-input-wrapper">
                            <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                stroke-width="1.5">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            <input type="text" id="cryptoSearch" class="form-control modal-glass-input w-100"
                                placeholder="Bitcoin, Ethereum, Solana..." autocomplete="off"
                                oninput="handleCryptoSearch(this.value)">
                            <div id="cryptoSearchSpinner" class="position-absolute d-none"
                                style="right: 1rem; top: 50%; transform: translateY(-50%);">
                                <div class="spinner-border spinner-border-sm" role="status"
                                    style="width: 14px; height: 14px; color: rgba(255,255,255,0.4);"></div>
                            </div>
                        </div>
                        <!-- Search Results Dropdown -->
                        <div id="cryptoSearchResults"
                            class="position-absolute w-100 mt-2 rounded-3 overflow-hidden d-none"
                            style="background: rgba(18, 18, 18, 0.98); border: 1px solid rgba(255,255,255,0.08); max-height: 280px; overflow-y: auto; z-index: 100;">
                            <!-- Results injected by JS -->
                        </div>
                    </div>

                    <!-- Symbol and Name -->
                    <div class="row g-3 mb-4">
                        <div class="col-4">
                            <label class="modal-label">Symbol <span class="text-danger">*</span></label>
                            <input type="text" id="cryptoSymbol" class="form-control modal-glass-input"
                                placeholder="BTC, ETH, SOL," required>
                        </div>
                        <div class="col-8">
                            <label class="modal-label">Name <span class="text-danger">*</span></label>
                            <input type="text" id="cryptoName" class="form-control modal-glass-input"
                                placeholder="Bitcoin, Ethereum" required>
                        </div>
                    </div>

                    <!-- Network -->
                    <div class="mb-4">
                        <label class="modal-label">Network <span class="text-danger">*</span></label>
                        <input type="hidden" id="cryptoNetwork" required>
                        <div class="d-flex flex-wrap gap-2" id="cryptoNetworkOptions">
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Bitcoin', this)">Bitcoin</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Ethereum', this)">Ethereum</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Solana', this)">Solana</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Cardano', this)">Cardano</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Polkadot', this)">Polkadot</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Avalanche', this)">Avalanche</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Polygon', this)">Polygon</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Binance Smart Chain', this)">BSC</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Arbitrum', this)">Arbitrum</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Optimism', this)">Optimism</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Base', this)">Base</button>
                        </div>
                    </div>

                    <!-- Quantity and Prices -->
                    <div class="row g-3 mb-4">
                        <div class="col-4">
                            <label class="modal-label">Quantity <span class="text-danger">*</span></label>
                            <input type="number" id="cryptoQuantity" class="form-control modal-glass-input"
                                placeholder="1.5" step="any" min="0.00000001" required>
                        </div>
                        <div class="col-4">
                            <label class="modal-label">Avg Buy Price (â‚¹) <span class="text-danger">*</span></label>
                            <input type="number" id="cryptoAvgPrice" class="form-control modal-glass-input"
                                placeholder="3500000" step="0.01" min="0" required>
                        </div>
                        <div class="col-4">
                            <label class="modal-label">Live Price (â‚¹) <span class="text-danger">*</span></label>
                            <div class="d-flex align-items-center gap-2">
                                <input type="number" id="cryptoCurrentPrice"
                                    class="form-control modal-glass-input flex-1" placeholder="3850000" step="0.01"
                                    min="0" required>
                                <button type="button" onclick="refreshCryptoPrice()"
                                    class="btn btn-sm p-2 rounded-circle"
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);"
                                    title="Refresh Price">
                                    <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                                    </svg>
                                </button>
                            </div>
                            <div id="priceUpdateTime" class="small text-white-30 mt-1"></div>
                        </div>
                    </div>

                    <!-- Calculated Fields (Read-Only Display) -->
                    <div class="p-3 rounded-3 mb-4"
                        style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);">
                        <div class="row g-3">
                            <div class="col-6">
                                <label class="modal-label text-white-40">Total Investment</label>
                                <div id="totalInvestment" class="h5 fw-light text-white-90 mb-0">â‚¹0.00</div>
                            </div>
                            <div class="col-6">
                                <label class="modal-label text-white-40">Current Value</label>
                                <div id="currentValue" class="h5 fw-light text-white-90 mb-0">â‚¹0.00</div>
                            </div>
                            <div class="col-6">
                                <label class="modal-label text-white-40">Profit/Loss</label>
                                <div id="profitLoss" class="h5 fw-light mb-0">â‚¹0.00</div>
                            </div>
                            <div class="col-6">
                                <label class="modal-label text-white-40">Profit/Loss %</label>
                                <div id="profitLossPercent" class="h5 fw-light mb-0">0.00%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="d-flex gap-3 pt-2">
                        <button type="button" onclick="closeAddCryptoModal()"
                            class="modal-btn-secondary flex-1 w-50">Cancel</button>
                        <button type="submit"
                            class="modal-btn-primary flex-1 w-50 d-flex align-items-center justify-content-center gap-2">
                            <span>+</span> Add to Portfolio
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="rent-property-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1060; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" onclick="closeRentModal()"></div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 700px; padding: 1rem;">
            <div class="glass-card position-relative" style="border-radius: 1.5rem; overflow: hidden;">
                <!-- Header -->
                <div
                    class="p-4 border-bottom border-white border-opacity-10 d-flex justify-content-between align-items-center">
                    <div>
                        <h2 class="h4 fw-light text-white-90 mb-1">Rent Property</h2>
                        <p class="small text-white-50 mb-0" id="rent-modal-property-name"></p>
                    </div>
                    <button onclick="closeRentModal()"
                        class="btn btn-sm glass-button rounded-circle p-2 d-flex align-items-center justify-content-center"
                        style="width: 32px; height: 32px;">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Form Container -->
                <div class="p-4">
                    <!-- Step 1: Form -->
                    <div id="rent-step-1">
                        <form id="rentPropertyForm" onsubmit="handleRentStep1(event)">
                            <div class="row g-3 mb-3">
                                <!-- Rent Type -->
                                <div class="col-6">
                                    <label class="form-label small text-uppercase text-white-50"
                                        style="letter-spacing: 0.1em; font-size: 0.7rem;">Rent Type
                                        *</label>
                                    <div class="d-flex gap-2 p-1 rounded-3" style="background: rgba(255,255,255,0.05);">
                                        <button type="button" onclick="setRentType('Monthly')"
                                            class="rent-type-btn flex-1 btn py-2 text-white-50 rounded-3 transition-all active"
                                            data-type="Monthly">Monthly</button>
                                        <button type="button" onclick="setRentType('Yearly')"
                                            class="rent-type-btn flex-1 btn py-2 text-white-50 rounded-3 transition-all"
                                            data-type="Yearly">Yearly</button>
                                    </div>
                                    <input type="hidden" id="rentType" value="Monthly" required>
                                </div>

                                <!-- Rent Amount -->
                                <div class="col-6">
                                    <label class="form-label small text-uppercase text-white-50"
                                        style="letter-spacing: 0.1em; font-size: 0.7rem;">Rent Amount (â‚¹)
                                        *</label>
                                    <input type="number" id="rentAmount"
                                        class="form-control glass-input text-white fw-light" placeholder="50000"
                                        required
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>

                                <!-- Start Date -->
                                <div class="col-6">
                                    <label class="form-label small text-uppercase text-white-50"
                                        style="letter-spacing: 0.1em; font-size: 0.7rem;">Start Date
                                        *</label>
                                    <input type="date" id="rentStartDate"
                                        class="form-control glass-input text-white fw-light" required
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>

                                <!-- Security Deposit -->
                                <div class="col-6">
                                    <label class="form-label small text-uppercase text-white-50"
                                        style="letter-spacing: 0.1em; font-size: 0.7rem;">Security Deposit
                                        (â‚¹)</label>
                                    <input type="number" id="securityDeposit"
                                        class="form-control glass-input text-white fw-light" placeholder="100000"
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>

                                <!-- Tenant Type -->
                                <div class="col-12">
                                    <label class="form-label small text-uppercase text-white-50"
                                        style="letter-spacing: 0.1em; font-size: 0.7rem;">Tenant
                                        Type</label>
                                    <input type="text" id="tenantType"
                                        class="form-control glass-input text-white fw-light" placeholder="Individual"
                                        value="Individual"
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="d-flex gap-3">
                                <button type="button" id="cancelRentBtn" onclick="cancelRentProperty()"
                                    class="d-none btn flex-1 py-3 rounded-3 border border-danger border-opacity-20 text-danger text-opacity-80 hover-bg-danger hover-bg-opacity-10 transition-all">
                                    Cancel Rent
                                </button>
                                <button type="submit" id="rentSubmitBtn"
                                    class="btn flex-2 py-3 rounded-3 glass-button text-white border border-white border-opacity-20 hover-bg-opacity-20 transition-all">
                                    <span class="d-flex align-items-center justify-content-center gap-2">
                                        <span id="rentSubmitText">Analyze Impact</span>
                                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                            <path
                                                d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                                        </svg>
                                    </span>
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Step 2: Impact Analysis -->
                    <div id="rent-step-2" style="display: none;">
                        <!-- AI Insight Box -->
                        <div class="p-4 rounded-4 mb-4 position-relative overflow-hidden"
                            style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1)); border: 1px solid rgba(59, 130, 246, 0.2);">
                            <div class="position-absolute top-0 start-0 w-100 h-100"
                                style="background: rgba(59, 130, 246, 0.05); backdrop-filter: blur(2px);">
                            </div>
                            <div class="position-relative">
                                <div class="d-flex gap-3 mb-4">
                                    <div class="p-2 rounded-3"
                                        style="background: rgba(59, 130, 246, 0.2); color: rgb(96, 165, 250);">
                                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                            <path
                                                d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="h6 fw-light text-white-90 mb-1">Portfolio Impact Analysis
                                        </h3>
                                        <p class="small fw-light text-white-60 mb-0" id="impact-description"></p>
                                    </div>
                                </div>

                                <div class="row g-3 pt-3 border-top border-white border-opacity-10">
                                    <div class="col-4">
                                        <div class="small text-uppercase text-white-50 mb-1"
                                            style="font-size: 0.65rem; letter-spacing: 0.1em;">Rental Yield
                                        </div>
                                        <div class="h5 fw-light" style="color: rgb(74, 222, 128);" id="rental-yield">0%
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="small text-uppercase text-white-50 mb-1"
                                            style="font-size: 0.65rem; letter-spacing: 0.1em;">Annual Income
                                        </div>
                                        <div class="h5 fw-light text-white-90" id="annual-income">â‚¹0</div>
                                    </div>
                                    <div class="col-4">
                                        <div class="small text-uppercase text-white-50 mb-1"
                                            style="font-size: 0.65rem; letter-spacing: 0.1em;">Monthly
                                            Cashflow
                                        </div>
                                        <div class="h5 fw-light text-white-90" id="monthly-cashflow">â‚¹0
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-flex gap-3">
                            <button onclick="backToRentStep1()"
                                class="btn flex-1 py-3 rounded-3 border border-white border-opacity-10 text-white-70 hover-bg-white hover-bg-opacity-5 transition-all">
                                Back to Edit
                            </button>
                            <button onclick="confirmRentProperty()"
                                class="btn flex-2 py-3 rounded-3 bg-white text-dark hover-scale-105 transition-all">
                                <span class="d-flex align-items-center justify-content-center gap-2">
                                    Confirm & Activate
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                                    </svg>
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sell Property Confirmation Modal -->
    <div id="sell-property-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1070; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" onclick="closeSellPropertyModal()"></div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 400px; padding: 1rem;">
            <div class="glass-card position-relative overflow-hidden p-0" style="border-radius: 1.5rem;">
                <div class="p-4 text-center">
                    <div class="mx-auto mb-3 p-3 rounded-circle d-flex align-items-center justify-content-center"
                        style="width: 64px; height: 64px; background: rgba(239, 68, 68, 0.1); color: #ef4444;">
                        <svg width="32" height="32" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">
                            </path>
                        </svg>
                    </div>
                    <h3 class="h5 text-white mb-2">Sell Property?</h3>
                    <p class="text-white-50 small mb-4">Are you sure you want to sell this property? This
                        action
                        will
                        remove it from your active portfolio and mark it as sold.</p>

                    <div class="d-flex gap-2">
                        <button onclick="closeSellPropertyModal()"
                            class="btn flex-1 py-2 rounded-3 border border-white border-opacity-10 text-white-70 hover-bg-white hover-bg-opacity-5 transition-all">
                            Cancel
                        </button>
                        <button onclick="confirmSellProperty()"
                            class="btn flex-1 py-2 rounded-3 text-white transition-all"
                            style="background: rgba(0,0,0,0.5); border: 1px solid rgba(239, 68, 68, 0.5); box-shadow: 0 0 15px rgba(239, 68, 68, 0.3);">
                            Confirm Sale
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Remove Property Confirmation Modal -->
    <div id="remove-property-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1080; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" onclick="closeRemovePropertyModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 400px; padding: 1rem;">
            <div class="glass-card position-relative overflow-hidden p-0" style="border-radius: 1.5rem;">
                <div class="p-4 text-center">
                    <div class="mx-auto mb-3 p-3 rounded-circle d-flex align-items-center justify-content-center"
                        style="width: 64px; height: 64px; background: rgba(239, 68, 68, 0.1); color: #ef4444;">
                        <svg width="32" height="32" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                            </path>
                        </svg>
                    </div>
                    <h3 class="h5 text-white mb-2">Remove Property?</h3>
                    <p class="text-white-50 small mb-4">Are you sure you want to remove this property? This
                        will
                        permanently delete it from your portfolio history.</p>

                    <div class="d-flex gap-2">
                        <button onclick="closeRemovePropertyModal()"
                            class="btn flex-1 py-2 rounded-3 border border-white border-opacity-10 text-white-70 hover-bg-white hover-bg-opacity-5 transition-all">
                            Cancel
                        </button>
                        <button onclick="confirmRemoveProperty()"
                            class="btn flex-1 py-2 rounded-3 text-white transition-all"
                            style="background: rgba(0,0,0,0.5); border: 1px solid rgba(239, 68, 68, 0.5); box-shadow: 0 0 15px rgba(239, 68, 68, 0.3);">
                            Remove
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cancel Rent Confirmation Modal -->
    <div id="cancel-rent-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1070; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" onclick="closeCancelRentModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 450px; padding: 1rem;">
            <div class="glass-card position-relative overflow-hidden p-0" style="border-radius: 1.5rem;">
                <div class="p-4 text-center">
                    <div class="mx-auto mb-3 p-3 rounded-circle d-flex align-items-center justify-content-center"
                        style="width: 64px; height: 64px; background: rgba(251, 191, 36, 0.1); color: #fbbf24;">
                        <svg width="32" height="32" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">
                            </path>
                        </svg>
                    </div>
                    <h3 class="h5 text-white mb-2">Stop Renting Property?</h3>
                    <p class="text-white-50 small mb-4">Are you sure you want to stop renting this property?
                        It will
                        be
                        moved to "Owned" status and all rental details will be removed.</p>

                    <div class="d-flex gap-2">
                        <button onclick="closeCancelRentModal()"
                            class="btn flex-1 py-2 rounded-3 border border-white border-opacity-10 text-white-70 hover-bg-white hover-bg-opacity-5 transition-all">
                            Keep Renting
                        </button>
                        <button onclick="confirmCancelRent()"
                            class="btn flex-1 py-2 rounded-3 text-white transition-all"
                            style="background: rgba(0,0,0,0.5); border: 1px solid rgba(251, 191, 36, 0.5); box-shadow: 0 0 15px rgba(251, 191, 36, 0.2);">
                            End Rental
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Document Modal -->
    <div id="upload-document-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1060; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" onclick="closeUploadDocumentModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 500px; padding: 1rem;">
            <div class="glass-card position-relative p-0 overflow-hidden" style="border-radius: 1.5rem;">
                <!-- Header -->
                <div
                    class="p-4 border-bottom border-white border-opacity-10 d-flex justify-content-between align-items-center">
                    <div>
                        <h2 class="h4 fw-light text-white-90 mb-0">Upload Document</h2>
                    </div>
                    <button onclick="closeUploadDocumentModal()"
                        class="btn btn-sm glass-button rounded-circle p-2 d-flex align-items-center justify-content-center"
                        style="width: 32px; height: 32px;">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Form -->
                <div class="p-4">
                    <form id="uploadDocumentForm" onsubmit="submitUploadDocument(event)">
                        <!-- Property Selection -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Property</label>
                            <select id="docProperty" class="form-select glass-input text-white fw-light" required
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                <option value="" class="text-dark">Select a property...</option>
                            </select>
                        </div>

                        <!-- Document Type -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Document Type</label>
                            <select id="docType" class="form-select glass-input text-white fw-light" required
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                <option value="" class="text-dark">Select document type...</option>
                                <option value="Deed" class="text-dark">Deed</option>
                                <option value="Valuation Report" class="text-dark">Valuation Report</option>
                                <option value="Tax Document" class="text-dark">Tax Document</option>
                                <option value="Insurance" class="text-dark">Insurance</option>
                                <option value="Inspection Report" class="text-dark">Inspection Report
                                </option>
                                <option value="Other" class="text-dark">Other</option>
                            </select>
                        </div>

                        <!-- File Upload -->
                        <div class="mb-4">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">File</label>
                            <div class="p-4 rounded-3 text-center position-relative"
                                style="background: rgba(255,255,255,0.03); border: 2px dashed rgba(255,255,255,0.2); cursor: pointer;"
                                onclick="document.getElementById('docFile').click()">
                                <div class="mb-2">
                                    <svg width="48" height="48" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                        class="mx-auto" style="opacity: 0.5;">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                            d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12">
                                        </path>
                                    </svg>
                                </div>
                                <p class="text-white-70 mb-1">Drag & drop or click to browse</p>
                                <p class="small text-white-50 mb-0" style="font-size: 0.7rem;">PDF, PNG,
                                    JPG, TXT,
                                    DOC,
                                    DOCX (Max 10MB)</p>
                                <input type="file" id="docFile" class="d-none" required
                                    accept=".pdf,.png,.jpg,.jpeg,.txt,.doc,.docx" onchange="updateFileName(this)">
                                <p id="fileName" class="small text-white-90 mt-2 mb-0"></p>
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="d-flex gap-3">
                            <button type="button" onclick="closeUploadDocumentModal()"
                                class="btn w-50 py-2 rounded-3 border border-white border-opacity-10 text-white-50 hover-text-white hover-bg-white hover-bg-opacity-10 transition-colors">Cancel</button>
                            <button type="submit"
                                class="btn w-50 py-2 rounded-3 glass-button text-white border border-white border-opacity-20 hover-bg-opacity-20 transition-colors">Upload</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Document Preview Modal -->
    <div id="document-preview-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1080; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-90" onclick="closeDocumentPreview()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100 h-100 d-flex flex-column"
            style="max-width: 900px; max-height: 90vh; padding: 1rem;">
            <div class="glass-card position-relative p-0 overflow-hidden d-flex flex-column h-100"
                style="border-radius: 1.5rem;">
                <!-- Header -->
                <div
                    class="p-3 border-bottom border-white border-opacity-10 d-flex justify-content-between align-items-center flex-shrink-0">
                    <div class="d-flex align-items-center gap-3">
                        <h4 id="preview-doc-name" class="h5 fw-light text-white-90 mb-0 text-truncate"
                            style="max-width: 400px;">Document Preview</h4>
                    </div>
                    <div class="d-flex gap-2">
                        <button id="preview-download-btn" onclick="downloadCurrentDocument()"
                            class="btn btn-sm glass-button rounded-pill px-3 py-1 d-flex align-items-center gap-2">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4">
                                </path>
                            </svg>
                            Download
                        </button>
                        <button onclick="closeDocumentPreview()"
                            class="btn btn-sm glass-button rounded-circle p-2 d-flex align-items-center justify-content-center"
                            style="width: 32px; height: 32px;">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Preview Content -->
                <div id="preview-content" class="flex-grow-1 overflow-auto p-3" style="background: rgba(0,0,0,0.3);">
                    <!-- Content injected by JS -->
                    <div class="h-100 d-flex align-items-center justify-content-center">
                        <div class="spinner-border text-white-50" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== SHARES MODALS ========== -->

    <!-- Add Share Modal -->
    <div id="add-share-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 9999; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); display: none;">
        <div class="d-flex align-items-center justify-content-center h-100 p-4">
            <div class="p-4"
                style="max-width: 672px; width: 100%; max-height: 90vh; overflow-y: auto; border-radius: 24px; border: 1px solid rgba(255, 255, 255, 0.1); background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); box-shadow: inset 0 0 20px 0 rgba(255, 255, 255, 0.02), 0 0 50px 0 rgba(255, 255, 255, 0.05);">
                <div class="d-flex justify-content-between align-items-start mb-4">
                    <div>
                        <h3 class="h4 fw-light text-white mb-2">Add New Share</h3>
                        <p class="small text-white-50 mb-0">Select sector, search stock, and enter details</p>
                    </div>
                    <button onclick="closeAddShareModal()" class="btn-close btn-close-white"
                        aria-label="Close"></button>
                </div>

                <form id="add-share-form" onsubmit="submitAddShare(event)">
                    <!-- Step 1: Select Sector -->
                    <div class="mb-4">
                        <label class="d-block text-white fw-normal mb-2 small text-white-90"
                            style="font-size: 0.875rem;">
                            <span class="text-white-90 fw-medium">Step 1:</span> Select Sector <span
                                class="text-danger">*</span>
                        </label>
                        <select id="share-sector-select" class="form-select glass-input shadow-none py-3"
                            style="width: 100%; padding: 12px 16px; border-radius: 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; outline: none;"
                            onchange="onSectorChange()" required>
                            onchange="onSectorChange()" required>
                            <option value="">Select sector first...</option>

                            <!-- GICS Sectors -->
                            <option value="Communication Services">Communication Services</option>
                            <option value="Consumer Discretionary">Consumer Discretionary</option>
                            <option value="Consumer Staples">Consumer Staples</option>
                            <option value="Energy">Energy</option>
                            <option value="Financials">Financials</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="Industrials">Industrials</option>
                            <option value="Information Technology">Information Technology</option>
                            <option value="Materials">Materials</option>
                            <option value="Real Estate">Real Estate</option>
                            <option value="Utilities">Utilities</option>

                            <!-- Detailed Industries -->
                            <option value="Aerospace & Defense">Aerospace & Defense</option>
                            <option value="Automobiles & Components">Automobiles & Components</option>
                            <option value="Banks">Banks</option>
                            <option value="Biotechnology">Biotechnology</option>
                            <option value="Capital Goods">Capital Goods</option>
                            <option value="Commercial Services">Commercial Services</option>
                            <option value="Consumer Durables">Consumer Durables</option>
                            <option value="Food & Beverages">Food & Beverages</option>
                            <option value="Insurance">Insurance</option>
                            <option value="Media & Entertainment">Media & Entertainment</option>
                            <option value="Pharmaceuticals">Pharmaceuticals</option>
                            <option value="Retail">Retail</option>
                            <option value="Semiconductors">Semiconductors</option>
                            <option value="Software & Services">Software & Services</option>
                            <option value="Telecommunication Services">Telecommunication Services</option>
                            <option value="Transportation">Transportation</option>
                            <option value="ETF/Index Fund">ETF/Index Fund</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <!-- Step 2: Search Stock -->
                    <div class="mb-4">
                        <label class="d-block text-white fw-normal mb-2 small text-white-90" style="font-size: 0.9rem;">
                            Step 2: Search Stock <span class="text-danger">*</span>
                            <span id="sector-hint" class="text-white-40 ms-2 text-danger"
                                style="font-size: 0.8rem; font-weight: 300;">(Select sector first)</span>
                        </label>
                        <div class="position-relative">
                            <i class="position-absolute top-50 translate-middle-y text-white-50"
                                style="left: 16px; z-index: 10;">
                                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                </svg>
                            </i>
                            <input type="text" id="share-search-input" class="form-control glass-input shadow-none py-3"
                                placeholder="Select a sector first"
                                style="width: 100%; padding-top: 12px; padding-bottom: 12px; padding-right: 16px; padding-left: 48px !important; border-radius: 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; outline: none; transition: border-color 0.2s;"
                                oninput="handleShareSearch(event)" autocomplete="off" disabled>

                            <div id="share-search-results" class="position-relative w-100 mt-2 rounded-3 hidden"
                                style="background: #0a0a0a; border: 1px solid rgba(255,255,255,0.1); max-height: 200px; overflow-y: auto; z-index: 1000; box-shadow: 0 4px 20px rgba(0,0,0,0.5);">
                            </div>
                        </div>
                    </div>

                    <!-- Hidden inputs for selected stock -->
                    <input type="hidden" id="selected-share-symbol" required>
                    <input type="hidden" id="selected-share-name" required>
                    <input type="hidden" id="selected-share-sector">

                    <!-- Step 3: Enter Details -->
                    <div class="mb-4">
                        <label class="d-block text-white fw-normal mb-3 small text-white-90"
                            style="font-size: 0.9rem;">Step 3: Enter Details</label>
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label class="form-label small text-white-50 mb-1" style="font-size: 0.75rem;">
                                    Quantity <span class="text-danger">*</span>
                                </label>
                                <input type="number" id="share-quantity" class="form-control glass-input py-3"
                                    placeholder="100" min="1" step="1" required
                                    style="width: 100%; padding: 12px 16px; border-radius: 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; outline: none; transition: border-color 0.2s;"
                                    oninput="updateShareCalculations()">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label small text-white-50 mb-1" style="font-size: 0.75rem;">
                                    Avg Buy Price (â‚¹) <span class="text-danger">*</span>
                                </label>
                                <input type="number" id="share-avg-price" class="form-control glass-input py-3"
                                    placeholder="1500" min="0.01" step="0.01" required
                                    style="width: 100%; padding: 12px 16px; border-radius: 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; outline: none; transition: border-color 0.2s;"
                                    oninput="updateShareCalculations()">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label small text-white-50 mb-1" style="font-size: 0.75rem;">
                                    Current Price (â‚¹) <span class="text-danger">*</span>
                                </label>
                                <div class="position-relative">
                                    <input type="number" id="share-current-price" class="form-control glass-input py-3"
                                        placeholder="1750" min="0.01" step="0.01" required readonly
                                        oninput="updateShareCalculations()"
                                        style="width: 100%; padding: 12px 16px; border-radius: 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; outline: none; transition: border-color 0.2s;">
                                    <div id="price-loading"
                                        class="position-absolute end-0 top-50 translate-middle-y me-3 hidden">
                                        <div class="spinner-border spinner-border-sm text-white-50" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Calculated Fields (Hidden until Quantity > 0) -->
                    <div id="share-calculation-box" class="p-4 mb-4 hidden"
                        style="border-radius: 16px; border: 1px solid rgba(255, 255, 255, 0.05); background: rgba(255, 255, 255, 0.02); padding: 16px;">
                        <h3 class="text-white-60 mb-3" style="font-size: 0.875rem; color: rgba(255,255,255,0.6);">
                            Preview Calculations</h3>
                        <div class="row g-4">
                            <div class="col-6">
                                <label class="d-block text-white-40 small mb-1" style="font-size: 0.7rem;">Total
                                    Invested</label>
                                <div id="shareTotalInvestment" class="h4 fw-light text-white mb-0">â‚¹0.00</div>
                            </div>
                            <div class="col-6">
                                <label class="d-block text-white-40 small mb-1" style="font-size: 0.7rem;">Current
                                    Value</label>
                                <div id="shareCurrentValue" class="h4 fw-light text-white mb-0">â‚¹0.00</div>
                            </div>
                            <div class="col-6">
                                <label class="d-block text-white-40 small mb-1"
                                    style="font-size: 0.7rem;">Gain/Loss</label>
                                <div id="shareProfitLoss" class="h4 fw-light mb-0">â‚¹0.00</div>
                            </div>
                            <div class="col-6">
                                <label class="d-block text-white-40 small mb-1" style="font-size: 0.7rem;">Return
                                    %</label>
                                <div id="shareProfitLossPercent" class="h4 fw-light mb-0">0.00%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <!-- Action Buttons -->
                    <div class="d-flex gap-3 mt-4">
                        <button type="button" onclick="closeAddShareModal()" class="btn flex-fill py-3"
                            style="flex: 1; padding: 12px 24px; border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.6); background: transparent;">
                            Cancel
                        </button>
                        <button type="submit" id="add-share-btn" class="btn flex-fill py-3"
                            style="flex: 1; padding: 12px 24px; border-radius: 12px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: white; display: flex; align-items: center; justify-content: center; gap: 8px;">
                            <span>+</span> Add Share
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Sell Share Modal -->
    <div id="sell-share-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 9999; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); display: none;">
        <div class="d-flex align-items-center justify-content-center h-100 p-4">
            <div class="glass-card rounded-4 p-5" style="max-width: 500px; width: 100%;">
                <div class="d-flex justify-content-between align-items-start mb-4">
                    <div>
                        <h3 class="h4 fw-light text-white mb-2">Sell Share</h3>
                        <p class="small text-white-50 mb-0">Record your share sale</p>
                    </div>
                    <button onclick="closeSellShareModal()" class="btn-close btn-close-white"
                        aria-label="Close"></button>
                </div>

                <form id="sell-share-form" onsubmit="submitSellShare(event)">
                    <input type="hidden" id="sell-share-id">

                    <div class="mb-3">
                        <div class="text-white-70 small mb-2">Asset</div>
                        <div class="text-white fw-medium" id="sell-share-name"></div>
                    </div>

                    <div class="mb-4">
                        <label class="form-label small text-uppercase text-white-50"
                            style="letter-spacing: 0.1em; font-size: 0.7rem;">
                            Sale Price per Share (â‚¹)
                        </label>
                        <input type="number" id="sell-share-price" class="form-control glass-input" placeholder="2000"
                            min="0.01" step="0.01" required>
                    </div>

                    <div class="mb-4">
                        <label class="form-label small text-uppercase text-white-50"
                            style="letter-spacing: 0.1em; font-size: 0.7rem;">
                            Sale Date
                        </label>
                        <input type="date" id="sell-share-date" class="form-control glass-input" required>
                    </div>

                    <div class="glass-card p-3 mb-4" id="sell-preview">
                        <div class="small text-white-50 mb-2">Sale Summary</div>
                        <div class="d-flex justify-content-between mb-2">
                            <span class="text-white-50 small">Quantity:</span>
                            <span class="text-white small" id="sell-quantity">0</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span class="text-white-50 small">Total Sale Value:</span>
                            <span class="text-white small" id="sell-total-value">â‚¹0</span>
                        </div>
                        <div class="d-flex justify-content-between pt-2 border-top"
                            style="border-color: rgba(255,255,255,0.1) !important;">
                            <span class="text-white-70">Profit/Loss:</span>
                            <span class="fw-medium" id="sell-profit-loss">â‚¹0</span>
                        </div>
                    </div>

                    <div class="d-flex gap-3">
                        <button type="button" onclick="closeSellShareModal()"
                            class="btn glass-button flex-fill">Cancel</button>
                        <button type="submit" class="btn flex-fill"
                            style="background: rgba(22, 101, 52, 0.4); border: 1px solid rgba(74, 222, 128, 0.2); color: #4ade80; transition: all 0.2s ease;"
                            onmouseover="this.style.background='rgba(22, 101, 52, 0.6)'; this.style.color='#86efac'"
                            onmouseout="this.style.background='rgba(22, 101, 52, 0.4)'; this.style.color='#4ade80'">
                            Confirm Sale
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Remove Share Confirmation Modal -->
    <div id="remove-share-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 9999; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); display: none;">
        <div class="d-flex align-items-center justify-content-center h-100 p-4">
            <div class="glass-card rounded-4 p-5" style="max-width: 400px; width: 100%;">
                <h3 class="h5 fw-light text-white mb-3">Remove Share?</h3>
                <p class="text-white-70 mb-4">Are you sure you want to remove <span id="remove-share-name"
                        class="text-white fw-medium"></span> from your portfolio? This action cannot be undone.</p>

                <input type="hidden" id="remove-share-id">

                <div class="d-flex gap-3">
                    <button type="button" onclick="closeRemoveShareModal()"
                        class="btn glass-button flex-fill">Cancel</button>
                    <button type="button" onclick="confirmRemoveShare()"
                        class="btn btn-danger flex-fill">Remove</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Inline Share Calculator Logic (Emergency Fix)
        window.updateShareCalculations = function () {
            console.log('Inline updateShareCalculations triggered');
            const quantity = parseFloat(document.getElementById('share-quantity').value) || 0;
            const avgPrice = parseFloat(document.getElementById('share-avg-price').value) || 0;
            const currentPrice = parseFloat(document.getElementById('share-current-price').value) || 0;

            const totalInvested = quantity * avgPrice;
            const currentValue = quantity * currentPrice;
            const profitLoss = currentValue - totalInvested;
            const profitLossPercent = totalInvested > 0 ? (profitLoss / totalInvested) * 100 : 0;

            // Toggle Visibility based on Quantity
            const container = document.getElementById('share-calculation-box');
            if (quantity > 0 && avgPrice > 0) {
                if (container) container.classList.remove('hidden');
            } else {
                if (container) container.classList.add('hidden');
            }

            // Update UI
            const totalInvEl = document.getElementById('shareTotalInvestment');
            if (totalInvEl) totalInvEl.textContent = `â‚¹${totalInvested.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;

            const currValEl = document.getElementById('shareCurrentValue');
            if (currValEl) currValEl.textContent = `â‚¹${currentValue.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;

            // Profit/Loss Styling
            const plElement = document.getElementById('shareProfitLoss');
            if (plElement) {
                plElement.textContent = `${profitLoss >= 0 ? '+' : ''}â‚¹${Math.abs(profitLoss).toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
                plElement.className = `h5 fw-light mb-0 ${profitLoss >= 0 ? 'text-success' : 'text-danger'}`;
            }

            // Percent Styling
            const plPercentElement = document.getElementById('shareProfitLossPercent');
            if (plPercentElement) {
                plPercentElement.textContent = `${profitLossPercent >= 0 ? '+' : ''}${profitLossPercent.toFixed(2)}%`;
                plPercentElement.className = `h5 fw-light mb-0 ${profitLossPercent >= 0 ? 'text-success' : 'text-danger'}`;
            }
        };
    </script>
</body>


</html>