<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aether | Dashboard</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>

    <!-- Fonts: Geist (exact match from old website) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Geist:wght@100;200;300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/style.css?v=87" rel="stylesheet">


    <style>
        /* ULTRA-PREMIUM INSTITUTIONAL TERMINAL ‚Äî BASE STYLING */
        body {
            font-family: "Inter", -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
            font-weight: 400;
            background: #050506;
            color: rgba(255, 255, 255, 0.92);
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            letter-spacing: -0.02em;
        }

        .hidden {
            display: none !important;
        }

        /* Vignette overlay */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            z-index: -2;
            background: radial-gradient(ellipse at center, transparent 40%, rgba(0, 0, 0, 0.5) 100%);
            pointer-events: none;
        }

        /* Grain texture */
        body::after {
            content: '';
            position: fixed;
            inset: 0;
            z-index: -1;
            opacity: 0.025;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
        }

        /* Main Container */
        .dashboard-container {
            display: flex;
            height: 100vh;
            position: relative;
            z-index: 1;
        }

        /* Sidebar Styling */
        .sidebar {
            width: 220px;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }

        /* SIDEBAR ‚Äî COMMAND CONSOLE */
        .sidebar-container {
            position: relative;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.5rem 0.75rem;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            height: 100%;
            box-shadow: inset 0 0 14px 0 rgba(255, 255, 255, 0.02), 0 0 32px 0 rgba(255, 255, 255, 0.04);
            overflow: hidden;
        }

        /* Vertical divider glow (right edge) */
        .sidebar-container::after {
            content: '';
            position: absolute;
            right: 0;
            top: 10%;
            height: 80%;
            width: 1px;
            background: linear-gradient(180deg, transparent 0%, rgba(255, 255, 255, 0.15) 50%, transparent 100%);
            pointer-events: none;
        }

        .sidebar-brand {
            font-family: "Inter", -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
            font-size: 0.85rem;
            font-weight: 300;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }

        .sidebar-menu {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.125rem;
        }

        .sidebar-item {
            position: relative;
            padding: 0.625rem 1rem;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.7rem;
            font-weight: 400;
            letter-spacing: 0.02em;
            line-height: 1;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .sidebar-item:hover {
            color: rgba(255, 255, 255, 0.85);
            background: rgba(255, 255, 255, 0.04);
        }

        /* Active sidebar item - Command Console style */
        .sidebar-item.active {
            color: rgba(255, 255, 255, 0.95);
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.03) 100%);
            border: 1px solid rgba(255, 255, 255, 0.25);
            box-shadow:
                inset 0 0 12px rgba(255, 255, 255, 0.08),
                0 0 16px rgba(255, 255, 255, 0.06);
        }

        /* Active indicator bar (left edge) */
        .sidebar-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 20%;
            height: 60%;
            width: 2px;
            background: #FFFFFF;
            border-radius: 0 2px 2px 0;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
        }

        .sidebar-item svg {
            width: 15px;
            height: 15px;
            opacity: 0.6;
            stroke-width: 2.5px;
        }

        .sidebar-item.active svg {
            opacity: 0.9;
            color: #FFFFFF;
        }

        .sidebar-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.06) 50%, transparent 100%);
            margin: 0.75rem 0.5rem;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        /* Top Bar */
        .top-bar {
            padding: 1.5rem 2.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 50;
            pointer-events: none;
            /* Let clicks pass through empty areas if needed, but child elements need pointer-events: auto */
        }

        .top-bar>* {
            pointer-events: auto;
        }

        /* Breadcrumb Glass Capsule - Recipe 2 */
        .breadcrumb-capsule {
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 0 14px 0 rgba(255, 255, 255, 0.02), 0 0 32px 0 rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 9999px;
            padding: 0 1.25rem;
            /* Horizontal padding, height controlled explicitly */
            display: flex;
            align-items: center;
            overflow: hidden;
            height: 36px;
            /* text-sm standard button height */
        }



        #breadcrumb {
            font-size: 0.85rem;
            /* Closer to text-sm */
            color: rgba(255, 255, 255, 0.6);
            font-weight: 300;
            letter-spacing: 0.05em;
            line-height: 1;
        }

        /* Module Tabs Wrapper */
        .module-tabs-wrapper {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        /* MODULE TABS ‚Äî INSTITUTIONAL TERMINAL */
        .module-tabs {
            position: relative;
            display: flex;
            gap: 0;
            padding: 0.25rem;
            /* Increased slightly */
            background: linear-gradient(180deg, rgba(18, 18, 22, 0.95) 0%, rgba(12, 12, 16, 0.98) 100%);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 9999px;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow:
                inset 0 1px 0 rgba(255, 255, 255, 0.04),
                0 4px 24px rgba(0, 0, 0, 0.4);
            overflow: hidden;
        }

        .module-tab {
            padding: 0.5rem 1.25rem;
            /* Wider padding */
            background: transparent;
            border: 1px solid transparent;
            border-radius: 9999px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.75rem;
            /* text-xs */
            font-weight: 300;
            /* Lighter weight */
            letter-spacing: 0.02em;
            line-height: 1rem;
            /* 16px line height for 32px total height */
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .module-tab:hover {
            color: rgba(255, 255, 255, 0.85);
            background: rgba(255, 255, 255, 0.04);
        }

        .module-tab.active {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            color: #fff;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        /* üîí USER SECTION ‚Äî LOCKED GLASS */
        .user-section {
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.10);
            box-shadow:
                inset 0 0 20px rgba(255, 255, 255, 0.02),
                0 0 50px rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 9999px;
            padding: 0 6px 0 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            overflow: hidden;
            height: 44px;
        }


        .user-avatar-initials {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            color: #fff;
            flex-shrink: 0;
            transition: box-shadow 0.2s ease, transform 0.2s ease;
        }

        #userSection:hover .user-avatar-initials {
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.35);
            transform: scale(1.06);
        }


        .user-email {
            font-size: 0.85rem;
            /* text-sm */
            color: rgba(255, 255, 255, 0.5);
            font-weight: 300;
            letter-spacing: 0.05em;
            line-height: 1;
            padding-left: 1rem;
            padding-right: 0.5rem;
        }

        .user-avatar {
            width: 28px;
            /* Reduced from 32px */
            height: 28px;
            border-radius: 50%;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            /* Added border to match look */
            margin-left: auto;
            /* Push to right if needed */
            margin-right: 4px;
            /* Spacing */
        }

        /* Content Area */
        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
            padding-top: 6rem;
            /* Space for absolute header */
        }

        /* GLASS CARD ‚Äî INSTITUTIONAL TERMINAL */
        .glass-card {
            position: relative;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            box-shadow: none;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            overflow: hidden;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-card:hover {
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow:
                inset 0 1px 0 rgba(255, 255, 255, 0.04),
                inset 0 0 20px rgba(0, 0, 0, 0.3),
                0 12px 40px rgba(0, 0, 0, 0.5),
                0 0 24px rgba(255, 255, 255, 0.06);
        }



        /* üîí MODAL GLASS ‚Äî HEAVY CINEMATIC FLOAT */
        .modal-glass {
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.10);
            border-radius: 24px;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            /* üîí LOCKED DEPTH SHADOW STACK */
            box-shadow:
                inset 0 0 20px rgba(255, 255, 255, 0.02),
                0 0 40px rgba(0, 0, 0, 0.5),
                0 0 60px rgba(255, 255, 255, 0.05);
            overflow: hidden;
        }



        .modal-close-btn {
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.35);
            padding: 0;
            cursor: pointer;
            transition: color 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: auto;
            height: auto;
        }

        .modal-close-btn:hover {
            color: rgba(255, 255, 255, 0.7);
        }

        /* üîí INPUTS ‚Äî FROSTED, SOFT, CONTROLLED */
        .modal-glass-input {
            background: rgba(255, 255, 255, 0.04) !important;
            border: 1px solid rgba(255, 255, 255, 0.12) !important;
            border-radius: 12px !important;
            color: rgba(255, 255, 255, 0.92) !important;
            padding: 0.8rem 1rem !important;
            font-weight: 400 !important;
            font-size: 0.85rem !important;
            font-family: "SF Mono", "JetBrains Mono", monospace !important;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        }

        .modal-glass-input:focus {
            background: rgba(255, 255, 255, 0.06) !important;
            border-color: rgba(255, 255, 255, 0.3) !important;
            outline: none !important;
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.05) !important;
        }

        /* Override browser autocomplete white background */
        .modal-glass-input:-webkit-autofill,
        .modal-glass-input:-webkit-autofill:hover,
        .modal-glass-input:-webkit-autofill:focus,
        .modal-glass-input:-webkit-autofill:active {
            -webkit-box-shadow: 0 0 0 100px rgba(30, 30, 30, 1) inset !important;
            -webkit-text-fill-color: rgba(255, 255, 255, 0.92) !important;
            background-color: rgba(30, 30, 30, 1) !important;
            border: 1px solid rgba(255, 255, 255, 0.12) !important;
            caret-color: rgba(255, 255, 255, 0.92) !important;
            transition: background-color 5000s ease-in-out 0s;
        }



        /* Network Selection Buttons */
        .modal-network-btn {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 10px;
            color: rgba(255, 255, 255, 0.7);
            padding: 0.6rem 1.2rem;
            font-size: 0.85rem;
            font-weight: 400;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .modal-network-btn:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.9);
        }

        .modal-network-btn.selected {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.3);
            color: rgba(255, 255, 255, 1);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
        }



        /* üîí BUTTONS ‚Äî HEAVY, SOFT, LUXURY PRESS */
        .modal-btn-primary {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: rgba(255, 255, 255, 0.9);
            padding: 0.8rem 1.5rem;
            font-weight: 500;
            font-size: 0.85rem;
            letter-spacing: 0.02em;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .modal-btn-primary:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
            color: #fff;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.15);
        }

        .modal-btn-secondary {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            color: rgba(255, 255, 255, 0.5);
            padding: 0.8rem 1.5rem;
            font-weight: 400;
            font-size: 0.85rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.04);
            border-color: rgba(255, 255, 255, 0.15);
            color: rgba(255, 255, 255, 0.8);
        }

        .modal-label {
            font-size: 0.8rem;
            font-weight: 400;
            letter-spacing: 0.01em;
            text-transform: none;
            color: rgba(255, 255, 255, 0.55);
            margin-bottom: 0.625rem;
            display: block;
        }

        .search-input-wrapper {
            position: relative;
        }

        .search-input-wrapper .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            color: rgba(255, 255, 255, 0.35);
            pointer-events: none;
            z-index: 1;
        }

        .search-input-wrapper input {
            padding-left: 3rem !important;
        }

        /* GLASS BUTTON ‚Äî INSTITUTIONAL TERMINAL */
        .glass-button {
            position: relative;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.14);
            border-radius: 12px;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color: rgba(255, 255, 255, 0.9);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            overflow: hidden;
            letter-spacing: 0.02em;
        }

        .glass-button:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.3);
            color: white;
            box-shadow:
                0 0 10px rgb(var(--accent-rgb) / 0.30),
                0 0 22px rgb(var(--accent-rgb) / 0.18),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
        }

        .glass-button:active {
            box-shadow:
                0 0 14px rgb(var(--accent-rgb) / 0.45),
                0 0 32px rgb(var(--accent-rgb) / 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.06);
        }

        .glass-button.selected {
            background: rgba(255, 255, 255, 0.10);
            border-color: rgb(var(--accent-rgb) / 0.45);
            color: rgba(255, 255, 255, 1);
            box-shadow:
                0 0 12px rgb(var(--accent-rgb) / 0.35),
                0 0 24px rgb(var(--accent-rgb) / 0.20),
                0 0 0 1px rgb(var(--accent-rgb) / 0.20);
        }

        /* Palette strip hover glow */
        .accent-strip-btn:hover {
            box-shadow:
                0 0 10px rgb(var(--accent-rgb) / 0.28),
                0 0 22px rgb(var(--accent-rgb) / 0.16) !important;
        }

        /* Sidebar active item ‚Äî stronger glow on hover */
        .sidebar-item.active:hover {
            box-shadow:
                0 0 14px rgb(var(--accent-rgb) / 0.40),
                0 0 30px rgb(var(--accent-rgb) / 0.22) !important;
        }

        /* Metric cards ‚Äî accent glow on hover */
        .metric-card:hover {
            box-shadow:
                0 0 12px rgb(var(--accent-rgb) / 0.32),
                0 0 28px rgb(var(--accent-rgb) / 0.18),
                0 4px 16px rgba(0, 0, 0, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.06) !important;
        }



        /* üîí GLASS CAPSULE ‚Äî LOCKED */
        .glass-capsule {
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.10);
            border-radius: 9999px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow:
                inset 0 0 20px rgba(255, 255, 255, 0.02),
                0 0 50px rgba(255, 255, 255, 0.05);
            overflow: hidden;
        }



        /* Bootstrap Overrides handled via custom classes and !important helpers if needed */
        .text-white-50 {
            color: rgba(255, 255, 255, 0.5) !important;
        }

        .text-white-70 {
            color: rgba(255, 255, 255, 0.7) !important;
        }

        .text-white-90 {
            color: rgba(255, 255, 255, 0.9) !important;
        }

        .fw-light {
            font-weight: 300 !important;
        }

        .fw-extralight {
            font-weight: 200 !important;
        }

        /* Remove default button styles */
        button {
            border: none;
            background: none;
            color: inherit;
        }

        /* Module Visibility */
        .module-content {
            display: none;
        }

        .module-content.active {
            display: block;
        }

        .realestate-section {
            display: none;
        }

        .realestate-section.active {
            display: block;
        }

        .crypto-section {
            display: none;
        }

        .crypto-section.active {
            display: block;
        }

        /* Network Correlation ‚Äî Node Pulse Animation */
        @keyframes nodePulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.85;
                transform: scale(1.02);
            }
        }

        /* Custom Scrollbar for Modals */
        .custom-scrollbar::-webkit-scrollbar {
            width: 5px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .custom-scrollbar {
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.1) rgba(255, 255, 255, 0.02);
        }

        /* Valuation Timeline Styles */
        .valuation-timeline {
            position: relative;
            padding-left: 2rem;
        }

        .valuation-timeline::before {
            content: '';
            position: absolute;
            left: 7px;
            top: 12px;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom,
                    rgba(255, 255, 255, 0.15),
                    rgba(255, 255, 255, 0.05));
        }

        .timeline-item {
            position: relative;
        }

        .timeline-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            flex-shrink: 0;
            margin-top: 2px;
        }

        .timeline-dot.active {
            background: #10b981;
            border-color: #10b981;
            box-shadow: 0 0 12px rgba(16, 185, 129, 0.4);
        }

        /* Property Status Toggle */
        .property-status-toggle {
            display: inline-flex;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 24px;
            padding: 4px;
            gap: 4px;
        }

        .property-status-toggle .toggle-btn {
            padding: 8px 20px;
            border-radius: 20px;
            border: none;
            background: transparent;
            color: rgba(255, 255, 255, 0.6);
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 0.875rem;
        }

        .property-status-toggle .toggle-btn.active {
            background: rgba(255, 255, 255, 0.15);
            color: white;
        }

        /* Property Folder Cards */
        .property-folder-card {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .property-folder-card:hover {
            transform: translateY(-8px);
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.5);
        }

        .property-folder-card .folder-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.9;
        }

        .property-folder-card .property-name {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .property-folder-card .property-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .property-folder-card .folder-stats {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.08);
        }

        .property-folder-card .stat-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.85rem;
        }

        /* Valuation Table */
        .valuation-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 8px;
        }

        .valuation-table th {
            text-align: left;
            padding: 12px 16px;
            color: rgba(255, 255, 255, 0.5);
            font-weight: 500;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }

        .valuation-table td {
            padding: 16px;
            background: rgba(255, 255, 255, 0.03);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .valuation-table td:first-child {
            border-left: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 8px 0 0 8px;
        }

        .valuation-table td:last-child {
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 0 8px 8px 0;
        }

        .valuation-table tbody tr:hover td {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Pulse dot animation for live indicators */
        .pulse-dot {
            display: inline-block;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #10b981;
            margin-right: 4px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.5;
                transform: scale(0.8);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
    </style>
</head>

<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-container">
                <div class="sidebar-brand">AETHER</div>
                <div class="sidebar-menu" id="sidebarMenu"></div>
                <div class="sidebar-divider"></div>
                <div class="sidebar-item" onclick="logout(true)">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                    <span>Log Out</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="breadcrumb-capsule">
                    <span id="breadcrumb">Home</span>
                </div>

                <div class="module-tabs-wrapper">
                    <div class="module-tabs">
                        <button class="module-tab" data-source="realestate" onclick="switchSource('realestate')">Real
                            Estate</button>
                        <button class="module-tab" data-source="crypto" onclick="switchSource('crypto')">Crypto</button>
                        <button class="module-tab" data-source="shares" onclick="switchSource('shares')">Shares</button>
                        <button class="module-tab" data-source="bonds" onclick="switchSource('bonds')">Bonds</button>
                        <button class="module-tab" data-source="business"
                            onclick="switchSource('business')">Business</button>
                    </div>
                </div>

                <div class="user-section" id="userSection" onclick="openProfileDrawer()" style="cursor:pointer;">
                    <span class="user-email" id="userEmail" style="display:none;"></span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                        style="width:16px;height:16px;color:rgba(255,255,255,0.6);flex-shrink:0;">
                        <path fill-rule="evenodd"
                            d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0zM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695z"
                            clip-rule="evenodd" />
                    </svg>
                    <span id="userDisplayName" style="color:rgba(255,255,255,0.75);font-size:0.78rem;"></span>
                    <div class="user-avatar-initials" id="userAvatarInitials">U</div>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Home Dashboard Module -->
                <div class="module-content active" id="module-home">
                    <!-- Intentionally clean/empty landing view -->
                </div>

                <!-- Real Estate Module -->
                <div class="module-content" id="module-realestate">
                    <!-- 1. Overview Section (renamed from Dashboard) -->
                    <div id="realestate-section-overview" class="realestate-section active">
                        <!-- Injected by JS -->
                    </div>

                    <!-- 2. Properties Section -->
                    <div id="realestate-section-properties" class="realestate-section">
                        <div class="glass-header mb-4 d-flex justify-content-between align-items-end">
                            <div>
                                <h2 class="h3 fw-light mb-2">Active Properties</h2>
                                <p class="text-white-50 fw-light">Properties currently owned</p>
                            </div>
                            <div class="d-flex gap-3">
                                <div class="glass-capsule p-1 d-flex gap-1">
                                    <button id="filter-owned"
                                        class="px-3 py-1 rounded-pill bg-white bg-opacity-10 text-white small"
                                        onclick="filterProperties('Owned')">Owned</button>
                                    <button id="filter-rented" class="px-3 py-1 rounded-pill text-white-50 small"
                                        onclick="filterProperties('Rented')">Rented</button>
                                </div>
                                <button class="glass-button px-4 py-2 rounded-pill small" onclick="handleAddProperty()">
                                    <span>+</span> Add Property
                                </button>
                            </div>
                        </div>
                        <div id="properties-grid" class="row g-4">
                            <!-- Injected by JS -->
                        </div>
                    </div>

                    <!-- 3. Rental History -->
                    <div id="realestate-section-rental-sale" class="realestate-section">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Rental & Sale History</h2>
                            <p class="text-white-50 fw-light">Chronological transaction ledger</p>
                        </div>
                        <div id="transaction-list">
                            <!-- Injected JS -->
                        </div>
                    </div>

                    <!-- 4. Documents (Renamed from Valuations) -->
                    <div id="realestate-section-documents" class="realestate-section" style="display: none;">
                        <div class="glass-card mb-4">
                            <div class="p-4 d-flex justify-content-between align-items-center">
                                <div>
                                    <h2 class="h4 fw-light text-white mb-1">Property Documents</h2>
                                    <p class="text-white-50 mb-0 small">Manage contracts, deeds, and tax filings</p>
                                </div>
                                <div class="d-flex gap-2">
                                    <button class="glass-button px-4 py-2 d-flex align-items-center gap-2"
                                        onclick="openUploadDocumentModal()">
                                        <span>+</span> Upload Document
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div id="documents-list" class="row g-4">
                            <!-- Documents will be rendered here by dashboard.js -->
                        </div>
                    </div>

                    <!-- 5. Property Valuation (New Section) -->
                    <div id="realestate-section-valuation" class="realestate-section" style="display: none;">
                        <!-- Premium Header with Glassmorphism -->
                        <div class="mb-5">
                            <div class="d-flex justify-content-between align-items-start flex-wrap gap-4">
                                <!-- Left: Title & Subtitle -->
                                <div>
                                    <div class="d-flex align-items-center gap-3 mb-2">
                                        <div class="d-flex align-items-center justify-content-center rounded-3" style="width: 44px; height: 44px; 
                                                    background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
                                                    border: 1px solid rgba(255,255,255,0.1);
                                                    box-shadow: 0 4px 16px rgba(0,0,0,0.2);">
                                            <svg width="20" height="20" fill="none" stroke="rgba(255,255,255,0.8)"
                                                viewBox="0 0 24 24" style="stroke-width: 1.5;">
                                                <path
                                                    d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                            </svg>
                                        </div>
                                        <h2
                                            style="font-size: 1.75rem; font-weight: 300; color: rgba(255,255,255,0.95); letter-spacing: -0.02em; margin: 0;">
                                            Property Valuations
                                        </h2>
                                    </div>
                                    <p
                                        style="color: rgba(255,255,255,0.45); font-weight: 300; font-size: 0.9rem; margin: 0; padding-left: 57px;">
                                        Track asset value history and appreciation trends
                                    </p>
                                </div>

                                <!-- Right: Premium Toggle -->
                                <div class="d-flex align-items-center p-1 rounded-pill"
                                    style="background: linear-gradient(135deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
                                            border: 1px solid rgba(255,255,255,0.08);
                                            box-shadow: inset 0 1px 0 rgba(255,255,255,0.04), 0 4px 16px rgba(0,0,0,0.2);">
                                    <button id="val-btn-active"
                                        class="px-4 py-2 rounded-pill border-0 d-flex align-items-center gap-2" style="background: rgba(255,255,255,0.1); 
                                                   color: rgba(255,255,255,0.95);
                                                   font-size: 0.8rem;
                                                   font-weight: 500;
                                                   transition: all 0.3s ease;
                                                   cursor: pointer;" onclick="filterValuationCards('active')">
                                        <div style="width: 6px; height: 6px; border-radius: 50%; background: #34d399;">
                                        </div>
                                        Active
                                    </button>
                                    <button id="val-btn-sold" class="px-4 py-2 rounded-pill border-0" style="background: transparent; 
                                                   color: rgba(255,255,255,0.5);
                                                   font-size: 0.8rem;
                                                   font-weight: 500;
                                                   transition: all 0.3s ease;
                                                   cursor: pointer;" onclick="filterValuationCards('sold')">
                                        Sold
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Folder Grid Container -->
                        <div id="valuation-folders-grid" class="row g-4">
                            <!-- Injected by renderValuationFolders() -->
                        </div>


                    </div>


                    <!-- 5. AI Lab -->
                    <div id="realestate-section-ai-lab" class="realestate-section">

                        <!-- AI Lab Header -->
                        <div class="glass-header mb-4">
                            <div class="d-flex align-items-center gap-3 mb-2">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" class="text-primary">
                                    <path
                                        d="M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2" />
                                    <path d="M8.5 2h7" />
                                    <path d="M7 16h10" />
                                </svg>
                                <h2 class="h3 fw-light mb-0">AI Lab</h2>
                                <span class="badge bg-primary bg-opacity-10 text-primary">Experimental</span>
                            </div>
                            <p class="text-white-50 fw-light mb-0">AI-powered property analysis, risk assessment, and
                                portfolio insights</p>
                        </div>

                        <!-- Sub-Tab Navigation -->
                        <div class="glass-card mb-4 p-3" id="re-ai-lab-tabs">
                            <div class="d-flex align-items-center justify-content-between mb-3 px-1">
                                <span class="text-white-50 small fw-medium"
                                    style="letter-spacing: 0.08em; text-transform: uppercase; font-size: 0.65rem;">Select
                                    Feature</span>
                            </div>
                            <div class="ai-lab-tab-grid">
                                <button type="button" class="ai-lab-tab active" data-tab="re-predictions-risk"
                                    onclick="switchREAILabTab('re-predictions-risk')">
                                    <div class="tab-icon-wrap">üìà</div>
                                    <div class="tab-content">
                                        <span class="tab-title">Predictions & Risk</span>
                                        <span class="tab-desc">ML forecasting + Portfolio health</span>
                                    </div>
                                </button>
                                <button type="button" class="ai-lab-tab" data-tab="re-insights-sentiment"
                                    onclick="switchREAILabTab('re-insights-sentiment')">
                                    <div class="tab-icon-wrap">‚ú®</div>
                                    <div class="tab-content">
                                        <span class="tab-title">Insights & Diversification</span>
                                        <span class="tab-desc">AI summary + Portfolio spread</span>
                                    </div>
                                    <span class="tab-badge"
                                        style="background: rgba(118,75,162,0.3); color: #c4b5fd;">AI</span>
                                </button>
                                <button type="button" class="ai-lab-tab" data-tab="re-anomaly-correlation"
                                    onclick="switchREAILabTab('re-anomaly-correlation')">
                                    <div class="tab-icon-wrap">‚öñÔ∏è</div>
                                    <div class="tab-content">
                                        <span class="tab-title">Rebalancing &amp; Yield</span>
                                        <span class="tab-desc">Portfolio advisor + Rental optimizer</span>
                                    </div>
                                    <span class="tab-badge"
                                        style="background: rgba(245,158,11,0.3); color: #fcd34d;">AI</span>
                                </button>
                            </div>
                        </div>

                        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                        <!-- Tab 1: Predictions & Risk          -->
                        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                        <div class="ai-lab-panel active" id="re-ai-lab-panel-predictions-risk">

                            <!-- Model Controls -->
                            <div class="glass-card p-3 mb-4">
                                <div class="row g-3 align-items-center">
                                    <div class="col-md-3">
                                        <label class="text-white-70 small mb-1">ML Model:</label>
                                        <select id="mlModelSelector" class="modal-glass-input form-select-sm"
                                            onchange="updateAIPredictions()">
                                            <option value="prophet" selected>Prophet Time-Series</option>
                                            <option value="lstm">LSTM Neural Network</option>
                                            <option value="ensemble">Ensemble (Combined)</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="text-white-70 small mb-1">Forecast Period:</label>
                                        <select id="forecastPeriodSelector" class="modal-glass-input form-select-sm"
                                            onchange="updateAIPredictions()">
                                            <option value="30">30 Days</option>
                                            <option value="90" selected>90 Days</option>
                                            <option value="180">180 Days</option>
                                            <option value="365">1 Year</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="text-white-70 small mb-1">&nbsp;</label>
                                        <button onclick="compareModelPerformance()" class="glass-button w-100 btn-sm">
                                            üìä Compare Models
                                        </button>
                                    </div>
                                    <div class="col-md-3 text-end">
                                        <label class="text-white-70 small mb-1 d-block">Model Status:</label>
                                        <span class="badge"
                                            style="background: rgba(16, 185, 129, 0.2); color: #10b981;">
                                            <span class="pulse-dot"></span> Active
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <!-- Prediction Accuracy Chart -->
                            <div class="glass-card p-4 mb-4">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <h4 class="h6 text-white-90 mb-1">Prediction Accuracy Analysis</h4>
                                        <p class="text-white-50 small mb-0">Historical predictions vs actual values</p>
                                    </div>
                                    <div class="d-flex gap-2 align-items-center">
                                        <div class="d-flex align-items-center gap-2">
                                            <div style="width: 12px; height: 3px; background: #3b82f6;"></div>
                                            <span class="text-white-70 small">Predicted</span>
                                        </div>
                                        <div class="d-flex align-items-center gap-2">
                                            <div style="width: 12px; height: 3px; background: #10b981;"></div>
                                            <span class="text-white-70 small">Actual</span>
                                        </div>
                                    </div>
                                </div>
                                <div style="height: 300px; position: relative;">
                                    <canvas id="accuracyChart"></canvas>
                                </div>
                                <div id="accuracyMetrics"
                                    class="row g-3 mt-3 pt-3 border-top border-white border-opacity-10">
                                    <!-- Dynamic RMSE, MAE, R¬≤ metrics -->
                                </div>
                            </div>

                            <!-- Portfolio Health Score -->
                            <div id="ai-health-score-container" class="glass-card p-4 mb-4">
                                <div class="text-center text-white-50 py-4">
                                    <div class="spinner-border spinner-border-sm text-primary mb-2" role="status"></div>
                                    <div>Calculating Portfolio Health...</div>
                                </div>
                            </div>

                            <!-- ‚ïê‚ïê‚ïê Divider ‚ïê‚ïê‚ïê -->
                            <div class="ai-lab-section-divider">
                                <div class="divider-line"></div>
                                <span class="divider-label">‚ö° Risk & Forecasts</span>
                                <div class="divider-line"></div>
                            </div>

                            <!-- Risk Alerts -->
                            <div id="ai-risk-section" class="mb-4" style="display: none;">
                                <h3 class="h6 text-white-50 text-uppercase fw-light mb-3" style="letter-spacing: 1px;">
                                    Risk Detection</h3>
                                <div id="ai-risk-container" class="d-flex flex-column gap-3">
                                    <!-- Dynamic Content -->
                                </div>
                            </div>

                            <!-- Price Forecasts -->
                            <div class="mb-4">
                                <h3 class="h6 text-white-50 text-uppercase fw-light mb-3" style="letter-spacing: 1px;">
                                    üí∞ Price Forecasts</h3>
                                <div id="ai-price-predictions" class="row g-3">
                                    <!-- Dynamic prediction cards -->
                                </div>
                            </div>
                        </div>

                        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                        <!-- Tab 2: Insights & Diversification  -->
                        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                        <div class="ai-lab-panel" id="re-ai-lab-panel-insights-sentiment" style="display: none;">

                            <!-- ‚îÄ‚îÄ Section A: Gemini AI Portfolio Summary ‚îÄ‚îÄ -->
                            <div class="glass-card p-4 mb-4">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <h3 class="h5 fw-light text-white mb-1">
                                            <span
                                                style="background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">‚ú®
                                                AI Portfolio Summary</span>
                                        </h3>
                                        <p class="text-white-50 small mb-0">Gemini-powered insights based on your
                                            property portfolio</p>
                                    </div>
                                    <div class="d-flex align-items-center gap-2">
                                        <span class="text-white-50 small" id="re-ai-summary-timestamp"></span>
                                        <button type="button" onclick="fetchAndRenderPortfolioSummary()"
                                            class="glass-button btn-sm px-2 py-1" title="Refresh">
                                            <svg width="12" height="12" fill="none" stroke="currentColor"
                                                viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                                </path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <!-- Portfolio snapshot bar -->
                                <div id="re-ai-portfolio-snapshot" class="d-flex gap-3 flex-wrap mb-3"
                                    style="display:none;"></div>
                                <!-- Insight cards -->
                                <div id="re-ai-insights-feed" class="d-flex flex-column gap-2">
                                    <div class="text-center text-white-50 py-4 small">
                                        <div class="spinner-border spinner-border-sm text-primary mb-2" role="status">
                                        </div>
                                        <div>Loading AI insights...</div>
                                    </div>
                                </div>
                            </div>

                            <!-- ‚îÄ‚îÄ Divider ‚îÄ‚îÄ -->
                            <div class="ai-lab-section-divider">
                                <div class="divider-line"></div>
                                <span class="divider-label">üìä Portfolio Diversification</span>
                                <div class="divider-line"></div>
                            </div>

                            <!-- ‚îÄ‚îÄ Section B: Diversification Score ‚îÄ‚îÄ -->
                            <div class="glass-card p-4">
                                <div class="d-flex justify-content-between align-items-center mb-4">
                                    <div>
                                        <h3 class="h5 fw-light text-white mb-1">üéØ Diversification Score</h3>
                                        <p class="text-white-50 small mb-0">City, type &amp; value concentration
                                            analysis</p>
                                    </div>
                                    <button type="button" onclick="fetchAndRenderDiversificationScore()"
                                        class="glass-button btn-sm px-2 py-1" title="Refresh">
                                        <svg width="12" height="12" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                            </path>
                                        </svg>
                                    </button>
                                </div>
                                <div id="re-diversification-content">
                                    <div class="text-center text-white-50 py-4 small">
                                        <div class="spinner-border spinner-border-sm text-primary mb-2" role="status">
                                        </div>
                                        <div>Analysing portfolio concentration...</div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

                        <!-- Tab 3: Rebalancing & Yield          -->
                        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                        <div class="ai-lab-panel" id="re-ai-lab-panel-anomaly-correlation" style="display: none;">

                            <!-- ‚îÄ‚îÄ Divider ‚îÄ‚îÄ -->
                            <div class="ai-lab-section-divider">
                                <div class="divider-line"></div>
                                <span class="divider-label">‚öñÔ∏è Portfolio Rebalancing</span>
                                <div class="divider-line"></div>
                            </div>

                            <!-- ‚îÄ‚îÄ Section A: Rebalancing Advisor ‚îÄ‚îÄ -->
                            <div class="glass-card p-4 mb-4">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <h3 class="h5 fw-light text-white mb-1">‚öñÔ∏è Rebalancing Advisor</h3>
                                        <p class="text-white-50 small mb-0">What to buy next to improve portfolio
                                            balance</p>
                                    </div>
                                    <button type="button" onclick="fetchAndRenderRebalancingAdvisor()"
                                        class="glass-button btn-sm px-2 py-1" title="Refresh">
                                        <svg width="12" height="12" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                            </path>
                                        </svg>
                                    </button>
                                </div>
                                <div id="re-rebalancing-content">
                                    <div class="text-center text-white-50 py-4 small">
                                        <div class="spinner-border spinner-border-sm text-primary mb-2" role="status">
                                        </div>
                                        <div>Analysing portfolio gaps...</div>
                                    </div>
                                </div>
                            </div>

                            <!-- ‚îÄ‚îÄ Divider ‚îÄ‚îÄ -->
                            <div class="ai-lab-section-divider">
                                <div class="divider-line"></div>
                                <span class="divider-label">üè∑Ô∏è Rental Yield</span>
                                <div class="divider-line"></div>
                            </div>

                            <!-- ‚îÄ‚îÄ Section B: Rental Yield Optimizer ‚îÄ‚îÄ -->
                            <div class="glass-card p-4">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <h3 class="h5 fw-light text-white mb-1">üè∑Ô∏è Rental Yield Optimizer</h3>
                                        <p class="text-white-50 small mb-0">Actual vs market-rate rent per property</p>
                                    </div>
                                    <button type="button" onclick="fetchAndRenderRentalYield()"
                                        class="glass-button btn-sm px-2 py-1" title="Refresh">
                                        <svg width="12" height="12" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                            </path>
                                        </svg>
                                    </button>
                                </div>
                                <div id="re-rental-yield-content">
                                    <div class="text-center text-white-50 py-4 small">
                                        <div class="spinner-border spinner-border-sm text-primary mb-2" role="status">
                                        </div>
                                        <div>Fetching rental market benchmarks...</div>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>
                </div>




                <!-- Crypto Module -->
                <div class="module-content" id="module-crypto">
                    <!-- 1. Overview Section -->
                    <div id="crypto-section-overview" class="crypto-section active">
                        <!-- Injected by JS -->
                    </div>

                    <!-- 2. Holdings Section -->
                    <div id="crypto-section-holdings" class="crypto-section" style="display: none;">
                        <!-- Container 2: Holdings List -->
                        <div class="d-flex justify-content-between align-items-end mb-3">
                            <div>
                                <h2 class="h5 fw-light text-white-90">Your Assets</h2>
                            </div>
                            <div class="d-flex align-items-center gap-3">
                                <!-- Refresh Button -->
                                <button onclick="fetchCryptoData()"
                                    class="btn px-3 py-2 d-flex align-items-center gap-2"
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: rgba(255,255,255,0.7);">
                                    <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                        </path>
                                    </svg>
                                    <span class="small">Refresh</span>
                                </button>

                                <!-- Add Crypto Button -->
                                <button onclick="openAddCryptoModal()"
                                    class="btn px-3 py-2 rounded-pill d-flex align-items-center gap-2 transition-all hover-scale-105"
                                    style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: white;">
                                    <span class="fs-6 fw-light">+</span>
                                    <span>Add Crypto</span>
                                </button>
                            </div>
                        </div>

                        <div class="glass-panel overflow-hidden p-0">
                            <div
                                class="d-flex w-100 p-3 border-bottom border-white border-opacity-10 text-white-50 small text-uppercase">
                                <div style="width: 18%">Asset</div>
                                <div style="width: 10%">Network</div>
                                <div style="width: 10%">Quantity</div>
                                <div style="width: 13%">Avg Buy Price</div>
                                <div style="width: 13%">Current Price</div>
                                <div style="width: 14%">Total Valuation</div>
                                <div style="width: 14%">Gain/Loss</div>
                                <div class="text-center" style="width: 8%">Action</div>
                            </div>
                            <div id="crypto-holdings-list">
                                <!-- Injected by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- 3. On-Chain Activity Section -->
                    <div id="crypto-section-on-chain" class="crypto-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Transaction History</h2>
                            <p class="text-white-50 fw-light">Your crypto buy and sell activity</p>
                        </div>

                        <!-- Activity Feed -->
                        <div id="crypto-transactions-list">
                            <!-- Injected by JS -->
                        </div>
                    </div>

                    <!-- 4. Wallets Section -->
                    <div id="crypto-section-wallets" class="crypto-section" style="display: none;">
                        <div class="glass-header mb-4 d-flex justify-content-between align-items-center">
                            <div>
                                <h2 class="h3 fw-light mb-2">Connected Wallets</h2>
                                <p class="text-white-50 fw-light mb-0">Manage your wallet
                                    connections</p>
                            </div>
                            <button class="glass-button px-4 py-2" onclick="openAddWalletModal()">
                                + Add Wallet
                            </button>
                        </div>

                        <!-- Wallet Cards Grid -->
                        <div id="crypto-wallets-grid" class="row g-4">
                            <!-- Empty State -->
                            <div id="wallets-empty-state" class="col-12">
                                <div class="glass-card glass-empty-state">
                                    <div class="glass-empty-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-white-50">
                                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2">
                                            </rect>
                                            <line x1="1" y1="10" x2="23" y2="10"></line>
                                        </svg>
                                    </div>
                                    <h3 class="h4 fw-light text-white-90 mb-2">No wallets connected
                                    </h3>
                                    <p class="text-white-50 fw-light mb-3">Add your crypto wallet
                                        addresses to track
                                        balances</p>
                                    <button class="glass-button px-4 py-2" onclick="openAddWalletModal()">
                                        + Add Your First Wallet
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 5. AI Lab Section -->
                    <div id="crypto-section-ai-lab" class="crypto-section" style="display: none;">
                        <div class="d-flex flex-column gap-4">
                            <div class="glass-header">
                                <div class="d-flex align-items-center gap-3 mb-2">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" class="text-primary">
                                        <path
                                            d="M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2" />
                                        <path d="M8.5 2h7" />
                                        <path d="M7 16h10" />
                                    </svg>
                                    <h2 class="h3 fw-light mb-0">AI Lab</h2>
                                    <span class="badge bg-primary bg-opacity-10 text-primary">Experimental</span>
                                </div>
                                <p class="text-white-50 fw-light">Machine Learning insights powered by PyTorch LSTM</p>
                            </div>

                            <!-- Top Row: Health Score & Forecast -->
                            <div class="row g-4">
                                <!-- Health Score -->
                                <div class="col-lg-4">
                                    <div class="glass-card p-4 h-100 d-flex flex-column justify-content-between">
                                        <div>
                                            <h3 class="h5 fw-light text-white-90 mb-3">Portfolio Health</h3>
                                            <p class="text-white-50 small mb-4">Composite score based on
                                                diversification,
                                                volatility, and trend.</p>
                                        </div>

                                        <div class="d-flex align-items-center justify-content-center position-relative mb-3"
                                            style="height: 180px;">
                                            <!-- Gauge Canvas -->
                                            <canvas id="healthScoreGauge"></canvas>
                                            <!-- Score Text Overlay -->
                                            <div class="position-absolute top-50 start-50 translate-middle text-center"
                                                style="margin-top: 20px;">
                                                <h2 class="display-4 fw-light text-white mb-0" id="health-score-value">
                                                    --
                                                </h2>
                                                <span class="text-white-50 small">/ 100</span>
                                            </div>
                                        </div>

                                        <div id="health-components"
                                            class="d-flex justify-content-between text-center pt-3 border-top border-white border-opacity-10">
                                            <!-- Injected via JS -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Forecast Chart -->
                                <div class="col-lg-8">
                                    <div class="glass-card p-4 h-100">
                                        <div class="d-flex justify-content-between align-items-center mb-4">
                                            <div>
                                                <h3 class="h5 fw-light text-white-90 mb-1">30-Day Value Forecast</h3>
                                                <p class="text-white-50 small mb-0">Projected total portfolio valuation
                                                </p>
                                            </div>
                                            <div class="d-flex align-items-center gap-2">
                                                <span
                                                    class="badge bg-primary bg-opacity-10 text-primary fw-light px-3 py-1 rounded-pill">
                                                    ML Confidence: 80%
                                                </span>
                                            </div>
                                        </div>
                                        <div style="height: 250px; width: 100%;">
                                            <canvas id="cryptoForecastChart"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Recent Insights -->
                            <div>
                                <h3 class="h6 text-white-50 text-uppercase fw-light mb-3" style="letter-spacing: 1px;">
                                    Recent Analysis</h3>
                                <div id="ai-insights-container" class="row g-3">
                                    <!-- Injected via JS -->
                                </div>
                            </div>

                            <!-- What-If Simulator -->
                            <div class="glass-card p-4 border-warning border-opacity-10"
                                style="background: rgba(255, 193, 7, 0.02);">
                                <div class="d-flex justify-content-between align-items-start mb-4">
                                    <div>
                                        <div class="d-flex align-items-center gap-2 mb-1">
                                            <div class="p-1 rounded bg-warning bg-opacity-10 text-warning">
                                                <svg width="16" height="16" fill="none" stroke="currentColor"
                                                    viewBox="0 0 24 24">
                                                    <path d="M12 2v20M2 12h20" stroke-width="2"
                                                        stroke-linecap="round" />
                                                    <circle cx="12" cy="12" r="10" stroke-width="2" />
                                                </svg>
                                            </div>
                                            <h3 class="h5 fw-light text-white-90 mb-0">Scenario Simulator</h3>
                                        </div>
                                        <p class="text-white-50 small mb-0">Stress-test your portfolio against market
                                            events.</p>
                                    </div>
                                </div>

                                <div class="row g-5 align-items-center">
                                    <!-- Controls -->
                                    <div class="col-lg-5">
                                        <label class="form-label text-white-80 small mb-3">Simulate Market Shock
                                            (Bitcoin Move)</label>
                                        <div class="d-flex align-items-center gap-3 mb-2">
                                            <span class="text-danger small fw-bold">-50%</span>
                                            <input type="range" class="form-range glass-range" id="simulatorShockInput"
                                                min="-50" max="50" value="0" step="5">
                                            <span class="text-success small fw-bold">+50%</span>
                                        </div>
                                        <div class="text-center">
                                            <span id="simulatorShockValue"
                                                class="badge bg-white bg-opacity-10 text-white fw-light px-3 py-2">
                                                0% Change
                                            </span>
                                        </div>
                                    </div>

                                    <!-- Results -->
                                    <div class="col-lg-7">
                                        <div
                                            class="d-flex align-items-center justify-content-around p-3 rounded glass-inset">
                                            <div class="text-center opacity-50">
                                                <div class="small text-white-50 mb-1">Current Value</div>
                                                <div class="h5 fw-light text-white mb-0" id="sim-current-value">...
                                                </div>
                                            </div>
                                            <div class="text-white-20 h3 fw-light mb-0">‚Üí</div>
                                            <div class="text-center">
                                                <div class="small text-white-50 mb-1">Projected Value</div>
                                                <div class="h3 fw-light text-white mb-0" id="sim-projected-value">...
                                                </div>
                                                <div class="small" id="sim-change-percent">--</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Detailed Impact (Hidden by default, shown on interaction) -->
                                <div id="simulation-impact-details"
                                    class="mt-4 pt-3 border-top border-white border-opacity-10" style="display: none;">
                                    <h5 class="h6 text-white-50 text-uppercase mb-3" style="letter-spacing: 1px;">Asset
                                        Impact Breakdown</h5>
                                    <div id="simulation-impact-body" class="row g-3">
                                        <!-- Injected via JS as glass cards in grid -->
                                    </div>
                                </div>
                            </div>

                            <!-- Chat Area -->
                            <div class="glass-card p-4 mt-2">
                                <h3 class="h5 fw-light text-white-90 mb-3">Ask Aether AI</h3>
                                <div class="input-group glass-input-group">
                                    <input type="text" class="form-control bg-transparent border-0 text-white fw-light"
                                        placeholder="Ask about your portfolio risks, tax implications, or market trends...">
                                    <button class="btn text-white-50" type="button">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <line x1="22" y1="2" x2="11" y2="13"></line>
                                            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Shares Module -->
                <div class="module-content" id="module-shares">
                    <!-- 1. Overview Section -->
                    <div id="shares-section-overview" class="shares-section active">
                        <!-- Injected by JS -->
                    </div>

                    <!-- 2. Holdings Section -->
                    <div id="shares-section-holdings" class="shares-section" style="display: none;">
                        <div id="shares-holdings-list">
                            <!-- Injected by JS -->
                        </div>
                    </div>

                    <!-- 3. Market Activity Section -->
                    <div id="shares-section-market-activity" class="shares-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Transaction History</h2>
                            <p class="text-white-50 fw-light">Your share buy and sell activity</p>
                        </div>

                        <!-- Activity Feed -->
                        <div id="share-transactions-list">
                            <!-- Injected by JS -->
                        </div>
                    </div>

                    <!-- 4. Performance Section -->
                    <div id="shares-section-performance" class="shares-section" style="display: none;">
                        <!-- Content injected by js/shares-performance.js -->
                    </div>

                    <!-- 5. Transactions Section -->
                    <div id="shares-section-transactions" class="shares-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Transaction History</h2>
                            <p class="text-white-50 fw-light">Complete record of buy and sell orders
                            </p>
                        </div>
                        <div class="glass-card glass-empty-state">
                            <div class="glass-empty-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round" class="text-white-80">
                                    <rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect>
                                    <polyline points="17 2 12 7 7 2"></polyline>
                                </svg>
                            </div>
                            <h3 class="h4 fw-light text-white-90 mb-2">Coming Soon</h3>
                            <p class="text-white-50 fw-light">Transaction history is under
                                development.</p>
                        </div>
                    </div>

                    <!-- 6. AI Insights Section -->
                    <div id="shares-section-ai-lab" class="shares-section" style="display: none;">
                        <!-- AI Lab Header -->
                        <div class="glass-header mb-4">
                            <div class="d-flex align-items-center gap-3 mb-2">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" class="text-primary">
                                    <path
                                        d="M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2" />
                                    <path d="M8.5 2h7" />
                                    <path d="M7 16h10" />
                                </svg>
                                <h2 class="h3 fw-light mb-0">AI Lab</h2>
                                <span class="badge bg-primary bg-opacity-10 text-primary">Experimental</span>
                            </div>
                            <p class="text-white-50 fw-light mb-0">AI-powered stock analysis, risk assessment, and
                                portfolio insights</p>
                        </div>

                        <!-- Sub-Tab Navigation Container -->
                        <div class="glass-card mb-4 p-3" id="ai-lab-tabs">
                            <div class="d-flex align-items-center justify-content-between mb-3 px-1">
                                <span class="text-white-50 small fw-medium"
                                    style="letter-spacing: 0.08em; text-transform: uppercase; font-size: 0.65rem;">Select
                                    Feature</span>
                            </div>
                            <div class="ai-lab-tab-grid">
                                <button class="ai-lab-tab active" data-tab="predictions-risk"
                                    onclick="switchAILabTab('predictions-risk')">
                                    <div class="tab-icon-wrap">üìà</div>
                                    <div class="tab-content">
                                        <span class="tab-title">Predictions & Risk</span>
                                        <span class="tab-desc">ML forecasting + Portfolio VaR</span>
                                    </div>
                                </button>
                                <button class="ai-lab-tab" data-tab="insights-sentiment"
                                    onclick="switchAILabTab('insights-sentiment')">
                                    <div class="tab-icon-wrap">‚ú®</div>
                                    <div class="tab-content">
                                        <span class="tab-title">Insights & Sentiment</span>
                                        <span class="tab-desc">AI analysis + News signals</span>
                                    </div>
                                    <span class="tab-badge"
                                        style="background: rgba(118,75,162,0.3); color: #c4b5fd;">AI</span>
                                </button>
                                <button class="ai-lab-tab" data-tab="anomaly-correlation"
                                    onclick="switchAILabTab('anomaly-correlation')">
                                    <div class="tab-icon-wrap">üîç</div>
                                    <div class="tab-content">
                                        <span class="tab-title">Anomaly & Correlation</span>
                                        <span class="tab-desc">Outlier detection + Diversification</span>
                                    </div>
                                    <span class="tab-badge"
                                        style="background: rgba(45,212,191,0.3); color: #5eead4;">ML</span>
                                </button>
                            </div>
                        </div>

                        <!-- Tab Panel: Predictions & Risk -->
                        <div class="ai-lab-panel active" id="ai-lab-panel-predictions-risk">
                            <!-- Controls Row -->
                            <div class="glass-card mb-4 p-3">
                                <div class="row g-3 align-items-center">
                                    <div class="col-md-4">
                                        <label class="form-label text-white-80 small mb-1">Stock Ticker</label>
                                        <select id="ticker-select" class="form-select glass-input"
                                            onchange="onTickerChange(this.value)">
                                            <option value="AAPL">AAPL - Apple Inc.</option>
                                            <option value="MSFT">MSFT - Microsoft</option>
                                            <option value="GOOGL">GOOGL - Alphabet</option>
                                            <option value="AMZN">AMZN - Amazon</option>
                                            <option value="TSLA">TSLA - Tesla</option>
                                            <option value="NVDA">NVDA - NVIDIA</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label text-white-80 small mb-1">Prediction Horizon</label>
                                        <select id="horizon-select" class="form-select glass-input"
                                            onchange="onHorizonChange(this.value)">
                                            <option value="7">7 Days</option>
                                            <option value="30" selected>30 Days</option>
                                            <option value="90">90 Days</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label text-white-80 small mb-1">ML Model</label>
                                        <div class="px-3 py-2 rounded"
                                            style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">
                                            <span class="text-white-90 small">Prophet 60% + ARIMA 40%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Metrics Row -->
                            <div class="row g-3 mb-4">
                                <div class="col-md-3">
                                    <div class="glass-card p-3 text-center">
                                        <div class="text-white-50 small mb-2">Current Price</div>
                                        <div class="h4 text-white fw-light mb-0" id="current-price-value">--</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="glass-card p-3 text-center">
                                        <div class="text-white-50 small mb-2">Predicted Price</div>
                                        <div class="h4 text-white fw-light mb-0" id="predicted-price-value">--</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="glass-card p-3 text-center">
                                        <div class="text-white-50 small mb-2">Expected Change</div>
                                        <div class="h4 fw-light mb-0" id="change-pct-value">--</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="glass-card p-3 text-center">
                                        <div class="text-white-50 small mb-2">Model RMSE</div>
                                        <div class="h4 text-white fw-light mb-0" id="rmse-value">--</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Price Prediction Chart -->
                            <div class="glass-card mb-4 p-4">
                                <div id="shares-prediction-chart" style="min-height: 400px;">
                                    <div class="text-center py-5">
                                        <div class="spinner-border text-light" role="status"
                                            style="width: 3rem; height: 3rem;">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                        <p class="text-white-50 mt-3">Loading predictions...</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Info Card -->
                            <div class="glass-card p-4">
                                <h3 class="h5 fw-light mb-3 text-white">About These Predictions</h3>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="text-white-50 small">
                                            <strong class="text-white">Ensemble Model:</strong><br>
                                            Combines Prophet (60%) for trend & seasonality with ARIMA (40%) for time
                                            series
                                            analysis.
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="text-white-50 small">
                                            <strong class="text-white">Confidence Intervals:</strong><br>
                                            The shaded area represents 95% confidence. Prices have 95% probability of
                                            falling within this range.
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ‚ïê‚ïê‚ïê Section Divider: Risk Analysis ‚ïê‚ïê‚ïê -->
                            <div class="ai-lab-section-divider">
                                <div class="divider-line"></div>
                                <span class="divider-label">‚ö° Risk Analysis</span>
                                <div class="divider-line"></div>
                            </div>

                            <!-- Risk Metrics Row -->
                            <div class="row g-3 mb-4">
                                <div class="col-md-3">
                                    <div class="glass-card p-3 text-center">
                                        <div class="text-white-50 small mb-2">VaR (95%)</div>
                                        <div class="h5 fw-light mb-0 text-danger" id="var-95-value">--</div>
                                        <div class="text-white-50" style="font-size: 0.7rem;">Maximum Loss</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="glass-card p-3 text-center">
                                        <div class="text-white-50 small mb-2">CVaR (95%)</div>
                                        <div class="h5 fw-light mb-0 text-danger" id="cvar-95-value">--</div>
                                        <div class="text-white-50" style="font-size: 0.7rem;">Avg. Loss (Worst 5%)</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="glass-card p-3 text-center">
                                        <div class="text-white-50 small mb-2">Sharpe Ratio</div>
                                        <div class="h5 fw-light mb-0" id="sharpe-ratio-value">--</div>
                                        <div class="text-white-50" style="font-size: 0.7rem;">Risk-Adjusted Return</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="glass-card p-3 text-center">
                                        <div class="text-white-50 small mb-2">Expected Return</div>
                                        <div class="h5 fw-light mb-0" id="expected-return-value">--</div>
                                        <div class="text-white-50" style="font-size: 0.7rem;">1 Year Projection</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Risk Distribution Chart -->
                            <div class="glass-card mb-4 p-4">
                                <div id="shares-risk-chart" style="min-height: 400px;">
                                    <div class="text-center py-5">
                                        <div class="spinner-border text-light" role="status"
                                            style="width: 3rem; height: 3rem;">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                        <p class="text-white-50 mt-3">Loading risk analysis...</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Risk Info Card -->
                            <div class="glass-card p-4">
                                <h4 class="h6 fw-light mb-3 text-white">Understanding Risk Metrics</h4>
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <div class="text-white-50 small">
                                            <strong class="text-white">VaR (Value at Risk):</strong><br>
                                            Maximum expected loss at 95% confidence. There's only a 5% chance of losing
                                            more.
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="text-white-50 small">
                                            <strong class="text-white">CVaR (Conditional VaR):</strong><br>
                                            Average loss in the worst 5% of scenarios. Shows tail risk exposure.
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="text-white-50 small">
                                            <strong class="text-white">Sharpe Ratio:</strong><br>
                                            Risk-adjusted return. >1 is good, >2 is excellent. Negative means loss.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Panel: Insights & Sentiment -->
                        <div class="ai-lab-panel" id="ai-lab-panel-insights-sentiment" style="display: none;">
                            <div class="glass-card p-4">
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                    <h3 class="h5 fw-light text-white mb-0">
                                        <span
                                            style="background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">AI-Generated
                                            Insights</span>
                                    </h3>
                                    <button class="glass-button btn-sm px-2 py-1" onclick="loadAIInsights()"
                                        title="Refresh">
                                        <svg width="12" height="12" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                            </path>
                                        </svg>
                                    </button>
                                </div>
                                <div id="ai-insights-feed">
                                    <div class="text-center py-4">
                                        <div class="spinner-border text-light" role="status"
                                            style="width: 2rem; height: 2rem;">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                        <p class="text-white-50 mt-2 small">Generating AI insights...</p>
                                    </div>
                                </div>
                            </div>

                            <!-- How It Works Card -->
                            <div class="glass-card p-4 mt-4">
                                <h4 class="h6 fw-light mb-3 text-white">How AI Insights Work</h4>
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <div class="text-white-50 small">
                                            <strong class="text-white">üìä Data Collection:</strong><br>
                                            Analyzes 3-month price data, moving averages, volume trends, and volatility
                                            for each stock.
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="text-white-50 small">
                                            <strong class="text-white">ü§ñ AI Analysis:</strong><br>
                                            Google Gemini processes the data to identify patterns, risks, and
                                            opportunities.
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="text-white-50 small">
                                            <strong class="text-white">üí° Actionable Output:</strong><br>
                                            Categorized insights with severity levels help you make informed decisions.
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ‚ïê‚ïê‚ïê Section Divider: Sentiment Analysis ‚ïê‚ïê‚ïê -->
                            <div class="ai-lab-section-divider">
                                <div class="divider-line"></div>
                                <span class="divider-label">üì∞ Sentiment Analysis</span>
                                <div class="divider-line"></div>
                            </div>

                            <!-- Header -->
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h3 class="h5 fw-light text-white mb-0">
                                    üì∞ Sentiment Analysis
                                    <span class="badge ms-2"
                                        style="background: rgba(255,255,255,0.08); color: rgba(255,255,255,0.5); font-size: 0.65rem; font-weight: 400;"
                                        id="sentiment-ticker-badge">AAPL</span>
                                </h3>
                                <button class="glass-button btn-sm px-2 py-1" onclick="loadSentimentAnalysis()"
                                    title="Refresh">
                                    <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                        </path>
                                    </svg>
                                </button>
                            </div>

                            <!-- Loading state -->
                            <div id="sentiment-loading" style="display: none;">
                                <div class="glass-card p-5 text-center">
                                    <div class="spinner-border text-light" role="status"
                                        style="width: 2rem; height: 2rem;">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                    <p class="text-white-50 mt-2 small">Analyzing sentiment...</p>
                                </div>
                            </div>

                            <!-- Sentiment content (hidden until data loads) -->
                            <div id="sentiment-content" style="display: none;">

                                <!-- Metric Cards Row -->
                                <div class="row g-3 mb-4">
                                    <!-- Overall Score -->
                                    <div class="col-md-3 col-6">
                                        <div class="glass-card p-3 text-center">
                                            <div class="text-white-50 small mb-2">Overall Score</div>
                                            <div id="sentiment-score-display"
                                                style="font-size: 2rem; font-weight: 300; line-height: 1;">
                                                --
                                            </div>
                                            <div id="sentiment-classification" class="small mt-1"
                                                style="color: rgba(255,255,255,0.5);">--</div>
                                        </div>
                                    </div>
                                    <!-- Confidence -->
                                    <div class="col-md-3 col-6">
                                        <div class="glass-card p-3 text-center">
                                            <div class="text-white-50 small mb-2">Confidence</div>
                                            <div id="sentiment-confidence"
                                                style="font-size: 2rem; font-weight: 300; color: #a78bfa; line-height: 1;">
                                                --
                                            </div>
                                            <div class="text-white-50 small mt-1">Source agreement</div>
                                        </div>
                                    </div>
                                    <!-- Trend -->
                                    <div class="col-md-3 col-6">
                                        <div class="glass-card p-3 text-center">
                                            <div class="text-white-50 small mb-2">Trend</div>
                                            <div id="sentiment-trend"
                                                style="font-size: 1.4rem; font-weight: 400; line-height: 1;">
                                                --
                                            </div>
                                            <div class="text-white-50 small mt-1">Direction</div>
                                        </div>
                                    </div>
                                    <!-- Social Mentions -->
                                    <div class="col-md-3 col-6">
                                        <div class="glass-card p-3 text-center">
                                            <div class="text-white-50 small mb-2">Social Mentions</div>
                                            <div id="sentiment-mentions"
                                                style="font-size: 2rem; font-weight: 300; color: #60a5fa; line-height: 1;">
                                                --
                                            </div>
                                            <div class="text-white-50 small mt-1">Last 24h</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Two column layout: Source Breakdown + Headlines -->
                                <div class="row g-3 mb-4">
                                    <!-- Source Breakdown -->
                                    <div class="col-md-5">
                                        <div class="glass-card p-4 h-100">
                                            <h4 class="h6 fw-light text-white mb-3">Sentiment Breakdown</h4>
                                            <div id="sentiment-breakdown-bars">
                                                <!-- JS fills these -->
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Recent Headlines -->
                                    <div class="col-md-7">
                                        <div class="glass-card p-4 h-100">
                                            <h4 class="h6 fw-light text-white mb-3">Recent Headlines</h4>
                                            <div id="sentiment-headlines-feed">
                                                <!-- JS fills these -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Social Buzz -->
                                <div class="glass-card p-4 mb-4">
                                    <h4 class="h6 fw-light text-white mb-3">Social Buzz</h4>
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <div class="text-white-50 small mb-2">Trending Tags</div>
                                            <div id="sentiment-hashtags" class="d-flex flex-wrap gap-2">
                                                <!-- JS fills -->
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="text-white-50 small mb-2">Top Keywords</div>
                                            <div id="sentiment-keywords" class="d-flex flex-wrap gap-2">
                                                <!-- JS fills -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Sentiment History Chart -->
                                <div class="glass-card p-4 mb-4">
                                    <h4 class="h6 fw-light text-white mb-3">30-Day Sentiment History</h4>
                                    <div style="height: 260px;">
                                        <canvas id="sentiment-history-chart"></canvas>
                                    </div>
                                </div>

                                <!-- How it works -->
                                <div class="glass-card p-4">
                                    <h4 class="h6 fw-light mb-3 text-white">How Sentiment Analysis Works</h4>
                                    <div class="row g-3">
                                        <div class="col-md-4">
                                            <div class="text-white-50 small">
                                                <strong class="text-white">üì∞ News Scraping:</strong><br>
                                                Fetches real-time headlines from multiple news APIs and analyzes each
                                                with VADER sentiment scoring.
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="text-white-50 small">
                                                <strong class="text-white">üìä Multi-Source:</strong><br>
                                                Combines news (45%), social (25%), technical (20%), and market signals
                                                (10%) into a weighted score.
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="text-white-50 small">
                                                <strong class="text-white">üéØ Confidence:</strong><br>
                                                Confidence increases when sources agree. High confidence = reliable
                                                signal across all channels.
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- Tab Panel: Anomaly & Correlation -->
                    <div class="ai-lab-panel" id="ai-lab-panel-anomaly-correlation" style="display: none;">

                        <!-- Correlation Analysis Section -->
                        <div class="glass-card p-4 mb-4">
                            <div class="d-flex align-items-center justify-content-between mb-3">
                                <h3 class="h5 fw-light text-white mb-0">
                                    <span
                                        style="background: linear-gradient(135deg, #a78bfa, #6366f1); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">Correlation
                                        Analysis</span>
                                </h3>
                                <button class="glass-button btn-sm px-2 py-1" onclick="loadCorrelationAnalysis()"
                                    title="Refresh">
                                    <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                        </path>
                                    </svg>
                                </button>
                            </div>
                            <p class="text-white-50 small mb-3">Pearson correlation matrix shows how your holdings move
                                together ‚Äî lower correlation = better diversification</p>

                            <!-- Diversification Score + Heatmap -->
                            <div class="row g-3 mb-4">
                                <!-- Diversification Gauge -->
                                <div class="col-md-4">
                                    <div class="glass-card p-4 text-center h-100">
                                        <div class="text-white-50 small mb-2">Diversification Score</div>
                                        <div id="diversification-score"
                                            style="font-size: 3rem; font-weight: 200; line-height: 1;">--</div>
                                        <div id="diversification-label" class="text-white-50 small mt-1">out of 100
                                        </div>
                                        <div class="mt-3">
                                            <div
                                                style="background: rgba(255,255,255,0.1); border-radius: 10px; height: 8px; overflow: hidden;">
                                                <div id="diversification-bar"
                                                    style="height: 100%; border-radius: 10px; width: 0%; transition: width 1s ease;">
                                                </div>
                                            </div>
                                        </div>
                                        <div id="diversification-avg" class="text-white-50 small mt-2">Avg correlation:
                                            --</div>
                                    </div>
                                </div>
                                <!-- Heatmap -->
                                <div class="col-md-8">
                                    <div class="glass-card p-4 h-100">
                                        <h4 class="h6 fw-light text-white mb-3">Correlation Heatmap</h4>
                                        <div id="correlation-heatmap" style="min-height: 200px;">
                                            <div class="text-center py-4">
                                                <div class="spinner-border spinner-border-sm text-primary"
                                                    role="status">
                                                </div>
                                                <div class="text-white-50 small mt-2">Computing correlations...</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Insights & Warnings -->
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="glass-card p-4 h-100">
                                        <h4 class="h6 fw-light text-white mb-3">‚ö° Warnings</h4>
                                        <div id="correlation-warnings">
                                            <div class="text-white-50 small">No warnings yet</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="glass-card p-4 h-100">
                                        <h4 class="h6 fw-light text-white mb-3">‚óà Insights</h4>
                                        <div id="correlation-insights">
                                            <div class="text-white-50 small">No insights yet</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- How Correlation Analysis Works -->
                        <div class="glass-card p-4 mb-4">
                            <h4 class="h6 fw-light mb-3 text-white">How Correlation Analysis Works</h4>
                            <div class="text-white-50 small">
                                üìä Computes Pearson correlation coefficients on 3 months of daily returns.
                                Diversification score = (1 - avg correlation) √ó 100. Lower correlation between
                                holdings = better risk diversification.
                            </div>
                        </div>

                        <!-- Anomaly Detection Section -->
                        <div class="glass-card p-4 mb-4">
                            <div class="d-flex align-items-center justify-content-between mb-3">
                                <h3 class="h5 fw-light text-white mb-0">
                                    <span
                                        style="background: linear-gradient(135deg, #2dd4bf, #06b6d4); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">Anomaly
                                        Detection</span>
                                </h3>
                                <button class="glass-button btn-sm px-2 py-1" onclick="loadAnomalyDetection()"
                                    title="Refresh">
                                    <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                        </path>
                                    </svg>
                                </button>
                            </div>
                            <p class="text-white-50 small mb-3">Isolation Forest ML model scans your holdings for
                                unusual price movements and volume spikes</p>

                            <!-- Summary Stats -->
                            <div class="row g-3 mb-4">
                                <div class="col-md-3 col-6">
                                    <div class="glass-card p-3 text-center">
                                        <div class="text-white-50 small mb-1">Total Anomalies</div>
                                        <div id="anomaly-total"
                                            style="font-size: 2rem; font-weight: 300; color: #60a5fa;">
                                            --</div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-6">
                                    <div class="glass-card p-3 text-center">
                                        <div class="text-white-50 small mb-1">High Severity</div>
                                        <div id="anomaly-high"
                                            style="font-size: 2rem; font-weight: 300; color: #fb7185;">--
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-6">
                                    <div class="glass-card p-3 text-center">
                                        <div class="text-white-50 small mb-1">Medium Severity</div>
                                        <div id="anomaly-medium"
                                            style="font-size: 2rem; font-weight: 300; color: #fcd34d;">
                                            --</div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-6">
                                    <div class="glass-card p-3 text-center">
                                        <div class="text-white-50 small mb-1">Tickers Analyzed</div>
                                        <div id="anomaly-tickers"
                                            style="font-size: 2rem; font-weight: 300; color: #94a3b8;">--</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Anomaly Timeline -->
                            <div id="anomaly-timeline">
                                <div class="text-center py-4">
                                    <div class="spinner-border spinner-border-sm text-primary" role="status"></div>
                                    <div class="text-white-50 small mt-2">Running Isolation Forest analysis...</div>
                                </div>
                            </div>
                        </div>

                        <!-- How Anomaly Detection Works -->
                        <div class="glass-card p-4">
                            <h4 class="h6 fw-light mb-3 text-white">How Anomaly Detection Works</h4>
                            <div class="text-white-50 small">
                                üîç Uses scikit-learn's Isolation Forest on 6 months of price returns, volume
                                changes, and price gaps. Anomalies are events that deviate significantly from
                                learned patterns.
                            </div>
                        </div>

                    </div>
                </div>

                <div class="module-content" id="module-bonds">
                    <!-- 1. Overview Section -->
                    <div id="bonds-section-overview" class="bonds-section active">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Portfolio Overview</h2>
                            <p class="text-white-50 fw-light">Capital stability and fixed income
                                performance</p>
                        </div>

                        <!-- Main Chart Container -->
                        <div class="glass-panel p-4 mb-4" style="min-height: 400px;">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <div>
                                    <h3 class="h5 fw-light mb-1">Fixed Income Trend</h3>
                                    <p class="text-white-50 small mb-0">Projected monthly coupon
                                        payments</p>
                                </div>
                                <button class="btn btn-sm btn-icon-glass text-white-50">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="12" y1="16" x2="12" y2="12"></line>
                                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                                    </svg>
                                </button>
                            </div>
                            <!-- Reserved for Chart -->
                            <div id="bonds-trend-chart" style="height: 300px; width: 100%;"></div>
                        </div>

                        <!-- Bond Allocation Charts -->
                        <div class="row g-4 mb-4">
                            <!-- Bond Type Allocation (Left) -->
                            <div class="col-lg-6">
                                <div class="glass-panel p-4 h-100">
                                    <h3 class="h5 fw-light mb-4">Bond Allocation by Type</h3>
                                    <div style="height: 250px; width: 100%;">
                                        <canvas id="bondsTypeChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            <!-- Top Bond Holdings (Right) -->
                            <div class="col-lg-6">
                                <div class="glass-panel p-4 h-100">
                                    <h3 class="h5 fw-light mb-4">Top Bond Holdings</h3>
                                    <div style="height: 250px; width: 100%;">
                                        <canvas id="bondsTopHoldingsChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Metrics Row -->
                        <div class="row g-4">
                            <!-- Metric 1 -->
                            <div class="col-md-3 col-lg-2dot4">
                                <div class="glass-card p-4 h-100">
                                    <div class="d-flex align-items-center gap-2 mb-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-white-50">
                                            <rect width="20" height="14" x="2" y="5" rx="2" />
                                            <line x1="2" x2="22" y1="10" y2="10" />
                                        </svg>
                                        <span class="text-white-50 small text-uppercase spacing-1">Total
                                            Bond
                                            Value</span>
                                    </div>
                                    <h3 class="h4 fw-light mb-1 text-white" id="bonds-overview-total-value">--</h3>
                                    <p class="small text-white-50">Current Market Value</p>
                                </div>
                            </div>
                            <!-- Metric 2 -->
                            <div class="col-md-3 col-lg-2dot4">
                                <div class="glass-card p-4 h-100">
                                    <div class="d-flex align-items-center gap-2 mb-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-white-50">
                                            <rect width="18" height="18" x="3" y="4" rx="2" ry="2" />
                                            <line x1="16" x2="16" y1="2" y2="6" />
                                            <line x1="8" x2="8" y1="2" y2="6" />
                                            <line x1="3" x2="21" y1="10" y2="10" />
                                        </svg>
                                        <span class="text-white-50 small text-uppercase spacing-1">Annual
                                            Fixed
                                            Income</span>
                                    </div>
                                    <h3 class="h4 fw-light mb-1 text-white" id="bonds-overview-annual-income">--</h3>
                                    <p class="small text-white-50">Projected Interest</p>
                                </div>
                            </div>
                            <!-- Metric 3 -->
                            <div class="col-md-3 col-lg-2dot4">
                                <div class="glass-card p-4 h-100">
                                    <div class="d-flex align-items-center gap-2 mb-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-white-50">
                                            <polyline points="22 7 13.5 15.5 8.5 10.5 2 17" />
                                            <polyline points="16 7 22 7 22 13" />
                                        </svg>
                                        <span class="text-white-50 small text-uppercase spacing-1">Average
                                            Yield</span>
                                    </div>
                                    <h3 class="h4 fw-light mb-1 text-white" id="bonds-overview-avg-yield">--</h3>
                                    <p class="small text-white-50">Yield to Maturity</p>
                                </div>
                            </div>
                            <!-- Metric 4 -->
                            <div class="col-md-3 col-lg-2dot4">
                                <div class="glass-card p-4 h-100">
                                    <div class="d-flex align-items-center gap-2 mb-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-white-50">
                                            <circle cx="12" cy="12" r="10" />
                                            <polyline points="12 6 12 12 16 14" />
                                        </svg>
                                        <span class="text-white-50 small text-uppercase spacing-1">Next
                                            Maturity</span>
                                    </div>
                                    <h3 class="h4 fw-light mb-1 text-white" id="bonds-overview-next-maturity">--</h3>
                                    <p class="small text-white-50" id="bonds-overview-next-maturity-date">Upcoming Date
                                    </p>
                                </div>
                            </div>
                            <!-- Metric 5 -->
                            <div class="col-md-3 col-lg-2dot4">
                                <div class="glass-card p-4 h-100">
                                    <div class="d-flex align-items-center gap-2 mb-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-white-50">
                                            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
                                            <circle cx="9" cy="7" r="4" />
                                            <path d="M22 21v-2a4 4 0 0 0-3-3.87" />
                                            <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                                        </svg>
                                        <span class="text-white-50 small text-uppercase spacing-1">Active
                                            Bonds</span>
                                    </div>
                                    <h3 class="h4 fw-light mb-1 text-white" id="bonds-overview-total-count">0</h3>
                                    <p class="small text-white-50">Currently Active Instruments</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 2. Holdings Section -->
                    <div id="bonds-section-holdings" class="bonds-section" style="display: none;">
                        <div class="glass-header mb-4 d-flex justify-content-between align-items-end">
                            <div>
                                <h2 class="h3 fw-light mb-2">Holdings</h2>
                                <p class="text-white-50 fw-light">Breakdown of recurring capital
                                    inflows</p>
                            </div>
                            <button class="glass-button px-4 py-2 rounded-pill small" onclick="openAddBondModal()">
                                <span>+</span> Add Bond
                            </button>
                        </div>
                        <div class="row g-4">
                            <!-- Income by Type Chart -->
                            <div class="col-lg-6">
                                <div class="glass-card p-4 h-100">
                                    <h3 class="h5 fw-light text-white-90 mb-4">Income by Bond Type
                                    </h3>
                                    <div style="height: 300px; position: relative;">
                                        <canvas id="bondsIncomeChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            <!-- Top Payers List -->
                            <div class="col-lg-6">
                                <div class="glass-card p-4 h-100">
                                    <h3 class="h5 fw-light text-white-90 mb-4">Top Income Generators
                                    </h3>
                                    <div id="bonds-top-payers-list" class="d-flex flex-column gap-3 custom-scrollbar"
                                        style="max-height: 320px; overflow-y: auto; padding-right: 8px;">
                                        <!-- Injected via JS -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 3. Maturity Schedule Section -->
                    <div id="bonds-section-maturity" class="bonds-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Maturity Schedule</h2>
                            <p class="text-white-50 fw-light">Timeline of capital returns and corpus
                                liquidity</p>
                        </div>
                        <div id="bonds-maturity-list" class="d-flex flex-column gap-3">
                            <!-- Injected via JS -->
                        </div>
                    </div>

                    <!-- 4. Bond Allocation Section -->
                    <div id="bonds-section-bond-allocation" class="bonds-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Asset Allocation</h2>
                            <p class="text-white-50 fw-light">Exposure by issuer category</p>
                        </div>
                        <div class="row g-4 align-items-center" style="min-height: 500px;">
                            <!-- Chart Ring -->
                            <div class="col-lg-6">
                                <div style="height: 350px; position: relative;">
                                    <canvas id="bondsAllocationChart"></canvas>
                                    <div class="position-absolute top-50 start-50 translate-middle text-center"
                                        style="pointer-events: none;">
                                        <p class="text-white-50 small text-uppercase spacing-1 mb-2">
                                            Total Corpus</p>
                                        <p class="h3 fw-light text-white-90" id="bonds-total-corpus">--</p>
                                    </div>
                                </div>
                            </div>
                            <!-- Legend -->
                            <div class="col-lg-6">
                                <div id="bonds-allocation-legend" class="glass-card p-4 d-flex flex-column gap-3"
                                    style="background: rgba(255,255,255,0.02);">
                                    <!-- Injected via JS -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 5. Yield Analysis Section -->
                    <div id="bonds-section-yield-analysis" class="bonds-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Yield Analysis</h2>
                            <p class="text-white-50 fw-light">Performance efficiency across bond
                                categories</p>
                        </div>

                        <!-- Yield Cards Container -->
                        <div id="bonds-yield-grid" class="row g-4">
                            <!-- Injected via JS -->
                        </div>
                    </div>

                    <!-- 6. AI Insights Section -->

                    <div id="bonds-section-ai-lab" class="bonds-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">AI Lab</h2>
                            <p class="text-white-50 fw-light">Intelligent fixed income analysis & recommendations</p>
                        </div>

                        <!-- AI Lab Premium Navigation -->
                        <div class="glass-card mb-4 p-3" id="bonds-ai-lab-tabs">
                            <div class="d-flex align-items-center justify-content-between mb-3 px-1">
                                <span class="text-white-50 small fw-medium"
                                    style="letter-spacing: 0.08em; text-transform: uppercase; font-size: 0.65rem;">Select
                                    Feature</span>
                            </div>
                            <div class="ai-lab-tab-grid">
                                <button type="button" class="ai-lab-tab active" data-tab="bonds-ai-yield-curve"
                                    onclick="switchBondsAILabTab('yield-curve', this)">
                                    <div class="tab-icon-wrap">üìâ</div>
                                    <div class="tab-content">
                                        <span class="tab-title">Yield Curve Forecaster</span>
                                        <span class="tab-desc">Time-Series Prediction</span>
                                    </div>
                                </button>
                                <button type="button" class="ai-lab-tab" data-tab="bonds-ai-insights"
                                    onclick="switchBondsAILabTab('insights', this)">
                                    <div class="tab-icon-wrap">üß†</div>
                                    <div class="tab-content">
                                        <span class="tab-title">Insights & Sentiment</span>
                                        <span class="tab-desc">Portfolio Intelligence & News</span>
                                    </div>
                                    <span class="tab-badge"
                                        style="background: rgba(239, 68, 68, 0.3); color: #ef4444;">AI</span>
                                </button>
                                <button type="button" class="ai-lab-tab" data-tab="bonds-ai-fair-value"
                                    onclick="switchBondsAILabTab('fair-value', this)">
                                    <div class="tab-icon-wrap">‚öñÔ∏è</div>
                                    <div class="tab-content">
                                        <span class="tab-title">Fair Value Engine</span>
                                        <span class="tab-desc">Illiquid Bond Pricing</span>
                                    </div>
                                    <span class="tab-badge"
                                        style="background: rgba(168, 85, 247, 0.3); color: #c084fc;">AI</span>
                                </button>
                            </div>
                        </div>

                        <!-- Tab Content Containers -->
                        <div class="ai-lab-content-area position-relative shadow-container" style="min-height: 400px;">

                            <!-- 1. Yield Curve Forecaster Content -->
                            <div id="bonds-ai-yield-curve" class="bonds-ai-pane active">
                                <div class="glass-card p-4">
                                    <div class="d-flex justify-content-between align-items-center mb-4">
                                        <div>
                                            <h3 class="h5 fw-light text-white mb-1">Yield Curve Forecast</h3>
                                            <p class="text-white-50 small mb-0">Predicting future interest rate shifts
                                                across maturities</p>
                                        </div>
                                        <!-- Model Selection & Controls -->
                                        <div class="d-flex gap-3 align-items-center">
                                            <div class="d-flex align-items-center gap-2">
                                                <span class="small text-white-50">Prediction Window:</span>
                                                <select id="yieldForecastHorizon"
                                                    class="form-select form-select-sm bg-dark text-white border-secondary shadow-none"
                                                    style="width: 120px;" onchange="updateYieldForecast()">
                                                    <option value="1">1 Month</option>
                                                    <option value="3" selected>3 Months</option>
                                                    <option value="6">6 Months</option>
                                                    <option value="12">1 Year</option>
                                                </select>
                                            </div>
                                            <div class="d-flex align-items-center gap-2 px-3 py-1 rounded-pill"
                                                style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2);">
                                                <div
                                                    style="width: 6px; height: 6px; border-radius: 50%; background: #10b981; box-shadow: 0 0 8px #10b981;">
                                                </div>
                                                <span class="small text-white" style="font-size: 0.75rem;">LSTM
                                                    Active</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Yield Curve Chart Container -->
                                    <div style="height: 350px; position: relative;">
                                        <canvas id="yieldCurveForecastChart"></canvas>
                                    </div>

                                    <div class="mt-4 p-3 rounded-3"
                                        style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);">
                                        <div class="d-flex gap-3">
                                            <div class="fs-4">ü§ñ</div>
                                            <div>
                                                <h4 class="h6 text-white mb-1">AI Insight</h4>
                                                <p id="yieldCurveInsight" class="text-white-50 small mb-0">
                                                    Loading AI analysis of the current yield environment...
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- ‚ïê‚ïê‚ïê‚ïê Section Divider: Inflation Simulator ‚ïê‚ïê‚ïê‚ïê -->
                                    <div class="ai-lab-section-divider mt-5 mb-4 position-relative">
                                        <div class="d-flex align-items-center gap-3">
                                            <div class="flex-grow-1"
                                                style="height: 1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1));">
                                            </div>
                                            <span
                                                class="text-white-50 small text-uppercase tracking-wider fw-medium">Inflation
                                                Impact Simulator</span>
                                            <div class="flex-grow-1"
                                                style="height: 1px; background: linear-gradient(90deg, rgba(255,255,255,0.1), transparent);">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="d-flex justify-content-between align-items-end mb-4">
                                        <div>
                                            <h3 class="h5 fw-light text-white mb-1">Purchasing Power Erosion</h3>
                                            <p class="text-white-50 small mb-0">Visualize how compounding inflation
                                                affects real yields over time</p>
                                        </div>
                                        <!-- Inflation Slider Control -->
                                        <div class="text-end" style="width: 200px;">
                                            <div class="d-flex justify-content-between mb-1">
                                                <label class="text-white-70 small">Expected Inflation:</label>
                                                <span id="inflationRateDisplay"
                                                    class="text-warning small fw-bold">4.0%</span>
                                            </div>
                                            <input type="range" class="form-range custom-range-warning"
                                                id="inflationSlider" min="1.0" max="10.0" step="0.5" value="4.0"
                                                oninput="updateInflationSimulation()">
                                        </div>
                                    </div>

                                    <!-- Inflation Chart Container -->
                                    <div style="height: 350px; position: relative;">
                                        <canvas id="inflationSimulatorChart"></canvas>
                                    </div>

                                    <div class="mt-4 p-3 rounded-3"
                                        style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);">
                                        <div class="d-flex gap-3">
                                            <div class="fs-4">ü§ñ</div>
                                            <div>
                                                <h4 class="h6 text-white mb-1">Real Yield Analysis</h4>
                                                <p id="inflationInsight" class="text-white-50 small mb-0">
                                                    At 4.0% inflation, your nominal yield is losing significant
                                                    purchasing power over a 10-year horizon.
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <!-- 2. Insights & Sentiment Content -->
                            <div id="bonds-ai-insights" class="bonds-ai-pane" style="display: none;">
                                <div class="glass-card p-4 h-100 d-flex flex-column gap-5">

                                    <!-- SECTION 1: AI-Generated Insights -->
                                    <div>
                                        <div class="d-flex align-items-center justify-content-between mb-3">
                                            <h3 class="h5 fw-light text-white mb-0">
                                                <span
                                                    style="background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">AI-Generated
                                                    Insights</span>
                                            </h3>
                                            <button class="glass-button btn-sm px-2 py-1"
                                                onclick="renderBondsPortfolioInsights()" title="Refresh">
                                                <svg width="12" height="12" fill="none" stroke="currentColor"
                                                    viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2"
                                                        d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                                    </path>
                                                </svg>
                                            </button>
                                        </div>

                                        <!-- AI Insights Container -->
                                        <div id="bonds-portfolio-insights-container" class="d-flex flex-column gap-3">
                                            <!-- Dynamically injected via JS -->
                                            <div class="text-center py-4">
                                                <div class="spinner-border spinner-border-sm text-white-50"
                                                    role="status"></div>
                                                <span class="ms-2 text-white-50 small">Generating insights...</span>
                                            </div>
                                        </div>
                                    </div>


                                    <!-- Sleek Divider -->
                                    <div class="d-flex align-items-center gap-3">
                                        <div class="flex-grow-1"
                                            style="height: 1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1));">
                                        </div>
                                        <div class="flex-grow-1"
                                            style="height: 1px; background: linear-gradient(90deg, rgba(255,255,255,0.1), transparent);">
                                        </div>
                                    </div>

                                    <!-- SECTION 2: Market Sentiment -->
                                    <div>
                                        <div class="d-flex align-items-center justify-content-between mb-4">
                                            <div>
                                                <div class="d-flex align-items-center gap-2 mb-1">
                                                    <h3 class="h5 fw-light text-white mb-0">Market Sentiment News</h3>
                                                    <span
                                                        class="badge rounded-pill bg-success bg-opacity-10 text-success border border-success border-opacity-25"
                                                        style="font-size: 0.70rem;">Overall: Bullish</span>
                                                </div>
                                                <p class="text-white-50 small mb-0">Real-time events affecting your
                                                    bonds</p>
                                            </div>
                                        </div>

                                        <!-- News Grid Container -->
                                        <div id="bonds-sentiment-news-grid" class="row g-3">
                                            <!-- Dynamically injected via JS -->
                                            <div class="col-12 text-center py-4">
                                                <div class="spinner-border spinner-border-sm text-white-50"
                                                    role="status"></div>
                                                <span class="ms-2 text-white-50 small">Fetching market
                                                    sentiment...</span>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <!-- 3. Fair Value Engine Content -->
                            <div id="bonds-ai-fair-value" class="bonds-ai-pane" style="display: none;">
                                <div class="glass-card p-5 text-center d-flex flex-column align-items-center justify-content-center"
                                    style="min-height: 400px;">
                                    <h3 class="h4 fw-light text-white mb-2">Fair Value Engine</h3>
                                    <p class="text-white-50 small mb-0">Feature in development</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="module-content" id="module-business">

                    <!-- 1. Business Dashboard Section -->
                    <div id="business-section-dashboard" class="business-section">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Business Dashboard</h2>
                            <p class="text-white-50 fw-light">Portfolio-wide operational
                                intelligence</p>
                        </div>

                        <!-- 0. Performance Chart -->
                        <!-- 0. Performance Chart -->
                        <div class="glass-card p-4 p-md-5 mb-4 position-relative overflow-hidden">
                            <!-- Decorative Glow -->
                            <div class="position-absolute top-0 end-0 w-50 h-50 rounded-circle"
                                style="background: radial-gradient(circle, rgba(255,255,255,0.03) 0%, transparent 70%); filter: blur(50px); pointer-events: none;">
                            </div>

                            <div class="d-flex align-items-center justify-content-between mb-4 position-relative">
                                <div>
                                    <h3 class="small fw-medium text-white-70 text-uppercase tracking-wider mb-1">
                                        Performance</h3>
                                    <h2 class="h3 fw-light text-white mb-0">Revenue & Profit</h2>
                                </div>
                                <div class="d-flex gap-2">
                                    <button
                                        class="px-3 py-1 rounded-pill small transition-colors text-white-70 hover-white"
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">Yearly</button>
                                </div>
                            </div>
                            <div style="height: 350px; position: relative;">
                                <canvas id="businessRevenueChart"></canvas>
                            </div>
                        </div>

                        <!-- Summary Cards Grid -->
                        <div id="business-summary-cards" class="row g-4 mb-4">
                            <!-- Injected via JS -->
                        </div>

                        <!-- Health Indicator -->
                        <div id="business-health-indicator" class="glass-card p-4 mb-4">
                            <!-- Injected via JS -->
                        </div>

                        <!-- Business Grid Overview -->
                        <div class="glass-card p-4">
                            <h3 class="h5 fw-light text-white mb-4">Business Portfolio</h3>
                            <div id="business-dashboard-grid" class="row g-4">
                                <!-- Injected via JS -->
                            </div>
                        </div>
                    </div>

                    <!-- 2. Ventures Section -->
                    <div id="business-section-ventures" class="business-section" style="display: none;">
                        <div class="glass-header mb-4 d-flex justify-content-between align-items-start">
                            <div>
                                <h2 class="h3 fw-light mb-2">Ventures</h2>
                                <p class="text-white-50 fw-light mb-0">Your business portfolio and
                                    ownership stakes</p>
                            </div>
                            <button onclick="openAddBusinessModal()"
                                class="btn glass-button px-4 py-2 d-flex align-items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                                <span>Add Business</span>
                            </button>
                        </div>
                        <div id="business-ventures-grid" class="row g-4">
                            <!-- Injected via JS -->
                        </div>
                    </div>

                    <!-- 3. Cash Flow Section -->
                    <div id="business-section-cash-flow" class="business-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Cash Flow</h2>
                            <p class="text-white-50 fw-light">Track money movement across your
                                businesses</p>
                        </div>

                        <!-- Filters -->
                        <div class="d-flex gap-3 mb-4 flex-wrap align-items-center justify-content-between">
                            <div class="d-flex gap-3">
                                <select id="business-cf-filter-business" class="form-select glass-input"
                                    style="max-width: 200px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                    <option value="all">All Businesses</option>
                                </select>
                                <select id="business-cf-filter-type" class="form-select glass-input"
                                    style="max-width: 150px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                    <option value="all">All Types</option>
                                    <option value="Income">Income</option>
                                    <option value="Expense">Expense</option>
                                    <option value="Investment">Investment</option>
                                    <option value="Transfer">Transfer</option>
                                </select>
                            </div>
                            <button onclick="openAddTransactionModal()"
                                class="btn glass-button px-4 py-2 d-flex align-items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                                <span>New Entry</span>
                            </button>
                        </div>

                        <!-- Transactions List -->
                        <div id="business-cf-transactions">
                            <!-- Injected via JS -->
                        </div>
                    </div>

                    <!-- 4. Statements Section -->
                    <div id="business-section-statements" class="business-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">Statements</h2>
                            <p class="text-white-50 fw-light">Financial clarity without complexity
                            </p>
                        </div>

                        <!-- P&L Section -->
                        <div class="glass-card p-4 mb-4">
                            <h3 class="h5 fw-light text-white mb-4">Profit & Loss Statement</h3>
                            <div id="business-pl-statements">
                                <!-- Injected via JS -->
                            </div>
                        </div>

                        <!-- Balance Sheet Section -->
                        <div class="glass-card p-4 mb-4">
                            <h3 class="h5 fw-light text-white mb-4">Balance Sheet (Simplified)</h3>
                            <div id="business-balance-sheets">
                                <!-- Injected via JS -->
                            </div>
                        </div>

                    </div>

                    <!-- 4.1 Documentation Section (New) -->
                    <!-- 4.1 Documentation Section (New) -->
                    <div id="business-section-documentation" class="business-section" style="display: none;">
                        <div class="glass-header mb-4 d-flex justify-content-between align-items-end">
                            <div>
                                <h2 class="h3 fw-light mb-2">Documents</h2>
                                <p class="text-white-50 fw-light">All your business legal, financial
                                    and property
                                    records</p>
                            </div>
                            <button onclick="openAddDocumentModal()"
                                class="glass-button px-4 py-2 rounded-pill small d-flex align-items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                                <span>Add Document</span>
                            </button>
                        </div>

                        <!-- Documents List (Grouped) -->
                        <div id="business-documents-grouped">
                            <!-- Injected via JS - grouped by business -->
                        </div>
                    </div>

                    <!-- 5. AI Insights Section -->
                    <div id="business-section-ai-lab" class="business-section" style="display: none;">
                        <div class="glass-header mb-4">
                            <h2 class="h3 fw-light mb-2">AI Lab</h2>
                            <p class="text-white-50 fw-light">Decision intelligence powered by your business data</p>
                        </div>

                        <!-- Coming Soon Placeholder -->
                        <div class="glass-card p-5 text-center"
                            style="min-height: 400px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                            <div class="mb-4" style="opacity: 0.4;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z" />
                                </svg>
                            </div>
                            <h3 class="h4 fw-light text-white mb-2">Coming Soon</h3>
                            <p class="text-white-50 small mb-0" style="max-width: 340px;">
                                AI-powered business analytics, intelligent trend forecasting, and operational
                                recommendations are coming soon.
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    </div>

    <!-- Property Modal -->
    <div id="property-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1050; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" style="pointer-events: auto;"
            onclick="closePropertyModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 600px; padding: 1rem;">
            <div class="glass-card position-relative d-flex flex-column" id="modal-content-container"
                style="max-height: 90vh; overflow: hidden; padding: 0;">
                <button onclick="closePropertyModal()"
                    class="position-absolute top-0 end-0 m-4 text-white-50 hover-text-white z-3">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
                <div class="overflow-y-auto h-100 w-100 custom-scrollbar" style="padding: 1rem;">
                    <div id="modal-content"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
    <!-- Core & Modules -->
    <script src="js/modules/crypto/crypto-overview.js" defer></script>
    <script src="js/modules/crypto/crypto-transactions.js" defer></script>
    <script src="js/modules/crypto/crypto-insights.js" defer></script>

    <!-- Main Dashboard Logic -->
    <script src="js/real-estate-ai.js?v=12" defer></script>
    <script src="js/dashboard.js?v=223" defer></script>
    <script src="js/share-transactions.js?v=1" defer></script>
    <script src="js/modules/crypto/crypto-wallets.js" defer></script>
    <script src="js/analytics-utils.js" defer></script> <!-- NEW: Analytics Logic -->
    <script src="js/shares-module.js?v=12" defer></script>
    <script src="js/shares-performance.js?v=1" defer></script>
    <script src="js/shares-ai.js?v=9" defer></script> <!-- NEW: AI Lab price predictions -->


    <!-- Add Property Modal -->
    <div id="add-property-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1060; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" style="pointer-events: auto;"
            onclick="closeAddPropertyModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 600px; padding: 1rem;">
            <div class="glass-card position-relative p-0 overflow-hidden" style="border-radius: 1.5rem;">
                <!-- Header -->
                <div
                    class="p-4 border-bottom border-white border-opacity-10 d-flex justify-content-between align-items-center">
                    <div>
                        <h2 class="h4 fw-light text-white-90 mb-1">Add New Property</h2>
                        <p class="small text-white-50 mb-0">Enter property details to add to your
                            portfolio
                        </p>
                    </div>
                    <button onclick="closeAddPropertyModal()"
                        class="btn btn-sm glass-button rounded-circle p-2 d-flex align-items-center justify-content-center"
                        style="width: 32px; height: 32px;">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Form -->
                <div class="p-4">
                    <form id="addPropertyForm" onsubmit="submitAddProperty(event)">
                        <!-- Name -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Property Name
                                *</label>
                            <input type="text" id="propName" class="form-control glass-input text-white fw-light"
                                placeholder="e.g., Sunset Villa" required autocomplete="off"
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                        </div>

                        <!-- Type -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Type of Property
                                *</label>
                            <select id="propType" class="form-select glass-input text-white fw-light" required
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                <option value="Residential" class="text-dark">Residential</option>
                                <option value="Commercial" class="text-dark">Commercial</option>
                                <option value="Land" class="text-dark">Land</option>
                                <option value="Industrial" class="text-dark">Industrial</option>
                                <option value="Vacation" class="text-dark">Vacation Rental</option>
                            </select>
                        </div>


                        <!-- State & City -->
                        <div class="row g-3 mb-3">
                            <div class="col-6">
                                <label class="form-label small text-uppercase text-white-50"
                                    style="letter-spacing: 0.1em; font-size: 0.7rem;">State
                                    *</label>
                                <select id="propState" class="form-select glass-input text-white fw-light" required
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                    <option value="" class="text-dark">Select State</option>
                                    <option value="Andhra Pradesh" class="text-dark">Andhra Pradesh
                                    </option>
                                    <option value="Assam" class="text-dark">Assam</option>
                                    <option value="Bihar" class="text-dark">Bihar</option>
                                    <option value="Chandigarh" class="text-dark">Chandigarh</option>
                                    <option value="Chhattisgarh" class="text-dark">Chhattisgarh
                                    </option>
                                    <option value="Delhi" class="text-dark">Delhi</option>
                                    <option value="Goa" class="text-dark">Goa</option>
                                    <option value="Gujarat" class="text-dark">Gujarat</option>
                                    <option value="Haryana" class="text-dark">Haryana</option>
                                    <option value="Himachal Pradesh" class="text-dark">Himachal
                                        Pradesh</option>
                                    <option value="Jharkhand" class="text-dark">Jharkhand</option>
                                    <option value="Karnataka" class="text-dark">Karnataka</option>
                                    <option value="Kerala" class="text-dark">Kerala</option>
                                    <option value="Madhya Pradesh" class="text-dark">Madhya Pradesh
                                    </option>
                                    <option value="Maharashtra" class="text-dark">Maharashtra
                                    </option>
                                    <option value="Odisha" class="text-dark">Odisha</option>
                                    <option value="Punjab" class="text-dark">Punjab</option>
                                    <option value="Rajasthan" class="text-dark">Rajasthan</option>
                                    <option value="Tamil Nadu" class="text-dark">Tamil Nadu</option>
                                    <option value="Telangana" class="text-dark">Telangana</option>
                                    <option value="Uttar Pradesh" class="text-dark">Uttar Pradesh
                                    </option>
                                    <option value="Uttarakhand" class="text-dark">Uttarakhand
                                    </option>
                                    <option value="West Bengal" class="text-dark">West Bengal
                                    </option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label class="form-label small text-uppercase text-white-50"
                                    style="letter-spacing: 0.1em; font-size: 0.7rem;">City *</label>
                                <input type="text" id="propCity" class="form-control glass-input text-white fw-light"
                                    placeholder="e.g., Mumbai" required autocomplete="off"
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                            </div>
                        </div>

                        <!-- Prices -->
                        <div class="row g-3 mb-3">
                            <div class="col-6">
                                <label class="form-label small text-uppercase text-white-50"
                                    style="letter-spacing: 0.1em; font-size: 0.7rem;">Purchase Price
                                    (‚Çπ)
                                    *</label>
                                <input type="number" id="propPurchasePrice"
                                    class="form-control glass-input text-white fw-light" placeholder="0" required
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                            </div>
                            <div class="col-6">
                                <label class="form-label small text-uppercase text-white-50"
                                    style="letter-spacing: 0.1em; font-size: 0.7rem;">Current Price
                                    (‚Çπ)
                                    *</label>
                                <input type="number" id="propCurrentPrice"
                                    class="form-control glass-input text-white fw-light" placeholder="0" required
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                            </div>
                        </div>

                        <!-- Acquisition Date -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Purchase
                                Date</label>
                            <input type="date" id="propAcquisitionDate"
                                class="form-control glass-input text-white fw-light"
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; color-scheme: dark;">
                        </div>

                        <!-- Coords -->
                        <div class="row g-3 mb-4">
                            <div class="col-6">
                                <label class="form-label small text-uppercase text-white-50"
                                    style="letter-spacing: 0.1em; font-size: 0.7rem;">Longitude</label>
                                <input type="number" step="any" id="propLng"
                                    class="form-control glass-input text-white fw-light" placeholder="0.0000"
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                            </div>
                            <div class="col-6">
                                <label class="form-label small text-uppercase text-white-50"
                                    style="letter-spacing: 0.1em; font-size: 0.7rem;">Latitude</label>
                                <input type="number" step="any" id="propLat"
                                    class="form-control glass-input text-white fw-light" placeholder="0.0000"
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="d-flex gap-3">
                            <button type="button" onclick="closeAddPropertyModal()"
                                class="btn w-50 py-2 rounded-3 border border-white border-opacity-10 text-white-50 hover-text-white hover-bg-white hover-bg-opacity-10 transition-colors">Cancel</button>
                            <button type="submit"
                                class="btn w-50 py-2 rounded-3 glass-button text-white border border-white border-opacity-20 hover-bg-opacity-20 transition-colors">Add
                                Property</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Crypto Modal -->
    <div id="add-crypto-modal" class="position-fixed top-0 start-0 w-100 h-100" style="z-index: 1055; display: none;">
        <div class="position-absolute w-100 h-100"
            style="background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(10px); pointer-events: auto;"
            onclick="closeAddCryptoModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 650px; padding: 1rem;">
            <div class="modal-glass position-relative">
                <!-- Header -->
                <div class="p-4 d-flex justify-content-between align-items-start">
                    <div>
                        <h2 class="h4 fw-light text-white mb-1" style="letter-spacing: -0.01em;">Add
                            New Crypto</h2>
                        <p class="small mb-0" style="color: rgba(255, 255, 255, 0.45);">Search and
                            add cryptocurrency to
                            your portfolio</p>
                    </div>
                    <button onclick="closeAddCryptoModal()" class="modal-close-btn" type="button">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Form -->
                <form id="addCryptoForm" onsubmit="submitAddCrypto(event)" class="px-4 pb-4"
                    style="max-height: 60vh; overflow-y: auto; overflow-x: hidden;">
                    <!-- Search Cryptocurrency -->
                    <div class="mb-4 position-relative">
                        <label class="modal-label">Search Cryptocurrency</label>
                        <div class="search-input-wrapper">
                            <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                stroke-width="1.5">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            <input type="text" id="cryptoSearch" class="form-control modal-glass-input w-100"
                                placeholder="Bitcoin, Ethereum, Solana..." autocomplete="off"
                                oninput="handleCryptoSearch(this.value)">
                            <div id="cryptoSearchSpinner" class="position-absolute d-none"
                                style="right: 1rem; top: 50%; transform: translateY(-50%);">
                                <div class="spinner-border spinner-border-sm" role="status"
                                    style="width: 14px; height: 14px; color: rgba(255,255,255,0.4);">
                                </div>
                            </div>
                        </div>
                        <!-- Search Results Dropdown -->
                        <div id="cryptoSearchResults"
                            class="position-absolute w-100 mt-2 rounded-3 overflow-hidden d-none"
                            style="background: rgba(18, 18, 18, 0.98); border: 1px solid rgba(255,255,255,0.08); max-height: 280px; overflow-y: auto; z-index: 100;">
                            <!-- Results injected by JS -->
                        </div>
                    </div>

                    <!-- Symbol and Name -->
                    <div class="row g-3 mb-4">
                        <div class="col-4">
                            <label class="modal-label">Symbol <span class="text-danger">*</span></label>
                            <input type="text" id="cryptoSymbol" class="form-control modal-glass-input"
                                placeholder="BTC, ETH, SOL," required>
                        </div>
                        <div class="col-8">
                            <label class="modal-label">Name <span class="text-danger">*</span></label>
                            <input type="text" id="cryptoName" class="form-control modal-glass-input"
                                placeholder="Bitcoin, Ethereum" required>
                        </div>
                    </div>

                    <!-- Wallet Selection -->
                    <div class="mb-4">
                        <label class="modal-label">Link to Wallet <span class="text-danger">*</span></label>
                        <select id="cryptoWallet" class="form-control modal-glass-input" required>
                            <option value="">Select a wallet...</option>
                            <!-- Options populated by JavaScript -->
                        </select>
                        <small class="d-block mt-1" style="color: rgba(255, 255, 255, 0.3); font-size: 0.75rem;">
                            Choose which wallet this asset belongs to
                        </small>
                    </div>

                    <!-- Purchase Date -->
                    <div class="mb-4">
                        <label class="modal-label">Purchase Date</label>
                        <input type="date" id="cryptoPurchaseDate" class="form-control modal-glass-input">
                        <small class="d-block mt-1" style="color: rgba(255, 255, 255, 0.3); font-size: 0.75rem;">
                            When did you acquire this asset?
                        </small>
                    </div>

                    <!-- Network -->
                    <div class="mb-4">
                        <label class="modal-label">Network <span class="text-danger">*</span></label>
                        <input type="hidden" id="cryptoNetwork" required>
                        <div class="d-flex flex-wrap gap-2" id="cryptoNetworkOptions">
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Bitcoin', this)">Bitcoin</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Ethereum', this)">Ethereum</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Solana', this)">Solana</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Cardano', this)">Cardano</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Polkadot', this)">Polkadot</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Avalanche', this)">Avalanche</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Polygon', this)">Polygon</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Binance Smart Chain', this)">BSC</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Arbitrum', this)">Arbitrum</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Optimism', this)">Optimism</button>
                            <button type="button" class="glass-button px-3 py-2 rounded-pill small"
                                onclick="selectCryptoNetwork('Base', this)">Base</button>
                        </div>
                    </div>

                    <!-- Quantity and Prices -->
                    <div class="row g-3 mb-4">
                        <div class="col-4">
                            <label class="modal-label">Quantity <span class="text-danger">*</span></label>
                            <input type="number" id="cryptoQuantity" class="form-control modal-glass-input"
                                placeholder="1.5" step="any" min="0.00000001" required>
                        </div>
                        <div class="col-4">
                            <label class="modal-label">Avg Buy Price (‚Çπ) <span class="text-danger">*</span></label>
                            <input type="number" id="cryptoAvgPrice" class="form-control modal-glass-input"
                                placeholder="3500000" step="0.01" min="0" required>
                        </div>
                        <div class="col-4">
                            <label class="modal-label">Live Price (‚Çπ) <span class="text-danger">*</span></label>
                            <div class="d-flex align-items-center gap-2">
                                <input type="number" id="cryptoCurrentPrice"
                                    class="form-control modal-glass-input flex-1" placeholder="3850000" step="0.01"
                                    min="0" required>
                                <button type="button" onclick="refreshCryptoPrice()"
                                    class="btn btn-sm p-2 rounded-circle"
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);"
                                    title="Refresh Price">
                                    <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                                    </svg>
                                </button>
                            </div>
                            <div id="priceUpdateTime" class="small text-white-30 mt-1"></div>
                        </div>
                    </div>

                    <!-- Calculated Fields (Read-Only Display) -->
                    <div class="p-3 rounded-3 mb-4"
                        style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);">
                        <div class="row g-3">
                            <div class="col-6">
                                <label class="modal-label text-white-40">Total Investment</label>
                                <div id="totalInvestment" class="h5 fw-light text-white-90 mb-0">
                                    ‚Çπ0.00</div>
                            </div>
                            <div class="col-6">
                                <label class="modal-label text-white-40">Current Value</label>
                                <div id="currentValue" class="h5 fw-light text-white-90 mb-0">‚Çπ0.00
                                </div>
                            </div>
                            <div class="col-6">
                                <label class="modal-label text-white-40">Profit/Loss</label>
                                <div id="profitLoss" class="h5 fw-light mb-0">‚Çπ0.00</div>
                            </div>
                            <div class="col-6">
                                <label class="modal-label text-white-40">Profit/Loss %</label>
                                <div id="profitLossPercent" class="h5 fw-light mb-0">0.00%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="d-flex gap-3 pt-2">
                        <button type="button" onclick="closeAddCryptoModal()"
                            class="modal-btn-secondary flex-1 w-50">Cancel</button>
                        <button type="submit"
                            class="modal-btn-primary flex-1 w-50 d-flex align-items-center justify-content-center gap-2">
                            <span>+</span> Add to Portfolio
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Wallet Modal -->
    <div id="add-wallet-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1055; display: none;">
        <div class="position-absolute w-100 h-100"
            style="background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(10px); pointer-events: auto;"
            onclick="closeAddWalletModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 600px; padding: 1rem;">
            <div class="modal-glass position-relative">
                <!-- Header -->
                <div class="p-4 d-flex justify-content-between align-items-start">
                    <div>
                        <h2 class="h4 fw-light text-white mb-1" style="letter-spacing: -0.01em;">Add
                            Wallet</h2>
                        <p class="small mb-0" style="color: rgba(255, 255, 255, 0.45);">Connect your
                            crypto wallet
                            address</p>
                    </div>
                    <button onclick="closeAddWalletModal()" class="modal-close-btn" type="button">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Form -->
                <form id="add-wallet-form" onsubmit="submitAddWallet(event)" class="px-4 pb-4">
                    <!-- Wallet  Name -->
                    <div class="mb-4">
                        <label class="modal-label">Wallet Name <span class="text-danger">*</span></label>
                        <input type="text" id="walletName" class="form-control modal-glass-input"
                            placeholder="e.g., My Main Wallet, Trading Wallet..." required>
                    </div>

                    <!-- Wallet Address -->
                    <div class="mb-4">
                        <label class="modal-label">Wallet Address <span class="text-danger">*</span></label>
                        <input type="text" id="walletAddress" class="form-control modal-glass-input"
                            placeholder="0x... or wallet address" required>
                        <small class="d-block mt-1" style="color: rgba(255, 255, 255, 0.3); font-size: 0.75rem;">
                            Paste your public wallet address
                        </small>
                    </div>

                    <!-- Network Selection -->
                    <div class="mb-4">
                        <label class="modal-label">Network <span class="text-danger">*</span></label>
                        <input type="hidden" id="walletNetwork" required>
                        <div id="walletNetworkOptions" class="d-flex flex-wrap gap-3">
                            <button type="button" class="modal-network-btn"
                                onclick="selectWalletNetwork('Bitcoin')">Bitcoin</button>
                            <button type="button" class="modal-network-btn"
                                onclick="selectWalletNetwork('Ethereum')">Ethereum</button>
                            <button type="button" class="modal-network-btn"
                                onclick="selectWalletNetwork('Solana')">Solana</button>
                            <button type="button" class="modal-network-btn"
                                onclick="selectWalletNetwork('Cardano')">Cardano</button>
                            <button type="button" class="modal-network-btn"
                                onclick="selectWalletNetwork('Polkadot')">Polkadot</button>
                            <button type="button" class="modal-network-btn"
                                onclick="selectWalletNetwork('Polygon')">Polygon</button>
                            <button type="button" class="modal-network-btn"
                                onclick="selectWalletNetwork('Arbitrum')">Arbitrum</button>
                            <button type="button" class="modal-network-btn"
                                onclick="selectWalletNetwork('Optimism')">Optimism</button>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="d-flex gap-3 pt-2">
                        <button type="button" onclick="closeAddWalletModal()"
                            class="modal-btn-secondary flex-1 w-50">Cancel</button>
                        <button type="submit"
                            class="modal-btn-primary flex-1 w-50 d-flex align-items-center justify-content-center gap-2">
                            <span>+</span> Add Wallet
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Delete Wallet Confirmation Modal -->
    <div id="delete-wallet-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1055; display: none;">
        <div class="position-absolute w-100 h-100"
            style="background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(10px); pointer-events: auto;"
            onclick="closeDeleteWalletModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 450px; padding: 1rem;">
            <div class="modal-glass position-relative">
                <!-- Header -->
                <div class="p-4 d-flex justify-content-between align-items-start">
                    <div>
                        <h2 class="h5 fw-light text-white mb-1" style="letter-spacing: -0.01em;">
                            Delete Wallet</h2>
                        <p class="small mb-0" style="color: rgba(255, 255, 255, 0.45);">This action
                            cannot be undone</p>
                    </div>
                    <button onclick="closeDeleteWalletModal()" class="modal-close-btn" type="button">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Content -->
                <div class="px-4 pb-4">
                    <p class="mb-4" style="color: rgba(255, 255, 255, 0.7); font-size: 0.9rem;">
                        Are you sure you want to remove this wallet from your connected wallets?
                    </p>

                    <!-- Actions -->
                    <div class="d-flex gap-3">
                        <button type="button" onclick="closeDeleteWalletModal()"
                            class="modal-btn-secondary flex-1 w-50">Cancel</button>
                        <button type="button" onclick="confirmDeleteWallet()" class="flex-1 w-50" style="background: linear-gradient(180deg, rgba(220, 38, 38, 0.2) 0%, rgba(220, 38, 38, 0.1) 100%); 
                                   border: 1px solid rgba(220, 38, 38, 0.3); 
                                   border-radius: 12px; 
                                   color: rgba(255, 100, 100, 0.95); 
                                   padding: 0.8rem 1.5rem; 
                                   font-weight: 500; 
                                   transition: all 0.2s;">
                            Delete Wallet
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="rent-property-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1060; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" onclick="closeRentModal()"></div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 700px; padding: 1rem;">
            <div class="glass-card position-relative" style="border-radius: 1.5rem; overflow: hidden;">
                <!-- Header -->
                <div
                    class="p-4 border-bottom border-white border-opacity-10 d-flex justify-content-between align-items-center">
                    <div>
                        <h2 class="h4 fw-light text-white-90 mb-1">Rent Property</h2>
                        <p class="small text-white-50 mb-0" id="rent-modal-property-name"></p>
                    </div>
                    <button onclick="closeRentModal()"
                        class="btn btn-sm glass-button rounded-circle p-2 d-flex align-items-center justify-content-center"
                        style="width: 32px; height: 32px;">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Form Container -->
                <div class="p-4">
                    <!-- Step 1: Form -->
                    <div id="rent-step-1">
                        <form id="rentPropertyForm" onsubmit="handleRentStep1(event)">
                            <div class="row g-3 mb-3">
                                <!-- Rent Type -->
                                <div class="col-6">
                                    <label class="form-label small text-uppercase text-white-50"
                                        style="letter-spacing: 0.1em; font-size: 0.7rem;">Rent Type
                                        *</label>
                                    <div class="d-flex gap-2 p-1 rounded-3" style="background: rgba(255,255,255,0.05);">
                                        <button type="button" onclick="setRentType('Monthly')"
                                            class="rent-type-btn flex-1 btn py-2 text-white-50 rounded-3 transition-all active"
                                            data-type="Monthly">Monthly</button>
                                        <button type="button" onclick="setRentType('Yearly')"
                                            class="rent-type-btn flex-1 btn py-2 text-white-50 rounded-3 transition-all"
                                            data-type="Yearly">Yearly</button>
                                    </div>
                                    <input type="hidden" id="rentType" value="Monthly" required>
                                </div>

                                <!-- Rent Amount -->
                                <div class="col-6">
                                    <label class="form-label small text-uppercase text-white-50"
                                        style="letter-spacing: 0.1em; font-size: 0.7rem;">Rent
                                        Amount (‚Çπ)
                                        *</label>
                                    <input type="number" id="rentAmount"
                                        class="form-control glass-input text-white fw-light" placeholder="50000"
                                        required
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>

                                <!-- Start Date -->
                                <div class="col-6">
                                    <label class="form-label small text-uppercase text-white-50"
                                        style="letter-spacing: 0.1em; font-size: 0.7rem;">Start Date
                                        *</label>
                                    <input type="date" id="rentStartDate"
                                        class="form-control glass-input text-white fw-light" required
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>

                                <!-- Security Deposit -->
                                <div class="col-6">
                                    <label class="form-label small text-uppercase text-white-50"
                                        style="letter-spacing: 0.1em; font-size: 0.7rem;">Security
                                        Deposit
                                        (‚Çπ)</label>
                                    <input type="number" id="securityDeposit"
                                        class="form-control glass-input text-white fw-light" placeholder="100000"
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>

                                <!-- Tenant Type -->
                                <div class="col-12">
                                    <label class="form-label small text-uppercase text-white-50"
                                        style="letter-spacing: 0.1em; font-size: 0.7rem;">Tenant
                                        Type</label>
                                    <input type="text" id="tenantType"
                                        class="form-control glass-input text-white fw-light" placeholder="Individual"
                                        value="Individual"
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="d-flex gap-3">
                                <button type="button" id="cancelRentBtn" onclick="cancelRentProperty()"
                                    class="d-none btn flex-1 py-3 rounded-3 border border-danger border-opacity-20 text-danger text-opacity-80 hover-bg-danger hover-bg-opacity-10 transition-all">
                                    Cancel Rent
                                </button>
                                <button type="submit" id="rentSubmitBtn"
                                    class="btn flex-2 py-3 rounded-3 glass-button text-white border border-white border-opacity-20 hover-bg-opacity-20 transition-all">
                                    <span class="d-flex align-items-center justify-content-center gap-2">
                                        <span id="rentSubmitText">Analyze Impact</span>
                                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                            <path
                                                d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                                        </svg>
                                    </span>
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Step 2: Impact Analysis -->
                    <div id="rent-step-2" style="display: none;">
                        <!-- AI Insight Box -->
                        <div class="p-4 rounded-4 mb-4 position-relative overflow-hidden"
                            style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1)); border: 1px solid rgba(59, 130, 246, 0.2);">
                            <div class="position-absolute top-0 start-0 w-100 h-100"
                                style="background: rgba(59, 130, 246, 0.05); backdrop-filter: blur(2px);">
                            </div>
                            <div class="position-relative">
                                <div class="d-flex gap-3 mb-4">
                                    <div class="p-2 rounded-3"
                                        style="background: rgba(59, 130, 246, 0.2); color: rgb(96, 165, 250);">
                                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                            <path
                                                d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="h6 fw-light text-white-90 mb-1">Portfolio Impact
                                            Analysis
                                        </h3>
                                        <p class="small fw-light text-white-60 mb-0" id="impact-description"></p>
                                    </div>
                                </div>

                                <div class="row g-3 pt-3 border-top border-white border-opacity-10">
                                    <div class="col-4">
                                        <div class="small text-uppercase text-white-50 mb-1"
                                            style="font-size: 0.65rem; letter-spacing: 0.1em;">
                                            Rental Yield
                                        </div>
                                        <div class="h5 fw-light" style="color: rgb(74, 222, 128);" id="rental-yield">0%
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="small text-uppercase text-white-50 mb-1"
                                            style="font-size: 0.65rem; letter-spacing: 0.1em;">
                                            Annual Income
                                        </div>
                                        <div class="h5 fw-light text-white-90" id="annual-income">‚Çπ0
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="small text-uppercase text-white-50 mb-1"
                                            style="font-size: 0.65rem; letter-spacing: 0.1em;">
                                            Monthly
                                            Cashflow
                                        </div>
                                        <div class="h5 fw-light text-white-90" id="monthly-cashflow">‚Çπ0
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-flex gap-3">
                            <button onclick="backToRentStep1()"
                                class="btn flex-1 py-3 rounded-3 border border-white border-opacity-10 text-white-70 hover-bg-white hover-bg-opacity-5 transition-all">
                                Back to Edit
                            </button>
                            <button onclick="confirmRentProperty()"
                                class="btn flex-2 py-3 rounded-3 bg-white text-dark hover-scale-105 transition-all">
                                <span class="d-flex align-items-center justify-content-center gap-2">
                                    Confirm & Activate
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                                    </svg>
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sell Property Confirmation Modal -->
    <div id="sell-property-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1070; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" onclick="closeSellPropertyModal()"></div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 400px; padding: 1rem;">
            <div class="glass-card position-relative overflow-hidden p-0" style="border-radius: 1.5rem;">
                <div class="p-4 text-center">
                    <div class="mx-auto mb-3 p-3 rounded-circle d-flex align-items-center justify-content-center"
                        style="width: 64px; height: 64px; background: rgba(239, 68, 68, 0.1); color: #ef4444;">
                        <svg width="32" height="32" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">
                            </path>
                        </svg>
                    </div>
                    <h3 class="h5 text-white mb-2">Sell Property?</h3>
                    <p class="text-white-50 small mb-4">Are you sure you want to sell this property?
                        This
                        action
                        will
                        remove it from your active portfolio and mark it as sold.</p>

                    <div class="d-flex gap-2">
                        <button onclick="closeSellPropertyModal()"
                            class="btn flex-1 py-2 rounded-3 border border-white border-opacity-10 text-white-70 hover-bg-white hover-bg-opacity-5 transition-all">
                            Cancel
                        </button>
                        <button onclick="confirmSellProperty()"
                            class="btn flex-1 py-2 rounded-3 text-white transition-all"
                            style="background: rgba(0,0,0,0.5); border: 1px solid rgba(239, 68, 68, 0.5); box-shadow: 0 0 15px rgba(239, 68, 68, 0.3);">
                            Confirm Sale
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Remove Property Confirmation Modal -->
    <div id="remove-property-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1080; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" onclick="closeRemovePropertyModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 400px; padding: 1rem;">
            <div class="glass-card position-relative overflow-hidden p-0" style="border-radius: 1.5rem;">
                <div class="p-4 text-center">
                    <div class="mx-auto mb-3 p-3 rounded-circle d-flex align-items-center justify-content-center"
                        style="width: 64px; height: 64px; background: rgba(239, 68, 68, 0.1); color: #ef4444;">
                        <svg width="32" height="32" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                            </path>
                        </svg>
                    </div>
                    <h3 class="h5 text-white mb-2">Remove Property?</h3>
                    <p class="text-white-50 small mb-4">Are you sure you want to remove this
                        property? This
                        will
                        permanently delete it from your portfolio history.</p>

                    <div class="d-flex gap-2">
                        <button onclick="closeRemovePropertyModal()"
                            class="btn flex-1 py-2 rounded-3 border border-white border-opacity-10 text-white-70 hover-bg-white hover-bg-opacity-5 transition-all">
                            Cancel
                        </button>
                        <button onclick="confirmRemoveProperty()"
                            class="btn flex-1 py-2 rounded-3 text-white transition-all"
                            style="background: rgba(0,0,0,0.5); border: 1px solid rgba(239, 68, 68, 0.5); box-shadow: 0 0 15px rgba(239, 68, 68, 0.3);">
                            Remove
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cancel Rent Confirmation Modal -->
    <div id="cancel-rent-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1070; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" onclick="closeCancelRentModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 450px; padding: 1rem;">
            <div class="glass-card position-relative overflow-hidden p-0" style="border-radius: 1.5rem;">
                <div class="p-4 text-center">
                    <div class="mx-auto mb-3 p-3 rounded-circle d-flex align-items-center justify-content-center"
                        style="width: 64px; height: 64px; background: rgba(251, 191, 36, 0.1); color: #fbbf24;">
                        <svg width="32" height="32" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">
                            </path>
                        </svg>
                    </div>
                    <h3 class="h5 text-white mb-2">Stop Renting Property?</h3>
                    <p class="text-white-50 small mb-4">Are you sure you want to stop renting this
                        property?
                        It will
                        be
                        moved to "Owned" status and all rental details will be removed.</p>

                    <div class="d-flex gap-2">
                        <button onclick="closeCancelRentModal()"
                            class="btn flex-1 py-2 rounded-3 border border-white border-opacity-10 text-white-70 hover-bg-white hover-bg-opacity-5 transition-all">
                            Keep Renting
                        </button>
                        <button onclick="confirmCancelRent()"
                            class="btn flex-1 py-2 rounded-3 text-white transition-all"
                            style="background: rgba(0,0,0,0.5); border: 1px solid rgba(251, 191, 36, 0.5); box-shadow: 0 0 15px rgba(251, 191, 36, 0.2);">
                            End Rental
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Document Modal -->
    <div id="upload-document-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1060; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" onclick="closeUploadDocumentModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 500px; padding: 1rem;">
            <div class="glass-card position-relative p-0 overflow-hidden" style="border-radius: 1.5rem;">
                <!-- Header -->
                <div
                    class="p-4 border-bottom border-white border-opacity-10 d-flex justify-content-between align-items-center">
                    <div>
                        <h2 class="h4 fw-light text-white-90 mb-0">Upload Document</h2>
                    </div>
                    <button onclick="closeUploadDocumentModal()"
                        class="btn btn-sm glass-button rounded-circle p-2 d-flex align-items-center justify-content-center"
                        style="width: 32px; height: 32px;">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Form -->
                <div class="p-4" style="max-height: 70vh; overflow-y: auto;">
                    <form id="uploadDocumentForm" onsubmit="submitUploadDocument(event)">


                        <!-- Property Selection -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Property</label>
                            <select id="docProperty" class="form-select glass-input text-white fw-light" required
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                <option value="" class="text-dark">Select a property...</option>
                                <!-- Populated by JS -->
                            </select>
                        </div>

                        <!-- Document Type -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Document
                                Type</label>
                            <select id="docType" class="form-select glass-input text-white fw-light" required
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                <option value="" class="text-dark">Select document type...</option>
                                <option value="Deed" class="text-dark">Deed</option>
                                <option value="Valuation Report" class="text-dark">Valuation Report
                                </option>
                                <option value="Tax Document" class="text-dark">Tax Document</option>
                                <option value="Insurance" class="text-dark">Insurance</option>
                                <option value="Inspection Report" class="text-dark">Inspection
                                    Report
                                </option>
                                <option value="Other" class="text-dark">Other</option>
                            </select>
                        </div>

                        <!-- Description -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Description
                                (Optional)</label>
                            <textarea id="docDescription" class="form-control glass-input text-white fw-light" rows="3"
                                placeholder="Add notes or description about this document..."
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; resize: none;"></textarea>
                        </div>

                        <!-- File Upload -->
                        <div class="mb-4">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">File</label>
                            <div class="p-4 rounded-3 text-center position-relative"
                                style="background: rgba(255,255,255,0.03); border: 2px dashed rgba(255,255,255,0.2); cursor: pointer;"
                                onclick="document.getElementById('docFile').click()">
                                <div class="mb-2">
                                    <svg width="48" height="48" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                        class="mx-auto" style="opacity: 0.5;">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                            d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12">
                                        </path>
                                    </svg>
                                </div>
                                <p class="text-white-70 mb-1">Drag & drop or click to browse</p>
                                <p class="small text-white-50 mb-0" style="font-size: 0.7rem;">PDF,
                                    PNG,
                                    JPG, TXT,
                                    DOC,
                                    DOCX (Max 10MB)</p>
                                <input type="file" id="docFile" class="d-none" required
                                    accept=".pdf,.png,.jpg,.jpeg,.txt,.doc,.docx" onchange="updateFileName(this)">
                                <p id="fileName" class="small text-white-90 mt-2 mb-0"></p>
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="d-flex gap-3">
                            <button type="button" onclick="closeUploadDocumentModal()"
                                class="btn w-50 py-2 rounded-3 border border-white border-opacity-10 text-white-50 hover-text-white hover-bg-white hover-bg-opacity-10 transition-colors">Cancel</button>
                            <button type="submit"
                                class="btn w-50 py-2 rounded-3 glass-button text-white border border-white border-opacity-20 hover-bg-opacity-20 transition-colors">Upload</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Document Preview Modal -->
    <div id="document-preview-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1080; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-90" onclick="closeDocumentPreview()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100 h-100 d-flex flex-column"
            style="max-width: 900px; max-height: 90vh; padding: 1rem;">
            <div class="glass-card position-relative p-0 overflow-hidden d-flex flex-column h-100"
                style="border-radius: 1.5rem;">
                <!-- Header -->
                <div
                    class="p-3 border-bottom border-white border-opacity-10 d-flex justify-content-between align-items-center flex-shrink-0">
                    <div class="d-flex align-items-center gap-3">
                        <h4 id="preview-doc-name" class="h5 fw-light text-white-90 mb-0 text-truncate"
                            style="max-width: 400px;">Document Preview</h4>
                    </div>
                    <div class="d-flex gap-2">
                        <button id="preview-download-btn" onclick="downloadCurrentDocument()"
                            class="btn btn-sm glass-button rounded-pill px-3 py-1 d-flex align-items-center gap-2">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4">
                                </path>
                            </svg>
                            Download
                        </button>
                        <button onclick="closeDocumentPreview()"
                            class="btn btn-sm glass-button rounded-circle p-2 d-flex align-items-center justify-content-center"
                            style="width: 32px; height: 32px;">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Preview Content -->
                <div id="preview-content" class="flex-grow-1 overflow-auto p-3" style="background: rgba(0,0,0,0.3);">
                    <!-- Content injected by JS -->
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
    </div>

    <!-- Valuation History Modal (Redesign) -->
    <div id="valuation-history-modal" class="modal-overlay hidden">
        <div class="modal-glass modal-lg">
            <div class="modal-header d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h3 id="history-modal-title" class="h4 fw-light text-white mb-1">Property Name</h3>
                    <p class="text-white-50 small mb-0">Valuation History</p>
                </div>
                <button onclick="closeValuationHistoryModal()" class="btn btn-icon text-white-50 hover-text-white">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>

            <div class="d-flex justify-content-end mb-3">
                <button onclick="openAddValuationModal()"
                    class="btn btn-sm btn-primary d-flex align-items-center gap-2">
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                    Add Entry
                </button>
            </div>

            <div class="glass-table-container" style="max-height: 400px; overflow-y: auto;">
                <table class="table text-white-90 align-middle mb-0">
                    <thead class="sticky-top bg-glass-dark backdrop-blur">
                        <tr class="text-white-50 border-bottom border-white-10">
                            <th class="fw-normal py-3 ps-4">Date</th>
                            <th class="fw-normal py-3">Value</th>
                            <th class="fw-normal py-3">Change</th>
                            <th class="fw-normal py-3 pe-4 text-end">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="valuation-history-modal-body">
                        <!-- Injected via JS -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Add Transaction Modal -->
    <div id="add-transaction-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 1060; display: none;">
        <div class="position-absolute w-100 h-100 bg-black bg-opacity-75" style="pointer-events: auto;"
            onclick="closeAddTransactionModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 500px; padding: 1rem;">
            <div class="glass-card position-relative p-0 overflow-hidden" style="border-radius: 1.5rem;">
                <!-- Header -->
                <div
                    class="p-4 border-bottom border-white border-opacity-10 d-flex justify-content-between align-items-center">
                    <div>
                        <h2 class="h4 fw-light text-white-90 mb-1">New Cash Flow Entry</h2>
                        <p class="small text-white-50 mb-0">Record a new transaction</p>
                    </div>
                    <button onclick="closeAddTransactionModal()"
                        class="btn btn-sm glass-button rounded-circle p-2 d-flex align-items-center justify-content-center"
                        style="width: 32px; height: 32px;">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Form -->
                <div class="p-4">
                    <form id="addTransactionForm" onsubmit="submitNewTransaction(event)">
                        <!-- Business Selection -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Business *</label>
                            <select id="tx-business" class="form-select glass-input text-white fw-light" required
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                <option value="" class="text-dark">Select Business</option>
                            </select>
                        </div>

                        <!-- Type Selection -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Type *</label>
                            <div class="d-flex gap-2">
                                <input type="radio" class="btn-check" name="tx-type" id="type-income" value="Income"
                                    checked>
                                <label class="btn glass-button w-100 small" for="type-income">Income</label>

                                <input type="radio" class="btn-check" name="tx-type" id="type-expense" value="Expense">
                                <label class="btn glass-button w-100 small" for="type-expense">Expense</label>

                                <input type="radio" class="btn-check" name="tx-type" id="type-investment"
                                    value="Investment">
                                <label class="btn glass-button w-100 small" for="type-investment">Invest</label>

                                <input type="radio" class="btn-check" name="tx-type" id="type-transfer"
                                    value="Transfer">
                                <label class="btn glass-button w-100 small" for="type-transfer">Transfer</label>
                            </div>
                        </div>

                        <!-- Amount & Date -->
                        <div class="row g-3 mb-3">
                            <div class="col-6">
                                <label class="form-label small text-uppercase text-white-50"
                                    style="letter-spacing: 0.1em; font-size: 0.7rem;">Amount (‚Çπ)
                                    *</label>
                                <input type="number" id="tx-amount" class="form-control glass-input text-white fw-light"
                                    placeholder="0" required step="0.01" min="0"
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                            </div>
                            <div class="col-6">
                                <label class="form-label small text-uppercase text-white-50"
                                    style="letter-spacing: 0.1em; font-size: 0.7rem;">Date *</label>
                                <input type="date" id="tx-date" class="form-control glass-input text-white fw-light"
                                    required
                                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                            </div>
                        </div>

                        <!-- Description -->
                        <div class="mb-3">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Description /
                                Source</label>
                            <input type="text" id="tx-notes" class="form-control glass-input text-white fw-light"
                                placeholder="e.g. Client Payment, Server Costs"
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                        </div>

                        <!-- Category -->
                        <div class="mb-4">
                            <label class="form-label small text-uppercase text-white-50"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Category</label>
                            <input type="text" id="tx-category" class="form-control glass-input text-white fw-light"
                                placeholder="e.g. Sales, Operations, Salary"
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                        </div>

                        <!-- Actions -->
                        <div class="d-flex gap-3">
                            <button type="button" onclick="closeAddTransactionModal()"
                                class="btn w-50 py-2 rounded-3 border border-white border-opacity-10 text-white-50 hover-text-white hover-bg-white hover-bg-opacity-10 transition-colors">Cancel</button>
                            <button type="submit"
                                class="btn w-50 py-2 rounded-3 glass-button text-white border border-white border-opacity-20 hover-bg-opacity-20 transition-colors">Save
                                Entry</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
    </div>

    <!-- ========== SHARES MODALS ========== -->

    <!-- Add Share Modal -->
    <div id="add-share-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 9999; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); display: none;">
        <div class="d-flex align-items-center justify-content-center h-100 p-4">
            <div class="p-4"
                style="max-width: 672px; width: 100%; max-height: 90vh; overflow-y: auto; border-radius: 24px; border: 1px solid rgba(255, 255, 255, 0.1); background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); box-shadow: inset 0 0 20px 0 rgba(255, 255, 255, 0.02), 0 0 50px 0 rgba(255, 255, 255, 0.05);">
                <div class="d-flex justify-content-between align-items-start mb-4">
                    <div>
                        <h3 class="h4 fw-light text-white mb-2">Add New Share</h3>
                        <p class="small text-white-50 mb-0">Select sector, search stock, and enter details</p>
                    </div>
                    <button onclick="closeAddShareModal()" class="btn-close btn-close-white"
                        aria-label="Close"></button>
                </div>

                <form id="add-share-form" onsubmit="submitAddShare(event)">
                    <!-- Step 1: Select Sector -->
                    <div class="mb-4">
                        <label class="d-block text-white fw-normal mb-2 small text-white-90"
                            style="font-size: 0.875rem;">
                            <span class="text-white-90 fw-medium">Step 1:</span> Select Sector <span
                                class="text-danger">*</span>
                        </label>
                        <select id="share-sector-select" class="form-select glass-input shadow-none py-3"
                            style="width: 100%; padding: 12px 16px; border-radius: 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; outline: none;"
                            onchange="onSectorChange()" required>
                            onchange="onSectorChange()" required>
                            <option value="">Select sector first...</option>

                            <!-- GICS Sectors -->
                            <option value="Communication Services">Communication Services</option>
                            <option value="Consumer Discretionary">Consumer Discretionary</option>
                            <option value="Consumer Staples">Consumer Staples</option>
                            <option value="Energy">Energy</option>
                            <option value="Financials">Financials</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="Industrials">Industrials</option>
                            <option value="Information Technology">Information Technology</option>
                            <option value="Materials">Materials</option>
                            <option value="Real Estate">Real Estate</option>
                            <option value="Utilities">Utilities</option>

                            <!-- Detailed Industries -->
                            <option value="Aerospace & Defense">Aerospace & Defense</option>
                            <option value="Automobiles & Components">Automobiles & Components</option>
                            <option value="Banks">Banks</option>
                            <option value="Biotechnology">Biotechnology</option>
                            <option value="Capital Goods">Capital Goods</option>
                            <option value="Commercial Services">Commercial Services</option>
                            <option value="Consumer Durables">Consumer Durables</option>
                            <option value="Food & Beverages">Food & Beverages</option>
                            <option value="Insurance">Insurance</option>
                            <option value="Media & Entertainment">Media & Entertainment</option>
                            <option value="Pharmaceuticals">Pharmaceuticals</option>
                            <option value="Retail">Retail</option>
                            <option value="Semiconductors">Semiconductors</option>
                            <option value="Software & Services">Software & Services</option>
                            <option value="Telecommunication Services">Telecommunication Services</option>
                            <option value="Transportation">Transportation</option>
                            <option value="ETF/Index Fund">ETF/Index Fund</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <!-- Step 2: Search Stock -->
                    <div class="mb-4">
                        <label class="d-block text-white fw-normal mb-2 small text-white-90" style="font-size: 0.9rem;">
                            Step 2: Search Stock <span class="text-danger">*</span>
                            <span id="sector-hint" class="text-white-40 ms-2 text-danger"
                                style="font-size: 0.8rem; font-weight: 300;">(Select sector first)</span>
                        </label>
                        <div class="position-relative">
                            <i class="position-absolute top-50 translate-middle-y text-white-50"
                                style="left: 16px; z-index: 10;">
                                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                </svg>
                            </i>
                            <input type="text" id="share-search-input" class="form-control glass-input shadow-none py-3"
                                placeholder="Select a sector first"
                                style="width: 100%; padding-top: 12px; padding-bottom: 12px; padding-right: 16px; padding-left: 48px !important; border-radius: 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; outline: none; transition: border-color 0.2s;"
                                oninput="handleShareSearch(event)" autocomplete="off" disabled>

                            <div id="share-search-results" class="position-relative w-100 mt-2 rounded-3 hidden"
                                style="background: #0a0a0a; border: 1px solid rgba(255,255,255,0.1); max-height: 200px; overflow-y: auto; z-index: 1000; box-shadow: 0 4px 20px rgba(0,0,0,0.5);">
                            </div>
                        </div>
                    </div>

                    <!-- Hidden inputs for selected stock -->
                    <input type="hidden" id="selected-share-symbol" required>
                    <input type="hidden" id="selected-share-name" required>
                    <input type="hidden" id="selected-share-sector">

                    <!-- Step 3: Enter Details -->
                    <div class="mb-4">
                        <label class="d-block text-white fw-normal mb-3 small text-white-90"
                            style="font-size: 0.9rem;">Step 3: Enter Details</label>
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label class="form-label small text-white-50 mb-1" style="font-size: 0.75rem;">
                                    Quantity <span class="text-danger">*</span>
                                </label>
                                <input type="number" id="share-quantity" class="form-control glass-input py-3"
                                    placeholder="100" min="1" step="1" required
                                    style="width: 100%; padding: 12px 16px; border-radius: 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; outline: none; transition: border-color 0.2s;"
                                    oninput="updateShareCalculations()">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label small text-white-50 mb-1" style="font-size: 0.75rem;">
                                    Avg Buy Price (‚Çπ) <span class="text-danger">*</span>
                                </label>
                                <input type="number" id="share-avg-price" class="form-control glass-input py-3"
                                    placeholder="1500" min="0.01" step="0.01" required
                                    style="width: 100%; padding: 12px 16px; border-radius: 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; outline: none; transition: border-color 0.2s;"
                                    oninput="updateShareCalculations()">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label small text-white-50 mb-1" style="font-size: 0.75rem;">
                                    Current Price (‚Çπ) <span class="text-danger">*</span>
                                </label>
                                <div class="position-relative">
                                    <input type="number" id="share-current-price" class="form-control glass-input py-3"
                                        placeholder="1750" min="0.01" step="0.01" required readonly
                                        oninput="updateShareCalculations()"
                                        style="width: 100%; padding: 12px 16px; border-radius: 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; outline: none; transition: border-color 0.2s;">
                                    <div id="price-loading"
                                        class="position-absolute end-0 top-50 translate-middle-y me-3 hidden">
                                        <div class="spinner-border spinner-border-sm text-white-50" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Purchase Date Field -->
                    <div class="mb-4">
                        <label class="form-label small text-white-70 mb-2">Purchase Date</label>
                        <input type="date" id="share-purchase-date" class="form-control glass-input py-3"
                            style="width: 100%; padding: 12px 16px; border-radius: 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; outline: none; color-scheme: dark;">
                    </div>

                    <!-- Calculated Fields (Hidden until Quantity > 0) -->
                    <div id="share-calculation-box" class="p-4 mb-4 hidden"
                        style="border-radius: 16px; border: 1px solid rgba(255, 255, 255, 0.05); background: rgba(255, 255, 255, 0.02); padding: 16px;">
                        <h3 class="text-white-60 mb-3" style="font-size: 0.875rem; color: rgba(255,255,255,0.6);">
                            Preview Calculations</h3>
                        <div class="row g-4">
                            <div class="col-6">
                                <label class="d-block text-white-40 small mb-1" style="font-size: 0.7rem;">Total
                                    Invested</label>
                                <div id="shareTotalInvestment" class="h4 fw-light text-white mb-0">‚Çπ0.00</div>
                            </div>
                            <div class="col-6">
                                <label class="d-block text-white-40 small mb-1" style="font-size: 0.7rem;">Current
                                    Value</label>
                                <div id="shareCurrentValue" class="h4 fw-light text-white mb-0">‚Çπ0.00</div>
                            </div>
                            <div class="col-6">
                                <label class="d-block text-white-40 small mb-1"
                                    style="font-size: 0.7rem;">Gain/Loss</label>
                                <div id="shareProfitLoss" class="h4 fw-light mb-0">‚Çπ0.00</div>
                            </div>
                            <div class="col-6">
                                <label class="d-block text-white-40 small mb-1" style="font-size: 0.7rem;">Return
                                    %</label>
                                <div id="shareProfitLossPercent" class="h4 fw-light mb-0">0.00%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <!-- Action Buttons -->
                    <div class="d-flex gap-3 mt-4">
                        <button type="button" onclick="closeAddShareModal()" class="btn flex-fill py-3"
                            style="flex: 1; padding: 12px 24px; border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.6); background: transparent;">
                            Cancel
                        </button>
                        <button type="submit" id="add-share-btn" class="btn flex-fill py-3"
                            style="flex: 1; padding: 12px 24px; border-radius: 12px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: white; display: flex; align-items: center; justify-content: center; gap: 8px;">
                            <span>+</span> Add Share
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Sell Share Modal -->
    <div id="sell-share-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 9999; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); display: none;">
        <div class="d-flex align-items-center justify-content-center h-100 p-4">
            <div class="glass-card rounded-4 p-5" style="max-width: 500px; width: 100%;">
                <div class="d-flex justify-content-between align-items-start mb-4">
                    <div>
                        <h3 class="h4 fw-light text-white mb-2">Sell Share</h3>
                        <p class="small text-white-50 mb-0">Record your share sale</p>
                    </div>
                    <button onclick="closeSellShareModal()" class="btn-close btn-close-white"
                        aria-label="Close"></button>
                </div>

                <form id="sell-share-form" onsubmit="submitSellShare(event)">
                    <input type="hidden" id="sell-share-id">

                    <div class="mb-3">
                        <div class="text-white-70 small mb-2">Asset</div>
                        <div class="text-white fw-medium" id="sell-share-name"></div>
                    </div>

                    <div class="mb-4">
                        <label class="form-label small text-uppercase text-white-50"
                            style="letter-spacing: 0.1em; font-size: 0.7rem;">
                            Sale Price per Share (‚Çπ)
                        </label>
                        <input type="number" id="sell-share-price" class="form-control glass-input" placeholder="2000"
                            min="0.01" step="0.01" required>
                    </div>

                    <div class="mb-4">
                        <label class="form-label small text-uppercase text-white-50"
                            style="letter-spacing: 0.1em; font-size: 0.7rem;">
                            Sale Date
                        </label>
                        <input type="date" id="sell-share-date" class="form-control glass-input" required>
                    </div>

                    <div class="glass-card p-3 mb-4" id="sell-preview">
                        <div class="small text-white-50 mb-2">Sale Summary</div>
                        <div class="d-flex justify-content-between mb-2">
                            <span class="text-white-50 small">Quantity:</span>
                            <span class="text-white small" id="sell-quantity">0</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span class="text-white-50 small">Total Sale Value:</span>
                            <span class="text-white small" id="sell-total-value">‚Çπ0</span>
                        </div>
                        <div class="d-flex justify-content-between pt-2 border-top"
                            style="border-color: rgba(255,255,255,0.1) !important;">
                            <span class="text-white-70">Profit/Loss:</span>
                            <span class="fw-medium" id="sell-profit-loss">‚Çπ0</span>
                        </div>
                    </div>

                    <div class="d-flex gap-3">
                        <button type="button" onclick="closeSellShareModal()"
                            class="btn glass-button flex-fill">Cancel</button>
                        <button type="submit" class="btn flex-fill"
                            style="background: rgba(22, 101, 52, 0.4); border: 1px solid rgba(74, 222, 128, 0.2); color: #4ade80; transition: all 0.2s ease;"
                            onmouseover="this.style.background='rgba(22, 101, 52, 0.6)'; this.style.color='#86efac'"
                            onmouseout="this.style.background='rgba(22, 101, 52, 0.4)'; this.style.color='#4ade80'">
                            Confirm Sale
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Sell Crypto Modal -->
    <div id="sell-crypto-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 9999; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); display: none;">
        <div class="d-flex align-items-center justify-content-center h-100 p-4">
            <div class="glass-card rounded-4 p-5" style="max-width: 500px; width: 100%;">
                <div class="d-flex justify-content-between align-items-start mb-4">
                    <div>
                        <h3 class="h4 fw-light text-white mb-2">Sell Crypto</h3>
                        <p class="small text-white-50 mb-0">Record your crypto sale</p>
                    </div>
                    <button type="button" onclick="closeSellCryptoModal()" class="btn-close btn-close-white"
                        aria-label="Close"></button>
                </div>

                <form id="sell-crypto-form" onsubmit="submitSellCrypto(event)">
                    <input type="hidden" id="sell-crypto-id">

                    <div class="mb-3">
                        <div class="text-white-70 small mb-2">Asset</div>
                        <div class="text-white fw-medium" id="sell-crypto-name"></div>
                    </div>

                    <div class="mb-4">
                        <label class="form-label small text-uppercase text-white-50"
                            style="letter-spacing: 0.1em; font-size: 0.7rem;">
                            Quantity to Sell (Max: <span id="sell-crypto-max-qty">0</span>)
                        </label>
                        <input type="number" id="sell-crypto-quantity" class="form-control glass-input"
                            placeholder="0.00" min="0.00000001" step="any" required>
                    </div>

                    <div class="mb-4">
                        <label class="form-label small text-uppercase text-white-50"
                            style="letter-spacing: 0.1em; font-size: 0.7rem;">
                            Sale Price per Unit (‚Çπ)
                        </label>
                        <input type="number" id="sell-crypto-price" class="form-control glass-input" placeholder="50000"
                            min="0.01" step="0.01" required>
                    </div>

                    <div class="glass-card p-3 mb-4" id="sell-crypto-preview">
                        <div class="small text-white-50 mb-2">Sale Summary</div>
                        <div class="d-flex justify-content-between mb-2">
                            <span class="text-white-50 small">Total Sale Value:</span>
                            <span class="text-white small" id="sell-crypto-total-value">‚Çπ0</span>
                        </div>
                        <div class="d-flex justify-content-between pt-2 border-top"
                            style="border-color: rgba(255,255,255,0.1) !important;">
                            <span class="text-white-70">Profit/Loss:</span>
                            <span class="fw-medium" id="sell-crypto-profit-loss">‚Çπ0</span>
                        </div>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-danger glass-button py-3">
                            Confirm Sale
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Remove Crypto Confirmation Modal -->
    <div id="remove-crypto-modal" class="position-fixed top-0 start-0 w-100 h-100"
        style="z-index: 1055; display: none;">
        <div class="position-absolute w-100 h-100"
            style="background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(10px); pointer-events: auto;"
            onclick="closeRemoveCryptoModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 420px; padding: 1rem;">
            <div class="modal-glass position-relative">
                <!-- Header -->
                <div class="p-4 d-flex justify-content-between align-items-start">
                    <div>
                        <h2 class="h5 fw-light text-white mb-1" style="letter-spacing: -0.01em;">Remove Crypto?</h2>
                        <p class="small mb-0" style="color: rgba(255, 255, 255, 0.45);">This action cannot be undone
                        </p>
                    </div>
                    <button onclick="closeRemoveCryptoModal()" class="modal-close-btn" type="button">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Content -->
                <div class="px-4 pb-4">
                    <p class="text-white-70 mb-4">Are you sure you want to remove <span id="remove-crypto-name"
                            class="text-white fw-medium"></span> from your portfolio?</p>

                    <input type="hidden" id="remove-crypto-id">

                    <!-- Actions -->
                    <div class="d-flex gap-3">
                        <button type="button" onclick="closeRemoveCryptoModal()"
                            class="modal-btn-secondary flex-1 w-50">Cancel</button>
                        <button type="button" onclick="confirmRemoveCrypto()"
                            class="modal-btn-primary flex-1 w-50 d-flex align-items-center justify-content-center gap-2"
                            style="background: rgba(239, 68, 68, 0.15); border-color: rgba(239, 68, 68, 0.3); color: #ef4444;">
                            Remove
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Remove Share Confirmation Modal -->
    <div id="remove-share-modal" class="position-fixed top-0 start-0 w-100 h-100" style="z-index: 1055; display: none;">
        <div class="position-absolute w-100 h-100"
            style="background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(10px); pointer-events: auto;"
            onclick="closeRemoveShareModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 420px; padding: 1rem;">
            <div class="modal-glass position-relative">
                <!-- Header -->
                <div class="p-4 d-flex justify-content-between align-items-start">
                    <div>
                        <h2 class="h5 fw-light text-white mb-1" style="letter-spacing: -0.01em;">Remove Share?</h2>
                        <p class="small mb-0" style="color: rgba(255, 255, 255, 0.45);">This action cannot be undone
                        </p>
                    </div>
                    <button onclick="closeRemoveShareModal()" class="modal-close-btn" type="button">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Content -->
                <div class="px-4 pb-4">
                    <p class="text-white-70 mb-4">Are you sure you want to remove <span id="remove-share-name"
                            class="text-white fw-medium"></span> from your portfolio?</p>

                    <input type="hidden" id="remove-share-id">

                    <!-- Actions -->
                    <div class="d-flex gap-3">
                        <button type="button" onclick="closeRemoveShareModal()"
                            class="modal-btn-secondary flex-1 w-50">Cancel</button>
                        <button type="button" onclick="confirmRemoveShare()"
                            class="modal-btn-primary flex-1 w-50 d-flex align-items-center justify-content-center gap-2"
                            style="background: rgba(239, 68, 68, 0.15); border-color: rgba(239, 68, 68, 0.3); color: #ef4444;">
                            Remove
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Bond Modal -->
    <div id="add-bond-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 9999; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); display: none;">
        <div class="d-flex align-items-center justify-content-center h-100 p-4">
            <div class="glass-card rounded-4 p-5" style="max-width: 600px; width: 100%;">
                <div class="d-flex justify-content-between align-items-start mb-4">
                    <div>
                        <h3 class="h4 fw-light text-white mb-2">Add New Bond</h3>
                        <p class="small text-white-50 mb-0">Step <span id="bond-step-number">1</span> of 3</p>
                    </div>
                    <button onclick="closeAddBondModal()" class="btn-close btn-close-white" aria-label="Close"></button>
                </div>

                <form id="add-bond-form" onsubmit="submitAddBond(event)">
                    <!-- Step 1: Bond Type -->
                    <div id="bond-step-1" class="bond-step">
                        <label class="form-label small text-white-50 mb-2">Select Bond Type <span
                                class="text-danger">*</span></label>
                        <select id="bond-type" class="form-select glass-input py-3 mb-4" required>
                            <option value="" selected disabled>Choose category...</option>
                            <option value="Government">Government (Treasury / Sovereign)</option>
                            <option value="Corporate">Corporate (Investment Grade / High Yield)</option>
                            <option value="Municipal">Municipal Bond</option>
                            <option value="Agency">Agency Bond (GSE)</option>
                            <option value="Zero-Coupon">Zero-Coupon Bond</option>
                            <option value="Inflation-Linked">Inflation-Linked (TIPS)</option>
                            <option value="Convertible">Convertible Bond</option>
                            <option value="Green">Green / ESG Bond</option>
                            <option value="Floating Rate">Floating Rate Note (FRN)</option>
                        </select>
                        <div class="d-grid">
                            <button type="button" class="btn btn-primary glass-button py-3"
                                onclick="handleBondStep(2)">Next: Bond Details</button>
                        </div>
                    </div>

                    <!-- Step 2: Bond Details -->
                    <div id="bond-step-2" class="bond-step" style="display: none;">
                        <div class="mb-3">
                            <label class="form-label small text-white-50">Bond Ticker / Name <span
                                    class="text-danger">*</span></label>
                            <input type="text" id="bond-ticker" class="form-control glass-input"
                                placeholder="e.g. GOI-2030" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label small text-white-50">Issuer Name <span
                                    class="text-danger">*</span></label>
                            <input type="text" id="bond-issuer" class="form-control glass-input"
                                placeholder="e.g. Government of India" required>
                        </div>
                        <div class="row g-3 mb-4">
                            <div class="col-6">
                                <label class="form-label small text-white-50">Face Value (‚Çπ)</label>
                                <input type="number" id="bond-face-value" class="form-control glass-input"
                                    placeholder="10000" required oninput="updateBondCalculations()">
                            </div>
                            <div class="col-6">
                                <label class="form-label small text-white-50">Coupon Rate (%)</label>
                                <input type="number" id="bond-coupon" class="form-control glass-input" placeholder="7.5"
                                    step="0.01" required oninput="updateBondCalculations()">
                            </div>
                            <div class="col-12">
                                <label class="form-label small text-white-50">Maturity Date</label>
                                <input type="date" id="bond-maturity" class="form-control glass-input" required>
                            </div>
                        </div>

                        <!-- Purchase Date -->
                        <div class="mb-3">
                            <label class="form-label small text-white-50">Purchase Date</label>
                            <input type="date" id="bond-purchase-date" class="form-control glass-input"
                                style="color-scheme: dark;">
                        </div>

                        <div class="d-flex gap-3">
                            <button type="button" class="btn glass-button flex-fill"
                                onclick="handleBondStep(1)">Back</button>
                            <button type="button" class="btn btn-primary glass-button flex-fill"
                                onclick="handleBondStep(3)">Next: Purchase</button>
                        </div>
                    </div>

                    <!-- Step 3: Purchase Details -->
                    <div id="bond-step-3" class="bond-step" style="display: none;">
                        <div class="row g-3 mb-4">
                            <div class="col-6">
                                <label class="form-label small text-white-50">Quantity</label>
                                <input type="number" id="bond-quantity" class="form-control glass-input"
                                    placeholder="10" required oninput="updateBondCalculations()">
                            </div>
                            <div class="col-6">
                                <label class="form-label small text-white-50">Purchase Price (‚Çπ)</label>
                                <input type="number" id="bond-price" class="form-control glass-input"
                                    placeholder="10050" required oninput="updateBondCalculations()">
                            </div>
                        </div>

                        <!-- Preview Box -->
                        <div class="glass-card p-3 mb-4" style="background: rgba(255,255,255,0.02);">
                            <h6 class="text-white-60 small mb-3">Investment Summary</h6>
                            <div class="d-flex justify-content-between mb-2">
                                <span class="text-white-50 small">Total Investment</span>
                                <span class="text-white fw-medium" id="bond-total-invest">‚Çπ0</span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span class="text-white-50 small">Annual Income</span>
                                <span class="text-success fw-medium" id="bond-annual-income">‚Çπ0</span>
                            </div>
                        </div>

                        <div class="d-flex gap-3">
                            <button type="button" class="btn glass-button flex-fill"
                                onclick="handleBondStep(2)">Back</button>
                            <button type="submit" class="btn btn-primary glass-button flex-fill">Complete
                                Purchase</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bond Detail Modal -->
    <div id="bond-detail-modal" class="position-fixed top-0 start-0 w-100 h-100" style="z-index: 1055; display: none;">
        <!-- Injected via JS -->
    </div>

    <!-- ========== BUSINESS MODULE MODALS ========== -->

    <!-- Add Business Modal -->
    <div id="add-business-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 9999; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); display: none;">
        <div class="d-flex align-items-center justify-content-center h-100 p-4" style="overflow-y: auto;">
            <div class="d-flex flex-column"
                style="max-width: 700px; width: 100%; max-height: 90vh; border-radius: 24px; border: 1px solid rgba(255, 255, 255, 0.1); background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); box-shadow: inset 0 0 20px 0 rgba(255, 255, 255, 0.02), 0 0 50px 0 rgba(255, 255, 255, 0.05); overflow: hidden;">
                <div class="p-4" style="overflow-y: auto; flex: 1;">
                    <div class="d-flex justify-content-between align-items-start mb-4">
                        <div>
                            <h3 class="h4 fw-light text-white mb-2">Add New Business</h3>
                            <p class="small text-white-50 mb-0">Add a new venture to your portfolio</p>
                        </div>
                        <button onclick="closeAddBusinessModal()" class="btn-close btn-close-white"
                            aria-label="Close"></button>
                    </div>

                    <form id="add-business-form" onsubmit="submitNewBusiness(event)">
                        <!-- Core Identity -->
                        <div class="mb-4">
                            <h6 class="text-white-60 small mb-3 text-uppercase"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Core Identity</h6>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label small text-white-50 mb-1"
                                        style="font-size: 0.75rem;">Business
                                        Name <span class="text-danger">*</span></label>
                                    <input type="text" id="biz-name" class="form-control glass-input py-2"
                                        placeholder="e.g. Aether Technologies" required
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label small text-white-50 mb-1"
                                        style="font-size: 0.75rem;">Industry
                                        / Category <span class="text-danger">*</span></label>
                                    <select id="biz-industry" class="form-select glass-input py-2" required
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                        <option value="" class="text-dark">Select...</option>
                                        <option value="Technology" class="text-dark">Technology</option>
                                        <option value="Real Estate" class="text-dark">Real Estate</option>
                                        <option value="Retail" class="text-dark">Retail</option>
                                        <option value="Manufacturing" class="text-dark">Manufacturing</option>
                                        <option value="Services" class="text-dark">Services</option>
                                        <option value="Agriculture" class="text-dark">Agriculture</option>
                                        <option value="Logistics" class="text-dark">Logistics</option>
                                        <option value="Other" class="text-dark">Other</option>
                                    </select>
                                </div>
                                <div class="col-12">
                                    <label class="form-label small text-white-50 mb-1"
                                        style="font-size: 0.75rem;">Description (optional)</label>
                                    <input type="text" id="biz-description" class="form-control glass-input py-2"
                                        placeholder="Brief description of business operations"
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>
                                <div class="col-12">
                                    <label class="form-label small text-white-50 mb-1"
                                        style="font-size: 0.75rem;">Founded Date</label>
                                    <input type="date" id="biz-founded" class="form-control glass-input py-2"
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; color-scheme: dark;">
                                </div>
                            </div>
                        </div>

                        <!-- Ownership & Structure -->
                        <div class="mb-4">
                            <h6 class="text-white-60 small mb-3 text-uppercase"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Ownership & Structure</h6>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label small text-white-50 mb-1"
                                        style="font-size: 0.75rem;">Ownership
                                        Percentage <span class="text-danger">*</span></label>
                                    <div class="position-relative">
                                        <input type="number" id="biz-ownership" class="form-control glass-input py-2"
                                            placeholder="75" min="0.01" max="100" step="0.01" required
                                            style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; padding-right: 2rem;">
                                        <span
                                            class="position-absolute top-50 end-0 translate-middle-y pe-3 text-white-50"
                                            style="pointer-events: none;">%</span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label small text-white-50 mb-1"
                                        style="font-size: 0.75rem;">Ownership
                                        Type <span class="text-danger">*</span></label>
                                    <select id="biz-ownership-type" class="form-select glass-input py-2" required
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                        <option value="" class="text-dark">Select...</option>
                                        <option value="Sole Proprietor" class="text-dark">Sole Proprietor</option>
                                        <option value="Partnership" class="text-dark">Partnership</option>
                                        <option value="Corporation" class="text-dark">Corporation</option>
                                        <option value="Investor Stake" class="text-dark">Investor Stake</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Financial Metrics -->
                        <div class="mb-4">
                            <h6 class="text-white-60 small mb-3 text-uppercase"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Financial Metrics</h6>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label small text-white-50 mb-1"
                                        style="font-size: 0.75rem;">Current
                                        Valuation (‚Çπ) <span class="text-danger">*</span></label>
                                    <input type="number" id="biz-valuation" class="form-control glass-input py-2"
                                        placeholder="10000000" min="0" step="1" required
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label small text-white-50 mb-1"
                                        style="font-size: 0.75rem;">Monthly
                                        Revenue (‚Çπ) <span class="text-danger">*</span></label>
                                    <input type="number" id="biz-revenue" class="form-control glass-input py-2"
                                        placeholder="500000" min="0" step="1" required
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label small text-white-50 mb-1"
                                        style="font-size: 0.75rem;">Monthly
                                        Profit/Loss (‚Çπ) <span class="text-danger">*</span></label>
                                    <input type="number" id="biz-profit" class="form-control glass-input py-2"
                                        placeholder="100000" step="1" required
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label small text-white-50 mb-1"
                                        style="font-size: 0.75rem;">Operating
                                        Margin</label>
                                    <div class="form-control glass-input py-2 d-flex align-items-center"
                                        id="biz-margin-display"
                                        style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); color: rgba(255,255,255,0.5);">
                                        ‚Äî Auto-calculated ‚Äî
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Status & Health -->
                        <div class="mb-4">
                            <h6 class="text-white-60 small mb-3 text-uppercase"
                                style="letter-spacing: 0.1em; font-size: 0.7rem;">Status & Health</h6>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label small text-white-50 mb-1"
                                        style="font-size: 0.75rem;">Business
                                        Status <span class="text-danger">*</span></label>
                                    <select id="biz-status" class="form-select glass-input py-2" required
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                        <option value="" class="text-dark">Select...</option>
                                        <option value="Growing" class="text-dark">Growing</option>
                                        <option value="Stable" class="text-dark">Stable</option>
                                        <option value="Declining" class="text-dark">Declining</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label small text-white-50 mb-1"
                                        style="font-size: 0.75rem;">Founded
                                        Date (optional)</label>
                                    <input type="date" id="biz-founded" class="form-control glass-input py-2"
                                        style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-flex gap-3 mt-4">
                            <button type="button" onclick="closeAddBusinessModal()" class="btn flex-fill py-3"
                                style="flex: 1; padding: 12px 24px; border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.6); background: transparent;">
                                Cancel
                            </button>
                            <button type="submit" class="btn flex-fill py-3"
                                style="flex: 1; padding: 12px 24px; border-radius: 12px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: white; display: flex; align-items: center; justify-content: center; gap: 8px;">
                                <span>+</span> Add Business
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Business Document Modal -->
    <div id="add-business-document-modal" class="position-fixed top-0 start-0 w-100 h-100 hidden"
        style="z-index: 9999; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); display: none;">
        <div class="d-flex align-items-center justify-content-center h-100 p-4">
            <div class="p-4 custom-scrollbar"
                style="max-width: 550px; width: 100%; max-height: 90vh; overflow-y: auto; border-radius: 24px; border: 1px solid rgba(255, 255, 255, 0.1); background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); box-shadow: inset 0 0 20px 0 rgba(255, 255, 255, 0.02), 0 0 50px 0 rgba(255, 255, 255, 0.05); scrollbar-gutter: stable;">
                <div class="d-flex justify-content-between align-items-start mb-4">
                    <div>
                        <h3 class="h4 fw-light text-white mb-2">Add Document</h3>
                        <p class="small text-white-50 mb-0">Upload a document for your business</p>
                    </div>
                    <button onclick="closeAddDocumentModal()" class="btn-close btn-close-white"
                        aria-label="Close"></button>
                </div>

                <form id="add-business-document-form" onsubmit="submitNewDocument(event)">
                    <!-- 1. Related Business -->
                    <div class="mb-3">
                        <label class="form-label small text-white-50 mb-1" style="font-size: 0.75rem;">Related
                            Business
                            <span class="text-danger">*</span></label>
                        <select id="doc-business" class="form-select glass-input py-2" required
                            style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                            <option value="" class="text-dark">Select a business...</option>
                            <!-- Populated dynamically -->
                        </select>
                    </div>

                    <!-- 2. Document Name (Type) -->
                    <div class="mb-3">
                        <label class="form-label small text-white-50 mb-1" style="font-size: 0.75rem;">Document Name
                            <span class="text-danger">*</span></label>
                        <select id="doc-name" class="form-select glass-input py-2" required
                            onchange="toggleCustomDocName()"
                            style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                            <option value="" class="text-dark">Select document type...</option>
                            <option value="Tax Filing" class="text-dark">Tax Filing</option>
                            <option value="Contract" class="text-dark">Contract</option>
                            <option value="Registration" class="text-dark">Registration</option>
                            <option value="Property Deed" class="text-dark">Property Deed</option>
                            <option value="Financial Statement" class="text-dark">Financial Statement</option>
                            <option value="Other" class="text-dark">Other</option>
                        </select>
                    </div>

                    <!-- 2.1 Specify Document Name (Hidden by default) -->
                    <div id="doc-custom-name-wrapper" class="mb-3 hidden" style="display: none;">
                        <label class="form-label small text-white-50 mb-1" style="font-size: 0.75rem;">Specify
                            Document Name <span class="text-danger">*</span></label>
                        <input type="text" id="doc-custom-name" class="form-control glass-input py-2"
                            placeholder="e.g. Partnership Agreement"
                            style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;">
                    </div>

                    <!-- 3. Description (Optional) -->
                    <div class="mb-3">
                        <label class="form-label small text-white-50 mb-1" style="font-size: 0.75rem;">Description
                            (optional)</label>
                        <textarea id="doc-description" class="form-control glass-input py-2" rows="2"
                            placeholder="Brief description of the document..."
                            style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white;"></textarea>
                    </div>

                    <!-- 4. File Upload -->
                    <div class="mb-4">
                        <label class="form-label small text-white-50 mb-1" style="font-size: 0.75rem;">Upload
                            File</label>
                        <div class="p-3 rounded-3 text-center position-relative"
                            style="background: rgba(255,255,255,0.03); border: 2px dashed rgba(255,255,255,0.15); cursor: pointer;"
                            onclick="document.getElementById('doc-file').click()">
                            <svg width="32" height="32" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                class="mx-auto mb-2" style="opacity: 0.4;">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12">
                                </path>
                            </svg>
                            <p class="text-white-50 small mb-1">Click to browse</p>
                            <p class="text-white-40 mb-0" style="font-size: 0.65rem;">PDF, PNG, JPG, DOC (Max 10MB)
                            </p>
                            <input type="file" id="doc-file" class="d-none" accept=".pdf,.png,.jpg,.jpeg,.doc,.docx">
                            <p id="doc-file-name" class="small text-white-80 mt-2 mb-0"></p>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="d-flex gap-3">
                        <button type="button" onclick="closeAddDocumentModal()" class="btn flex-fill py-2"
                            style="border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.6); background: transparent;">
                            Cancel
                        </button>
                        <button type="submit" class="btn flex-fill py-2"
                            style="border-radius: 12px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: white;">
                            Add Document
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Inline Share Calculator Logic (Emergency Fix)
        window.updateShareCalculations = function () {
            console.log('Inline updateShareCalculations triggered');
            const quantity = parseFloat(document.getElementById('share-quantity').value) || 0;
            const avgPrice = parseFloat(document.getElementById('share-avg-price').value) || 0;
            const currentPrice = parseFloat(document.getElementById('share-current-price').value) || 0;

            const totalInvested = quantity * avgPrice;
            const currentValue = quantity * currentPrice;
            const profitLoss = currentValue - totalInvested;
            const profitLossPercent = totalInvested > 0 ? (profitLoss / totalInvested) * 100 : 0;

            // Toggle Visibility based on Quantity
            const container = document.getElementById('share-calculation-box');
            if (quantity > 0 && avgPrice > 0) {
                if (container) container.classList.remove('hidden');
            } else {
                if (container) container.classList.add('hidden');
            }

            // Update UI
            const totalInvEl = document.getElementById('shareTotalInvestment');
            if (totalInvEl) totalInvEl.textContent = `‚Çπ${totalInvested.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;

            const currValEl = document.getElementById('shareCurrentValue');
            if (currValEl) currValEl.textContent = `‚Çπ${currentValue.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;

            // Profit/Loss Styling
            const plElement = document.getElementById('shareProfitLoss');
            if (plElement) {
                plElement.textContent = `${profitLoss >= 0 ? '+' : ''}‚Çπ${Math.abs(profitLoss).toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
                plElement.className = `h5 fw-light mb-0 ${profitLoss >= 0 ? 'text-success' : 'text-danger'}`;
            }

            // Percent Styling
            const plPercentElement = document.getElementById('shareProfitLossPercent');
            if (plPercentElement) {
                plPercentElement.textContent = `${profitLossPercent >= 0 ? '+' : ''}${profitLossPercent.toFixed(2)}%`;
                plPercentElement.className = `h5 fw-light mb-0 ${profitLossPercent >= 0 ? 'text-success' : 'text-danger'}`;
            }
        };
    </script>



    <!-- Valuation Management Script -->


    <!-- Add Valuation Modal -->
    <div id="add-valuation-modal"
        class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80 backdrop-blur-sm transition-opacity duration-300"
        style="display: none;">
        <div class="glass-card p-5 rounded-4 w-100 position-relative animate-in fade-in zoom-in duration-300 border border-white border-opacity-10 shadow-lg"
            style="max-width: 400px; background: rgba(0,0,0,0.6); backdrop-filter: blur(20px);">

            <!-- Header -->
            <div
                class="d-flex justify-content-between align-items-center mb-4 border-bottom border-white border-opacity-10 pb-3">
                <h3 class="h5 fw-light text-white mb-0 tracking-wide" id="valuation-modal-title">Add Valuation Entry
                </h3>
                <button onclick="closeAddValuationModal()"
                    class="btn btn-icon btn-sm text-white-50 hover-text-white transition-colors p-1 rounded-circle hover-bg-white hover-bg-opacity-10">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <form id="addValuationForm" onsubmit="handleValuationSubmit(event)">
                <input type="hidden" id="val-id">
                <div class="d-flex flex-column gap-4">
                    <!-- Date Input -->
                    <div class="d-flex flex-column gap-2">
                        <label class="small text-uppercase text-white-50 fw-medium ls-1"
                            style="font-size: 0.7rem;">Valuation Date</label>
                        <input type="date" id="val-date" required class="form-control glass-input text-white fw-light"
                            style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; color-scheme: dark;">
                    </div>

                    <!-- Amount Input -->
                    <div class="d-flex flex-column gap-2">
                        <label class="small text-uppercase text-white-50 fw-medium ls-1"
                            style="font-size: 0.7rem;">Valuation Amount (‚Çπ)</label>
                        <div class="position-relative">
                            <span
                                class="position-absolute start-0 top-50 translate-middle-y ps-3 text-white-50">‚Çπ</span>
                            <input type="number" id="val-amount" required min="0" step="0.01" placeholder="0.00"
                                class="form-control glass-input text-white fw-light ps-4 font-monospace"
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; padding-left: 2rem !important;">
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="d-flex gap-3 pt-2">
                        <button type="button" onclick="closeAddValuationModal()"
                            class="btn flex-1 py-2 rounded-3 border border-white border-opacity-10 text-white-70 hover-bg-white hover-bg-opacity-5 hover-text-white transition-all fw-medium">
                            Cancel
                        </button>
                        <button type="submit" id="valuation-submit-btn"
                            class="btn flex-1 py-2 rounded-3 bg-white text-black hover-bg-opacity-90 transition-all fw-medium shadow-sm">
                            Add Entry
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- Remove Valuation Confirmation Modal -->
    <div id="remove-valuation-modal" class="position-fixed top-0 start-0 w-100 h-100"
        style="z-index: 1055; display: none;">
        <div class="position-absolute w-100 h-100"
            style="background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(10px); pointer-events: auto;"
            onclick="closeDeleteValuationModal()">
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 420px; padding: 1rem;">
            <div class="modal-glass position-relative">
                <!-- Header -->
                <div class="p-4 d-flex justify-content-between align-items-start">
                    <div>
                        <h2 class="h5 fw-light text-white mb-1" style="letter-spacing: -0.01em;">Delete Entry?</h2>
                        <p class="small mb-0" style="color: rgba(255, 255, 255, 0.45);">This action cannot be undone
                        </p>
                    </div>
                    <button onclick="closeDeleteValuationModal()" class="modal-close-btn" type="button">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- Content -->
                <div class="px-4 pb-4">
                    <p class="text-white-70 mb-4">Are you sure you want to delete this valuation entry?</p>

                    <!-- Actions -->
                    <div class="d-flex gap-3">
                        <button type="button" onclick="closeDeleteValuationModal()"
                            class="modal-btn-secondary flex-1 w-50">Cancel</button>
                        <button type="button" onclick="confirmDeleteValuation()"
                            class="modal-btn-primary flex-1 w-50 d-flex align-items-center justify-content-center gap-2"
                            style="background: rgba(239, 68, 68, 0.15); border-color: rgba(239, 68, 68, 0.3); color: #ef4444;">
                            Delete
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/modules/crypto/crypto-simulator.js" defer></script>
    <!-- crypto-insights.js loaded once above (line ~3111) -->
    <script src="js/modules/crypto/crypto-ai-lab.js?v=insights-v2" defer></script>

    <!-- Model Comparison Modal -->
    <div id="modelComparisonModal" class="modal fade" tabindex="-1" style="display: none;">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content"
                style="background: rgba(10, 10, 12, 0.98); border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(20px);">
                <div class="modal-header border-bottom border-white border-opacity-10">
                    <h5 class="modal-title text-white">Model Performance Comparison</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <p class="text-white-50 small mb-4">Historical accuracy metrics for Real Estate price predictions
                        over the last 30 days</p>

                    <!-- Model Cards -->
                    <div class="row g-4 mb-4">
                        <!-- Prophet -->
                        <div class="col-md-4">
                            <div class="p-4 rounded"
                                style="background: rgba(99, 102, 241, 0.1); border: 2px solid rgba(99, 102, 241, 0.3);">
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                    <div>
                                        <div class="d-flex align-items-center gap-2 mb-1">
                                            <div
                                                style="width: 12px; height: 12px; border-radius: 50%; background: #6366f1;">
                                            </div>
                                            <h6 class="text-white mb-0">Prophet</h6>
                                        </div>
                                        <p class="text-white-50 small mb-0">Time-series forecasting model</p>
                                    </div>
                                </div>

                                <!-- Win Rate Gauge -->
                                <div class="text-center mb-3">
                                    <div class="position-relative d-inline-block">
                                        <svg width="120" height="120" viewBox="0 0 120 120">
                                            <circle cx="60" cy="60" r="50" fill="none" stroke="rgba(255,255,255,0.1)"
                                                stroke-width="8" />
                                            <circle cx="60" cy="60" r="50" fill="none" stroke="#6366f1" stroke-width="8"
                                                stroke-dasharray="314" stroke-dashoffset="47"
                                                transform="rotate(-90 60 60)" stroke-linecap="round" />
                                        </svg>
                                        <div class="position-absolute top-50 start-50 translate-middle text-center">
                                            <div class="h3 text-white mb-0">85%</div>
                                            <div class="small text-white-50">Win Rate</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Metrics -->
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-white-50 small">MAE</span>
                                    <span class="text-white small">‚Çπ32.1k</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-white-50 small">RMSE</span>
                                    <span class="text-white small">‚Çπ45.2k</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-white-50 small">R¬≤ Score</span>
                                    <span class="text-white small">0.870</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-white-50 small">Last 30 Days</span>
                                    <span class="text-success small">25/30 predictions</span>
                                </div>
                            </div>
                        </div>

                        <!-- LSTM -->
                        <div class="col-md-4">
                            <div class="p-4 rounded"
                                style="background: rgba(59, 130, 246, 0.1); border: 2px solid rgba(59, 130, 246, 0.3);">
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                    <div>
                                        <div class="d-flex align-items-center gap-2 mb-1">
                                            <div
                                                style="width: 12px; height: 12px; border-radius: 50%; background: #3b82f6;">
                                            </div>
                                            <h6 class="text-white mb-0">LSTM</h6>
                                        </div>
                                        <p class="text-white-50 small mb-0">Neural network for pattern recognition</p>
                                    </div>
                                </div>

                                <!-- Win Rate Gauge -->
                                <div class="text-center mb-3">
                                    <div class="position-relative d-inline-block">
                                        <svg width="120" height="120" viewBox="0 0 120 120">
                                            <circle cx="60" cy="60" r="50" fill="none" stroke="rgba(255,255,255,0.1)"
                                                stroke-width="8" />
                                            <circle cx="60" cy="60" r="50" fill="none" stroke="#3b82f6" stroke-width="8"
                                                stroke-dasharray="314" stroke-dashoffset="94"
                                                transform="rotate(-90 60 60)" stroke-linecap="round" />
                                        </svg>
                                        <div class="position-absolute top-50 start-50 translate-middle text-center">
                                            <div class="h3 text-white mb-0">70%</div>
                                            <div class="small text-white-50">Win Rate</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Metrics -->
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-white-50 small">MAE</span>
                                    <span class="text-white small">‚Çπ41.8k</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-white-50 small">RMSE</span>
                                    <span class="text-white small">‚Çπ56.3k</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-white-50 small">R¬≤ Score</span>
                                    <span class="text-white small">0.782</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-white-50 small">Last 30 Days</span>
                                    <span class="text-warning small">21/30 predictions</span>
                                </div>
                            </div>
                        </div>

                        <!-- Ensemble -->
                        <div class="col-md-4">
                            <div class="p-4 rounded"
                                style="background: rgba(16, 185, 129, 0.1); border: 2px solid rgba(16, 185, 129, 0.3);">
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                    <div>
                                        <div class="d-flex align-items-center gap-2 mb-1">
                                            <div
                                                style="width: 12px; height: 12px; border-radius: 50%; background: #10b981;">
                                            </div>
                                            <h6 class="text-white mb-0">Ensemble</h6>
                                            <span class="badge bg-success small">Recommended</span>
                                        </div>
                                        <p class="text-white-50 small mb-0">Combined predictions from LSTM + Prophet</p>
                                    </div>
                                </div>

                                <!-- Win Rate Gauge -->
                                <div class="text-center mb-3">
                                    <div class="position-relative d-inline-block">
                                        <svg width="120" height="120" viewBox="0 0 120 120">
                                            <circle cx="60" cy="60" r="50" fill="none" stroke="rgba(255,255,255,0.1)"
                                                stroke-width="8" />
                                            <circle cx="60" cy="60" r="50" fill="none" stroke="#10b981" stroke-width="8"
                                                stroke-dasharray="314" stroke-dashoffset="31"
                                                transform="rotate(-90 60 60)" stroke-linecap="round" />
                                        </svg>
                                        <div class="position-absolute top-50 start-50 translate-middle text-center">
                                            <div class="h3 text-white mb-0">90%</div>
                                            <div class="small text-white-50">Win Rate</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Metrics -->
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-white-50 small">MAE</span>
                                    <span class="text-white small">‚Çπ28.4k</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-white-50 small">RMSE</span>
                                    <span class="text-white small">‚Çπ38.9k</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-white-50 small">R¬≤ Score</span>
                                    <span class="text-white small">0.912</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-white-50 small">Last 30 Days</span>
                                    <span class="text-success small">27/30 predictions</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recommendation -->
                    <div class="p-3 rounded"
                        style="background: rgba(16, 185, 129, 0.1); border-left: 3px solid #10b981;">
                        <div class="d-flex align-items-start gap-2">
                            <span style="font-size: 1.2rem;">üèÜ</span>
                            <div>
                                <div class="text-white-90 small mb-1"><strong>Recommended Model: Ensemble</strong></div>
                                <div class="text-white-60" style="font-size: 0.85rem;">
                                    Based on lowest MAE and highest win rate across all timeframes. The Ensemble model
                                    combines the strengths of both Prophet's seasonal pattern recognition and LSTM's
                                    pattern learning capabilities.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer border-top border-white border-opacity-10">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Profile Drawer Backdrop -->
    <div id="profileDrawerBackdrop" onclick="closeProfileDrawer()"
        style="position:fixed;inset:0;background:rgba(0,0,0,0.55);backdrop-filter:blur(4px);z-index:1000;opacity:0;pointer-events:none;transition:opacity 0.3s ease;">
    </div>

    <!-- Profile Slide-in Drawer -->
    <div id="profileDrawer"
        style="position:fixed;top:0;right:0;height:100vh;width:550px;background:rgba(255, 255, 255, 0.03);border-left:1px solid rgba(255, 255, 255, 0.10);z-index:1001;transform:translateX(100%);transition:transform 0.35s cubic-bezier(0.4,0,0.2,1);display:flex;flex-direction:column;overflow:hidden;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);box-shadow:inset 0 0 20px rgba(255, 255, 255, 0.02),-10px 0 60px rgba(0, 0, 0, 0.5);">

        <!-- Header -->
        <div
            style="display:flex;align-items:center;justify-content:space-between;padding:16px 24px;border-bottom:1px solid rgba(255,255,255,0.06);flex-shrink:0;">
            <span
                style="color:rgba(255,255,255,0.3);font-size:0.62rem;letter-spacing:0.12em;text-transform:uppercase;">Account</span>
            <button onclick="closeProfileDrawer()"
                style="background:none;border:none;color:rgba(255,255,255,0.3);cursor:pointer;font-size:1.1rem;padding:2px 6px;border-radius:4px;transition:color 0.15s;"
                onmouseover="this.style.color='#fff'"
                onmouseout="this.style.color='rgba(255,255,255,0.3)'">&#x2715;</button>
        </div>

        <!-- Identity -->
        <div style="padding:24px;text-align:center;border-bottom:1px solid rgba(255,255,255,0.06);flex-shrink:0;">
            <div id="drawerInitials"
                style="width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700;color:#fff;margin:0 auto 12px;">
                U</div>
            <div id="drawerName" style="color:#fff;font-size:1rem;font-weight:500;margin-bottom:4px;">‚Äî</div>
            <div id="drawerEmail" style="color:rgba(255,255,255,0.4);font-size:0.78rem;">‚Äî</div>
        </div>

        <!-- Settings Two-Panel -->
        <div style="display:flex;flex:1;min-height:0;">

            <!-- Left Nav -->
            <div
                style="width:130px;flex-shrink:0;border-right:1px solid rgba(255,255,255,0.06);padding:10px 6px;display:flex;flex-direction:column;gap:2px;background:rgba(0,0,0,0.12);overflow-y:auto;">
                <div
                    style="color:rgba(255,255,255,0.22);font-size:0.57rem;letter-spacing:0.12em;text-transform:uppercase;padding:2px 8px 8px;">
                    Settings</div>

                <button onclick="switchSettingsPanel('privacy')" id="snav-privacy" class="snav-btn"
                    style="width:100%;border-radius:12px;cursor:pointer;text-align:left;display:flex;flex-direction:row;align-items:center;gap:10px;padding:10px 12px;transition:all 0.18s;background:linear-gradient(90deg, rgb(var(--accent-rgb)/0.14) 0%, transparent 100%);border:1px solid rgba(255,255,255,0.05);border-left:2px solid var(--accent-1);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);box-shadow:inset 0 0 10px rgba(255,255,255,0.02),0 0 10px rgb(var(--accent-rgb)/0.25);">
                    <span style="font-size:0.9rem;">&#x1F575;&#xFE0F;</span><span
                        style="color:#fff;font-size:0.75rem;font-weight:600;letter-spacing:0.03em;">Privacy</span>
                </button>
                <button onclick="switchSettingsPanel('currency')" id="snav-currency" class="snav-btn"
                    style="width:100%;background:none;border:1px solid transparent;border-left:2px solid transparent;border-radius:12px;padding:10px 12px;cursor:pointer;text-align:left;display:flex;flex-direction:row;align-items:center;gap:10px;transition:all 0.18s;"
                    onmouseover="this.style.background='rgba(255,255,255,0.03)'"
                    onmouseout="this.style.background='none'">
                    <span style="font-size:0.9rem;">&#x1F4B1;</span><span
                        style="color:rgba(255,255,255,0.6);font-size:0.75rem;font-weight:500;">Currency</span>
                </button>
                <button onclick="switchSettingsPanel('alerts')" id="snav-alerts" class="snav-btn"
                    style="width:100%;background:none;border:1px solid transparent;border-left:2px solid transparent;border-radius:12px;padding:10px 12px;cursor:pointer;text-align:left;display:flex;flex-direction:row;align-items:center;gap:10px;transition:all 0.18s;"
                    onmouseover="this.style.background='rgba(255,255,255,0.03)'"
                    onmouseout="this.style.background='none'">
                    <span style="font-size:0.9rem;">&#x1F514;</span><span
                        style="color:rgba(255,255,255,0.6);font-size:0.75rem;font-weight:500;">Alerts</span>
                </button>
                <button onclick="switchSettingsPanel('export')" id="snav-export" class="snav-btn"
                    style="width:100%;background:none;border:1px solid transparent;border-left:2px solid transparent;border-radius:12px;padding:10px 12px;cursor:pointer;text-align:left;display:flex;flex-direction:row;align-items:center;gap:10px;transition:all 0.18s;"
                    onmouseover="this.style.background='rgba(255,255,255,0.03)'"
                    onmouseout="this.style.background='none'">
                    <span style="font-size:0.9rem;">&#x1F4E4;</span><span
                        style="color:rgba(255,255,255,0.6);font-size:0.75rem;font-weight:500;">Export</span>
                </button>
                <button onclick="switchSettingsPanel('security')" id="snav-security" class="snav-btn"
                    style="width:100%;background:none;border:1px solid transparent;border-left:2px solid transparent;border-radius:12px;padding:10px 12px;cursor:pointer;text-align:left;display:flex;flex-direction:row;align-items:center;gap:10px;transition:all 0.18s;"
                    onmouseover="this.style.background='rgba(255,255,255,0.03)'"
                    onmouseout="this.style.background='none'">
                    <span style="font-size:0.9rem;">&#x1F510;</span><span
                        style="color:rgba(255,255,255,0.6);font-size:0.75rem;font-weight:500;">Security</span>
                </button>
                <button onclick="switchSettingsPanel('appearance')" id="snav-appearance" class="snav-btn"
                    style="width:100%;background:none;border:1px solid transparent;border-left:2px solid transparent;border-radius:12px;padding:10px 12px;cursor:pointer;text-align:left;display:flex;flex-direction:row;align-items:center;gap:10px;transition:all 0.18s;"
                    onmouseover="this.style.background='rgba(255,255,255,0.03)'"
                    onmouseout="this.style.background='none'">
                    <span style="font-size:0.9rem;">&#x1F3A8;</span><span
                        style="color:rgba(255,255,255,0.6);font-size:0.75rem;font-weight:500;">Appearance</span>
                </button>
                <button onclick="switchSettingsPanel('defaultpage')" id="snav-defaultpage" class="snav-btn"
                    style="width:100%;background:none;border:1px solid transparent;border-left:2px solid transparent;border-radius:12px;padding:10px 12px;cursor:pointer;text-align:left;display:flex;flex-direction:row;align-items:center;gap:10px;transition:all 0.18s;"
                    onmouseover="this.style.background='rgba(255,255,255,0.03)'"
                    onmouseout="this.style.background='none'">
                    <span style="font-size:0.9rem;">&#x1F3E0;</span><span
                        style="color:rgba(255,255,255,0.6);font-size:0.75rem;font-weight:500;">Default Page</span>
                </button>

                <button onclick="switchSettingsPanel('refresh')" id="snav-refresh" class="snav-btn"
                    style="width:100%;background:none;border:1px solid transparent;border-left:2px solid transparent;border-radius:12px;padding:10px 12px;cursor:pointer;text-align:left;display:flex;flex-direction:row;align-items:center;gap:10px;transition:all 0.18s;"
                    onmouseover="this.style.background='rgba(255,255,255,0.03)'"
                    onmouseout="this.style.background='none'">
                    <span style="font-size:0.9rem;">&#x1F504;</span><span
                        style="color:rgba(255,255,255,0.6);font-size:0.75rem;font-weight:500;">Data Refresh</span>
                </button>
            </div>

            <!-- Right Content -->
            <div style="flex:1;padding:20px;overflow-y:auto;">

                <!-- Privacy -->
                <div id="spanel-privacy" class="spanel glass-card">
                    <div
                        style="color:var(--accent-1);font-size:0.75rem;letter-spacing:0.15em;text-transform:uppercase;margin-bottom:20px;font-weight:600;">
                        Privacy Mode</div>
                    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
                        <div>
                            <div style="color:#fff;font-size:0.95rem;font-weight:500;margin-bottom:6px;">Blur
                                financial figures</div>
                            <div style="color:rgba(255,255,255,0.4);font-size:0.8rem;letter-spacing:0.02em;">Hides all
                                amounts across the dashboard</div>
                        </div>
                        <label class="glass-toggle"
                            style="position:relative;display:inline-block;width:52px;height:28px;cursor:pointer;flex-shrink:0;">
                            <input type="checkbox" id="privacyModeToggle" onchange="togglePrivacyMode(this.checked)"
                                style="opacity:0;width:0;height:0;">
                            <span id="privacyModeTrack"
                                style="position:absolute;inset:0;border-radius:24px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);transition:background 0.3s, border-color 0.3s;"></span>
                            <span id="privacyModeThumb"
                                style="position:absolute;top:4px;left:4px;width:20px;height:20px;border-radius:50%;background:rgba(255,255,255,0.8);box-shadow:0 2px 5px rgba(0,0,0,0.3);transition:transform 0.3s cubic-bezier(0.4,0,0.2,1),background 0.3s;"></span>
                        </label>
                    </div>
                    <div
                        style="color:rgba(255,255,255,0.3);font-size:0.75rem;padding-top:16px;border-top:1px solid rgba(255,255,255,0.06);">
                        <span style="color:var(--accent-1);margin-right:6px;">&#x2728;</span> Hover over any blurred
                        value to temporarily reveal it.
                    </div>
                </div>

                <!-- Currency -->
                <div id="spanel-currency" class="spanel glass-card" style="display:none;">
                    <div
                        style="color:var(--accent-1);font-size:0.75rem;letter-spacing:0.15em;text-transform:uppercase;margin-bottom:20px;font-weight:600;">
                        Currency Display</div>

                    <!-- Live rate status bar -->
                    <div
                        style="display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding:12px 16px;background:rgba(0,0,0,0.2);border-radius:12px;border:1px solid rgba(255,255,255,0.06);">
                        <div style="display:flex;align-items:center;gap:10px;">
                            <span id="fxStatusDot"
                                style="width:8px;height:8px;border-radius:50%;background:#f59e0b;display:inline-block;box-shadow:0 0 10px rgba(245,158,11,0.5);"></span>
                            <span id="fxStatusText"
                                style="color:rgba(255,255,255,0.5);font-size:0.8rem;letter-spacing:0.02em;">Fetching
                                live rates‚Ä¶</span>
                        </div>
                        <button onclick="fetchLiveRates(true)"
                            style="background:none;border:none;color:var(--accent-2);font-size:0.75rem;cursor:pointer;padding:4px 8px;border-radius:6px;transition:all 0.2s;"
                            onmouseover="this.style.background='rgba(255,255,255,0.05)';this.style.color='#fff';"
                            onmouseout="this.style.background='none';this.style.color='var(--accent-2)';">&#x21bb;
                            Refresh</span></button>
                    </div>

                    <!-- Currency grid -->
                    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;">
                        <button id="currBtn-INR" onclick="setCurrency('INR')" class="glass-button curr-pill"
                            style="padding:14px 8px;display:flex;flex-direction:column;align-items:center;gap:6px;">
                            <span style="font-size:1.2rem;">üáÆüá≥</span><span
                                style="font-weight:600;font-size:0.8rem;letter-spacing:0.03em;">‚Çπ INR</span>
                        </button>
                        <button id="currBtn-USD" onclick="setCurrency('USD')" class="glass-button curr-pill"
                            style="padding:14px 8px;display:flex;flex-direction:column;align-items:center;gap:6px;">
                            <span style="font-size:1.2rem;">üá∫üá∏</span><span
                                style="font-weight:600;font-size:0.8rem;letter-spacing:0.03em;">$ USD</span>
                        </button>
                        <button id="currBtn-EUR" onclick="setCurrency('EUR')" class="glass-button curr-pill"
                            style="padding:14px 8px;display:flex;flex-direction:column;align-items:center;gap:6px;">
                            <span style="font-size:1.2rem;">üá™üá∫</span><span
                                style="font-weight:600;font-size:0.8rem;letter-spacing:0.03em;">‚Ç¨ EUR</span>
                        </button>
                        <button id="currBtn-GBP" onclick="setCurrency('GBP')" class="glass-button curr-pill"
                            style="padding:14px 8px;display:flex;flex-direction:column;align-items:center;gap:6px;">
                            <span style="font-size:1.2rem;">üá¨üáß</span><span
                                style="font-weight:600;font-size:0.8rem;letter-spacing:0.03em;">¬£ GBP</span>
                        </button>
                        <button id="currBtn-RUB" onclick="setCurrency('RUB')" class="glass-button curr-pill"
                            style="padding:14px 8px;display:flex;flex-direction:column;align-items:center;gap:6px;">
                            <span style="font-size:1.2rem;">üá∑üá∫</span><span
                                style="font-weight:600;font-size:0.8rem;letter-spacing:0.03em;">‚ÇΩ RUB</span>
                        </button>
                        <button id="currBtn-JPY" onclick="setCurrency('JPY')" class="glass-button curr-pill"
                            style="padding:14px 8px;display:flex;flex-direction:column;align-items:center;gap:6px;">
                            <span style="font-size:1.2rem;">üáØüáµ</span><span
                                style="font-weight:600;font-size:0.8rem;letter-spacing:0.03em;">¬• JPY</span>
                        </button>
                        <button id="currBtn-AED" onclick="setCurrency('AED')" class="glass-button curr-pill"
                            style="padding:14px 8px;display:flex;flex-direction:column;align-items:center;gap:6px;">
                            <span style="font-size:1.2rem;">üá¶üá™</span><span
                                style="font-weight:600;font-size:0.8rem;letter-spacing:0.03em;">ÿØ.ÿ• AED</span>
                        </button>
                        <button id="currBtn-SGD" onclick="setCurrency('SGD')" class="glass-button curr-pill"
                            style="padding:14px 8px;display:flex;flex-direction:column;align-items:center;gap:6px;">
                            <span style="font-size:1.2rem;">üá∏üá¨</span><span
                                style="font-weight:600;font-size:0.8rem;letter-spacing:0.03em;">S$ SGD</span>
                        </button>
                        <button id="currBtn-CHF" onclick="setCurrency('CHF')" class="glass-button curr-pill"
                            style="padding:14px 8px;display:flex;flex-direction:column;align-items:center;gap:6px;">
                            <span style="font-size:1.2rem;">üá®üá≠</span><span
                                style="font-weight:600;font-size:0.8rem;letter-spacing:0.03em;">Fr CHF</span>
                        </button>
                    </div>
                </div>

                <!-- Alerts -->
                <div id="spanel-alerts" class="spanel glass-card" style="display:none;">
                    <div
                        style="color:var(--accent-1);font-size:0.75rem;letter-spacing:0.15em;text-transform:uppercase;margin-bottom:20px;font-weight:600;">
                        Notification Alerts</div>
                    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
                        <div>
                            <div style="color:#fff;font-size:0.95rem;font-weight:500;margin-bottom:6px;">Enable all
                                alerts</div>
                            <div style="color:rgba(255,255,255,0.4);font-size:0.8rem;letter-spacing:0.02em;">Maturity
                                dates, price movements & news</div>
                        </div>
                        <label class="glass-toggle"
                            style="position:relative;display:inline-block;width:52px;height:28px;cursor:pointer;flex-shrink:0;">
                            <input type="checkbox" id="notifToggle" onchange="toggleNotifications(this.checked)" checked
                                style="opacity:0;width:0;height:0;">
                            <span id="notifTrack"
                                style="position:absolute;inset:0;border-radius:24px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);transition:background 0.3s, border-color 0.3s;"></span>
                            <span id="notifThumb"
                                style="position:absolute;top:4px;left:4px;width:20px;height:20px;border-radius:50%;background:rgba(255,255,255,0.8);box-shadow:0 2px 5px rgba(0,0,0,0.3);transform:translateX(0);transition:transform 0.3s cubic-bezier(0.4,0,0.2,1),background 0.3s;"></span>
                        </label>
                    </div>
                    <div
                        style="color:rgba(255,255,255,0.3);font-size:0.75rem;padding-top:16px;border-top:1px solid rgba(255,255,255,0.06);">
                        <span style="color:var(--accent-1);margin-right:6px;">&#x2728;</span> Alerts appear as banners
                        when important events occur.
                    </div>
                </div>

                <!-- Export -->
                <div id="spanel-export" class="spanel glass-card" style="display:none;">
                    <div
                        style="color:var(--accent-1);font-size:0.75rem;letter-spacing:0.15em;text-transform:uppercase;margin-bottom:20px;font-weight:600;">
                        Export Portfolio</div>
                    <div style="margin-bottom:24px;">
                        <div style="color:#fff;font-size:0.95rem;font-weight:500;margin-bottom:6px;">Download as CSV
                        </div>
                        <div style="color:rgba(255,255,255,0.4);font-size:0.8rem;line-height:1.5;">Exports a detailed
                            ledger of all assets across Real Estate, Crypto, Shares, Bonds, and Business holdings.</div>
                    </div>
                    <button onclick="exportPortfolioCSV()" class="modal-btn-primary"
                        style="width:100%;padding:14px;display:flex;align-items:center;justify-content:center;gap:10px;">
                        <span>&#x2193;</span> <span>Export Portfolio Data</span>
                    </button>
                    <div
                        style="color:rgba(255,255,255,0.3);font-size:0.75rem;padding-top:16px;margin-top:20px;border-top:1px solid rgba(255,255,255,0.06);">
                        <span style="margin-right:6px;">&#128193;</span> File will be saved as
                        <em>aether-portfolio-YYYY-MM-DD.csv</em>
                    </div>
                </div>

                <!-- Security -->
                <div id="spanel-security" class="spanel glass-card" style="display:none;">
                    <div
                        style="color:var(--accent-1);font-size:0.75rem;letter-spacing:0.15em;text-transform:uppercase;margin-bottom:20px;font-weight:600;">
                        Security & Access</div>

                    <div
                        style="display:flex;align-items:center;gap:16px;margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid rgba(255,255,255,0.06);">
                        <div
                            style="width:48px;height:48px;border-radius:50%;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);display:flex;align-items:center;justify-content:center;font-size:1.5rem;">
                            &#x1F510;</div>
                        <div style="flex:1;">
                            <div
                                style="color:rgba(255,255,255,0.4);font-size:0.75rem;margin-bottom:4px;letter-spacing:0.02em;">
                                Account Status</div>
                            <div style="display:flex;align-items:center;gap:10px;">
                                <div
                                    style="width:8px;height:8px;border-radius:50%;background:#4ade80;box-shadow:0 0 10px rgba(74,222,128,0.5);">
                                </div>
                                <div style="color:#fff;font-size:0.9rem;font-weight:500;">Active Session</div>
                            </div>
                        </div>
                    </div>

                    <div style="margin-bottom:16px;">
                        <div
                            style="color:rgba(255,255,255,0.4);font-size:0.75rem;margin-bottom:4px;letter-spacing:0.02em;">
                            Signed in as</div>
                        <div id="securityEmail"
                            style="color:#fff;font-size:0.9rem;font-weight:500;letter-spacing:0.02em;">&#x2014;</div>
                    </div>

                    <div>
                        <div
                            style="color:rgba(255,255,255,0.4);font-size:0.75rem;margin-bottom:4px;letter-spacing:0.02em;">
                            Last signed in</div>
                        <div id="lastLoginDisplay"
                            style="color:#fff;font-size:0.9rem;font-weight:500;letter-spacing:0.02em;">&#x2014;</div>
                    </div>
                </div>

                <!-- Appearance -->
                <div id="spanel-appearance" class="spanel glass-card" style="display:none;">
                    <div
                        style="color:var(--accent-1);font-size:0.75rem;letter-spacing:0.15em;text-transform:uppercase;margin-bottom:20px;font-weight:600;">
                        Visual Appearance</div>

                    <!-- Section title -->
                    <div style="color:#fff;font-size:0.95rem;font-weight:500;margin-bottom:4px;">Accent Color</div>
                    <div style="color:rgba(255,255,255,0.4);font-size:0.8rem;line-height:1.5;margin-bottom:28px;">Hover
                        to preview ¬∑ Click to apply. Colors cascade dynamically across the entire interface.</div>

                    <!-- id="accent-swatches" is kept for _markAccent compatibility -->
                    <div id="accent-swatches" style="display:flex;flex-direction:column;gap:20px;">

                        <!-- ‚ùÑÔ∏è COLD group -->
                        <div>
                            <div
                                style="color:rgba(255,255,255,0.25);font-size:0.65rem;letter-spacing:0.18em;text-transform:uppercase;margin-bottom:10px;padding-left:2px;">
                                ‚ùÑÔ∏è &nbsp;Cold</div>
                            <div style="display:flex;flex-direction:column;gap:8px;">

                                <!-- Arctic -->
                                <button class="accent-strip-btn"
                                    onclick="setAccentColor('#cceeff','#99ddff');_markAccent(this)"
                                    onmouseenter="_previewAccent('#cceeff','#99ddff')" onmouseleave="_restoreAccent()"
                                    data-c1="#cceeff" data-c2="#99ddff"
                                    style="all:unset;display:flex;align-items:center;gap:0;cursor:pointer;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);transition:border-color 0.2s,box-shadow 0.2s;"
                                    onmouseover="this.style.borderColor='rgba(204,238,255,0.3)';this.style.boxShadow='0 0 18px rgba(204,238,255,0.18)'"
                                    onmouseout="this.style.borderColor='rgba(255,255,255,0.06)';this.style.boxShadow='none'">
                                    <div
                                        style="width:52px;height:52px;background:linear-gradient(135deg,#cceeff,#99ddff);flex-shrink:0;">
                                    </div>
                                    <div style="flex:1;padding:10px 14px;background:rgba(204,238,255,0.04);">
                                        <div
                                            style="color:#fff;font-size:0.82rem;font-weight:600;margin-bottom:2px;letter-spacing:0.02em;">
                                            Arctic</div>
                                        <div
                                            style="color:rgba(255,255,255,0.35);font-size:0.7rem;font-family:monospace;">
                                            #CCEEFF</div>
                                    </div>
                                </button>

                                <!-- Obsidian Night -->
                                <button class="accent-strip-btn"
                                    onclick="setAccentColor('#1e3a8a','#172554');_markAccent(this)"
                                    onmouseenter="_previewAccent('#1e3a8a','#172554')" onmouseleave="_restoreAccent()"
                                    data-c1="#1e3a8a" data-c2="#172554"
                                    style="all:unset;display:flex;align-items:center;gap:0;cursor:pointer;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);transition:border-color 0.2s,box-shadow 0.2s;"
                                    onmouseover="this.style.borderColor='rgba(30,58,138,0.5)';this.style.boxShadow='0 0 18px rgba(30,58,138,0.25)'"
                                    onmouseout="this.style.borderColor='rgba(255,255,255,0.06)';this.style.boxShadow='none'">
                                    <div
                                        style="width:52px;height:52px;background:linear-gradient(135deg,#1e3a8a,#172554);flex-shrink:0;">
                                    </div>
                                    <div style="flex:1;padding:10px 14px;background:rgba(30,58,138,0.06);">
                                        <div
                                            style="color:#fff;font-size:0.82rem;font-weight:600;margin-bottom:2px;letter-spacing:0.02em;">
                                            Obsidian Night</div>
                                        <div
                                            style="color:rgba(255,255,255,0.35);font-size:0.7rem;font-family:monospace;">
                                            #1E3A8A</div>
                                    </div>
                                </button>

                                <!-- Titanium -->
                                <button class="accent-strip-btn"
                                    onclick="setAccentColor('#94a3b8','#64748b');_markAccent(this)"
                                    onmouseenter="_previewAccent('#94a3b8','#64748b')" onmouseleave="_restoreAccent()"
                                    data-c1="#94a3b8" data-c2="#64748b"
                                    style="all:unset;display:flex;align-items:center;gap:0;cursor:pointer;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);transition:border-color 0.2s,box-shadow 0.2s;"
                                    onmouseover="this.style.borderColor='rgba(148,163,184,0.4)';this.style.boxShadow='0 0 18px rgba(148,163,184,0.18)'"
                                    onmouseout="this.style.borderColor='rgba(255,255,255,0.06)';this.style.boxShadow='none'">
                                    <div
                                        style="width:52px;height:52px;background:linear-gradient(135deg,#94a3b8,#64748b);flex-shrink:0;">
                                    </div>
                                    <div style="flex:1;padding:10px 14px;background:rgba(148,163,184,0.04);">
                                        <div
                                            style="color:#fff;font-size:0.82rem;font-weight:600;margin-bottom:2px;letter-spacing:0.02em;">
                                            Titanium</div>
                                        <div
                                            style="color:rgba(255,255,255,0.35);font-size:0.7rem;font-family:monospace;">
                                            #94A3B8</div>
                                    </div>
                                </button>

                                <!-- Ivory -->
                                <button class="accent-strip-btn"
                                    onclick="setAccentColor('#e8e8f0','#b0b0c8');_markAccent(this)"
                                    onmouseenter="_previewAccent('#e8e8f0','#b0b0c8')" onmouseleave="_restoreAccent()"
                                    data-c1="#e8e8f0" data-c2="#b0b0c8"
                                    style="all:unset;display:flex;align-items:center;gap:0;cursor:pointer;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);transition:border-color 0.2s,box-shadow 0.2s;"
                                    onmouseover="this.style.borderColor='rgba(232,232,240,0.35)';this.style.boxShadow='0 0 18px rgba(232,232,240,0.12)'"
                                    onmouseout="this.style.borderColor='rgba(255,255,255,0.06)';this.style.boxShadow='none'">
                                    <div
                                        style="width:52px;height:52px;background:linear-gradient(135deg,#e8e8f0,#b0b0c8);flex-shrink:0;">
                                    </div>
                                    <div style="flex:1;padding:10px 14px;background:rgba(232,232,240,0.03);">
                                        <div
                                            style="color:#fff;font-size:0.82rem;font-weight:600;margin-bottom:2px;letter-spacing:0.02em;">
                                            Ivory</div>
                                        <div
                                            style="color:rgba(255,255,255,0.35);font-size:0.7rem;font-family:monospace;">
                                            #E8E8F0</div>
                                    </div>
                                </button>

                                <!-- Midnight Indigo -->
                                <button class="accent-strip-btn"
                                    onclick="setAccentColor('#1e0e51','#0e0728');_markAccent(this)"
                                    onmouseenter="_previewAccent('#1e0e51','#0e0728')" onmouseleave="_restoreAccent()"
                                    data-c1="#1e0e51" data-c2="#0e0728"
                                    style="all:unset;display:flex;align-items:center;gap:0;cursor:pointer;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);transition:border-color 0.2s,box-shadow 0.2s;"
                                    onmouseover="this.style.borderColor='rgba(30,14,81,0.6)';this.style.boxShadow='0 0 18px rgba(30,14,81,0.35)'"
                                    onmouseout="this.style.borderColor='rgba(255,255,255,0.06)';this.style.boxShadow='none'">
                                    <div
                                        style="width:52px;height:52px;background:linear-gradient(135deg,#1e0e51,#0e0728);flex-shrink:0;">
                                    </div>
                                    <div style="flex:1;padding:10px 14px;background:rgba(30,14,81,0.06);">
                                        <div
                                            style="color:#fff;font-size:0.82rem;font-weight:600;margin-bottom:2px;letter-spacing:0.02em;">
                                            Midnight Indigo</div>
                                        <div
                                            style="color:rgba(255,255,255,0.35);font-size:0.7rem;font-family:monospace;">
                                            #1E0E51</div>
                                    </div>
                                </button>

                            </div>
                        </div>

                        <!-- üå∏ VIVID group -->
                        <div>
                            <div
                                style="color:rgba(255,255,255,0.25);font-size:0.65rem;letter-spacing:0.18em;text-transform:uppercase;margin-bottom:10px;padding-left:2px;">
                                üå∏ &nbsp;Vivid</div>
                            <div style="display:flex;flex-direction:column;gap:8px;">

                                <!-- Crimson Dusk -->
                                <button class="accent-strip-btn"
                                    onclick="setAccentColor('#ff677d','#e8394f');_markAccent(this)"
                                    onmouseenter="_previewAccent('#ff677d','#e8394f')" onmouseleave="_restoreAccent()"
                                    data-c1="#ff677d" data-c2="#e8394f"
                                    style="all:unset;display:flex;align-items:center;gap:0;cursor:pointer;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);transition:border-color 0.2s,box-shadow 0.2s;"
                                    onmouseover="this.style.borderColor='rgba(255,103,125,0.4)';this.style.boxShadow='0 0 18px rgba(255,103,125,0.22)'"
                                    onmouseout="this.style.borderColor='rgba(255,255,255,0.06)';this.style.boxShadow='none'">
                                    <div
                                        style="width:52px;height:52px;background:linear-gradient(135deg,#ff677d,#e8394f);flex-shrink:0;">
                                    </div>
                                    <div style="flex:1;padding:10px 14px;background:rgba(255,103,125,0.04);">
                                        <div
                                            style="color:#fff;font-size:0.82rem;font-weight:600;margin-bottom:2px;letter-spacing:0.02em;">
                                            Crimson Dusk</div>
                                        <div
                                            style="color:rgba(255,255,255,0.35);font-size:0.7rem;font-family:monospace;">
                                            #FF677D</div>
                                    </div>
                                </button>

                                <!-- Wisteria -->
                                <button class="accent-strip-btn"
                                    onclick="setAccentColor('#c084fc','#9333ea');_markAccent(this)"
                                    onmouseenter="_previewAccent('#c084fc','#9333ea')" onmouseleave="_restoreAccent()"
                                    data-c1="#c084fc" data-c2="#9333ea"
                                    style="all:unset;display:flex;align-items:center;gap:0;cursor:pointer;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);transition:border-color 0.2s,box-shadow 0.2s;"
                                    onmouseover="this.style.borderColor='rgba(192,132,252,0.4)';this.style.boxShadow='0 0 18px rgba(192,132,252,0.22)'"
                                    onmouseout="this.style.borderColor='rgba(255,255,255,0.06)';this.style.boxShadow='none'">
                                    <div
                                        style="width:52px;height:52px;background:linear-gradient(135deg,#c084fc,#9333ea);flex-shrink:0;">
                                    </div>
                                    <div style="flex:1;padding:10px 14px;background:rgba(192,132,252,0.04);">
                                        <div
                                            style="color:#fff;font-size:0.82rem;font-weight:600;margin-bottom:2px;letter-spacing:0.02em;">
                                            Wisteria</div>
                                        <div
                                            style="color:rgba(255,255,255,0.35);font-size:0.7rem;font-family:monospace;">
                                            #C084FC</div>
                                    </div>
                                </button>

                                <!-- Peach Cloud -->
                                <button class="accent-strip-btn"
                                    onclick="setAccentColor('#fdba74','#f97316');_markAccent(this)"
                                    onmouseenter="_previewAccent('#fdba74','#f97316')" onmouseleave="_restoreAccent()"
                                    data-c1="#fdba74" data-c2="#f97316"
                                    style="all:unset;display:flex;align-items:center;gap:0;cursor:pointer;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);transition:border-color 0.2s,box-shadow 0.2s;"
                                    onmouseover="this.style.borderColor='rgba(253,186,116,0.4)';this.style.boxShadow='0 0 18px rgba(253,186,116,0.22)'"
                                    onmouseout="this.style.borderColor='rgba(255,255,255,0.06)';this.style.boxShadow='none'">
                                    <div
                                        style="width:52px;height:52px;background:linear-gradient(135deg,#fdba74,#f97316);flex-shrink:0;">
                                    </div>
                                    <div style="flex:1;padding:10px 14px;background:rgba(253,186,116,0.04);">
                                        <div
                                            style="color:#fff;font-size:0.82rem;font-weight:600;margin-bottom:2px;letter-spacing:0.02em;">
                                            Peach Cloud</div>
                                        <div
                                            style="color:rgba(255,255,255,0.35);font-size:0.7rem;font-family:monospace;">
                                            #FDBA74</div>
                                    </div>
                                </button>

                                <!-- Ocean Teal -->
                                <button class="accent-strip-btn"
                                    onclick="setAccentColor('#14b8a6','#0f766e');_markAccent(this)"
                                    onmouseenter="_previewAccent('#14b8a6','#0f766e')" onmouseleave="_restoreAccent()"
                                    data-c1="#14b8a6" data-c2="#0f766e"
                                    style="all:unset;display:flex;align-items:center;gap:0;cursor:pointer;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);transition:border-color 0.2s,box-shadow 0.2s;"
                                    onmouseover="this.style.borderColor='rgba(20,184,166,0.4)';this.style.boxShadow='0 0 18px rgba(20,184,166,0.22)'"
                                    onmouseout="this.style.borderColor='rgba(255,255,255,0.06)';this.style.boxShadow='none'">
                                    <div
                                        style="width:52px;height:52px;background:linear-gradient(135deg,#14b8a6,#0f766e);flex-shrink:0;">
                                    </div>
                                    <div style="flex:1;padding:10px 14px;background:rgba(20,184,166,0.04);">
                                        <div
                                            style="color:#fff;font-size:0.82rem;font-weight:600;margin-bottom:2px;letter-spacing:0.02em;">
                                            Ocean Teal</div>
                                        <div
                                            style="color:rgba(255,255,255,0.35);font-size:0.7rem;font-family:monospace;">
                                            #14B8A6</div>
                                    </div>
                                </button>

                            </div>
                        </div>

                        <!-- üåø EARTHY group -->
                        <div>
                            <div
                                style="color:rgba(255,255,255,0.25);font-size:0.65rem;letter-spacing:0.18em;text-transform:uppercase;margin-bottom:10px;padding-left:2px;">
                                üåø &nbsp;Earthy</div>
                            <div style="display:flex;flex-direction:column;gap:8px;">

                                <!-- Malachite -->
                                <button class="accent-strip-btn"
                                    onclick="setAccentColor('#106b3e','#0a4f2d');_markAccent(this)"
                                    onmouseenter="_previewAccent('#106b3e','#0a4f2d')" onmouseleave="_restoreAccent()"
                                    data-c1="#106b3e" data-c2="#0a4f2d"
                                    style="all:unset;display:flex;align-items:center;gap:0;cursor:pointer;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);transition:border-color 0.2s,box-shadow 0.2s;"
                                    onmouseover="this.style.borderColor='rgba(16,107,62,0.5)';this.style.boxShadow='0 0 18px rgba(16,107,62,0.22)'"
                                    onmouseout="this.style.borderColor='rgba(255,255,255,0.06)';this.style.boxShadow='none'">
                                    <div
                                        style="width:52px;height:52px;background:linear-gradient(135deg,#106b3e,#0a4f2d);flex-shrink:0;">
                                    </div>
                                    <div style="flex:1;padding:10px 14px;background:rgba(16,107,62,0.05);">
                                        <div
                                            style="color:#fff;font-size:0.82rem;font-weight:600;margin-bottom:2px;letter-spacing:0.02em;">
                                            Malachite</div>
                                        <div
                                            style="color:rgba(255,255,255,0.35);font-size:0.7rem;font-family:monospace;">
                                            #106B3E</div>
                                    </div>
                                </button>

                                <!-- Espresso -->
                                <button class="accent-strip-btn"
                                    onclick="setAccentColor('#492201','#2d1300');_markAccent(this)"
                                    onmouseenter="_previewAccent('#492201','#2d1300')" onmouseleave="_restoreAccent()"
                                    data-c1="#492201" data-c2="#2d1300"
                                    style="all:unset;display:flex;align-items:center;gap:0;cursor:pointer;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);transition:border-color 0.2s,box-shadow 0.2s;"
                                    onmouseover="this.style.borderColor='rgba(73,34,1,0.6)';this.style.boxShadow='0 0 18px rgba(73,34,1,0.30)'"
                                    onmouseout="this.style.borderColor='rgba(255,255,255,0.06)';this.style.boxShadow='none'">
                                    <div
                                        style="width:52px;height:52px;background:linear-gradient(135deg,#492201,#2d1300);flex-shrink:0;">
                                    </div>
                                    <div style="flex:1;padding:10px 14px;background:rgba(73,34,1,0.06);">
                                        <div
                                            style="color:#fff;font-size:0.82rem;font-weight:600;margin-bottom:2px;letter-spacing:0.02em;">
                                            Espresso</div>
                                        <div
                                            style="color:rgba(255,255,255,0.35);font-size:0.7rem;font-family:monospace;">
                                            #492201</div>
                                    </div>
                                </button>

                            </div>
                        </div>

                        <!-- ‚ö° METALLIC group -->
                        <div>
                            <div
                                style="color:rgba(255,255,255,0.25);font-size:0.65rem;letter-spacing:0.18em;text-transform:uppercase;margin-bottom:10px;padding-left:2px;">
                                ‚ö° &nbsp;Metallic</div>
                            <div style="display:flex;flex-direction:column;gap:8px;">

                                <!-- Amber Protocol -->
                                <button class="accent-strip-btn"
                                    onclick="setAccentColor('#f4d17b','#e6b84a');_markAccent(this)"
                                    onmouseenter="_previewAccent('#f4d17b','#e6b84a')" onmouseleave="_restoreAccent()"
                                    data-c1="#f4d17b" data-c2="#e6b84a"
                                    style="all:unset;display:flex;align-items:center;gap:0;cursor:pointer;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);transition:border-color 0.2s,box-shadow 0.2s;"
                                    onmouseover="this.style.borderColor='rgba(244,209,123,0.4)';this.style.boxShadow='0 0 18px rgba(244,209,123,0.18)'"
                                    onmouseout="this.style.borderColor='rgba(255,255,255,0.06)';this.style.boxShadow='none'">
                                    <div
                                        style="width:52px;height:52px;background:linear-gradient(135deg,#f4d17b,#e6b84a);flex-shrink:0;">
                                    </div>
                                    <div style="flex:1;padding:10px 14px;background:rgba(244,209,123,0.04);">
                                        <div
                                            style="color:#fff;font-size:0.82rem;font-weight:600;margin-bottom:2px;letter-spacing:0.02em;">
                                            Amber Protocol</div>
                                        <div
                                            style="color:rgba(255,255,255,0.35);font-size:0.7rem;font-family:monospace;">
                                            #F4D17B</div>
                                    </div>
                                </button>

                            </div>
                        </div>

                    </div><!-- /accent-swatches -->
                </div>

            </div>
        </div>
    </div>


</body>


</html>